---
title: '一步步：使用 Swift 的簡單視頻應用' 
description:在本主題中，您將學習如何使用Brightcove Player SDK for iOS構建簡單的視頻播放應用程序。您將使用 Swift 編程語言構建它。
parent: Basics 
grandparent: iOS Development
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Overview">概述</h2>

<p class="video-cloud-only">此示例播放從<a href="https://apis.support.brightcove.com/playback/getting-started/overview-playback-api.html">Brightcove 播放 API</a>，這是最新且推薦的 API，用於從您的 Video Cloud 庫中檢索內容。</p>

<p class="video-cloud-only">對於此選項，您將需要一個策略密鑰。如果您不熟悉策略密鑰，請參閱<a href="https://apis.support.brightcove.com/policy/getting-started/overview-policy-api.html">策略API概述</a>。</p>

<aside class="bcls-aside bcls-aside--tip">此示例是用 Swift 編寫的，但您也可以使用 Objective-C 進行試驗。請參閱以下內容：
<ul>
	<li><a href="/ios/basics/step-step-simple-video-app-using-objective-c.html">一步步：：使用 Obj-C 的簡單視頻應用</a></li>
	<li><a href="https://github.com/BrightcoveOS/ios-player-samples/tree/master/Player/VideoCloudBasicPlayer/objc">VideoCloudBasicPlayer的Obj-C版本</a></li>
</ul>
</aside>
</section>

<section class="bcls-section">
<h2 id="Get_started">開始吧</h2>

<p class="player-only">此示例播放來自內部視頻文件數組的視頻。</p>

<p class="player-only">請按照以下步驟熟悉如何設置使用Brightcove Player SDK for iOS的應用程序項目。您可以查看以下各項的完整代碼：</p>

<ul class="player-only">
	<li><a href="#appdelegate">AppDelegate</a></li>
	<li>
	<p><a href="#viewControllerPerform">視圖控制器</a></p>
	</li>
</ul>

<div class="video-cloud-only">
<p>有兩種方法可以試用此示例：</p>

<h3>下載樣本</h3>

<p>下載整個Xcode項目進行實驗。</p>

<ol>
	<li>克隆或下載<a href="https://github.com/BrightcoveOS/ios-player-samples">適用於iOS的本機SDK示例</a>到您的本地系統。</li>
	<li>導航到<a href="https://github.com/BrightcoveOS/ios-player-samples/tree/master/Player/VideoCloudBasicPlayer/swift">播放器/ VideoCloudBasicPlayer / swift</a>示例應用程序。</li>
	<li>跑過<code translate="No">pod install</code>命令。</li>
	<li>打開並運行新創建的工作區。</li>
</ol>

<p>有關詳細信息，請參見<a href="/getting-started/running-sample-apps-native-sdk-ios.html">針對iOS / tvOS的Native SDK運行示例應用</a>文檔。</p>

<h3>按照本指南中的步驟構建應用</h3>

<p>請按照以下步驟熟悉如何設置使用Brightcove Player SDK for tvOS的應用程序項目。您可以查看以下各項的完整代碼：</p>

<ol>
	<li><a href="#appdelegate">AppDelegate</a></li>
	<li class="video-cloud-only">
	<p><a href="#viewController">視圖控制器</a></p>
	</li>
</ol>
</div>
</section>

<section class="bcls-section">
<h2 id="Create_the_project">建立專案</h2>

<p>在 Xcode 中設置一個項目。然後將 SDK 以及任何依賴項添加到項目中。</p>

<h3>設置 Xcode 項目</h3>

<p>為該應用程序創建一個新的Xcode項目。</p>

<ol class="bcls-tasklist">
	<li>
	<p>開始在 Xcode 中創建一個新的 iOS 項目。選擇<strong>創建一個新的 Xcode 項目</strong> .</p>

	<figure class="bcls-figure"><img class="bcls-image--no-border" alt="Create project" src="/assets/images/ios/step-by-step-swift/welcome.png" />
	<figcaption class="bcls-caption--image">建立專案</figcaption>
	</figure>
	</li>
	<li>
	<p>選擇<strong>IOS</strong>和<strong>單視圖應用程序</strong>為您的新項目。選擇<strong>下一個</strong> .</p>

	<figure class="bcls-figure"><img class="bcls-image--no-border" alt="Choose the project template" src="/assets/images/ios/step-by-step-swift/new-project.png" />
	<figcaption class="bcls-caption--image">選擇項目模板</figcaption>
	</figure>
	</li>
	<li>
	<p>設置項目信息如下：</p>

	<ul>
		<li><strong>產品名稱：</strong>簡單視頻播放</li>
		<li><strong>團隊：</strong>沒有任何
		<p>團隊字段是可選的。如果要在App Store上分發應用程序，則需要通過Apple Developer Program選擇您所屬的團隊。代碼簽名需要團隊名稱。在此示例中，我們將不選擇任何內容。</p>
		</li>
		<li><strong>機構名稱：</strong>您的公司名稱</li>
		<li><strong>組織標識符：</strong> com.example-公司<br />
		這使得應用商店的產品名稱是唯一的。</li>
		<li><strong>語：</strong>迅速</li>
    <li><strong>用戶界面：</strong>故事板
    <p>在此示例中，我們使用情節提要面板界面。</p></li>
	</ul>

	<figure class="bcls-figure"><img class="bcls-image--no-border" alt="Add project information" src="/assets/images/ios/step-by-step-swift/project-info.png" />
	<figcaption class="bcls-caption--image">添加項目信息</figcaption>
	</figure>
	</li>
	<li>
	<p>選擇要保存項目並創建它的位置。</p>

	<figure class="bcls-figure"><img class="bcls-image--no-border" alt="Save project" src="/assets/images/ios/step-by-step-swift/save-file.png" />
	<figcaption class="bcls-caption--image">保存項目</figcaption>
	</figure>
	</li>
	<li>現在關閉項目（<strong>是的，將其關閉-這很重要！</strong>）</li>
</ol>

<h3 id="dependencies">將SDK及其依賴項添加到您的項目中</h3>

<p>將 SDK 及其依賴項添加到您的項目的最簡單方法是使用 CocoaPods。</p>

<p>CocoaPods是一個依賴項管理器，可將庫添加到您的項目中。它不是必需的，但是使安裝更容易。要安裝 CocoaPods，請參閱<a href="//cocoapods.org">可可豆</a>地點。</p>

<aside class="bcls-aside bcls-aside--warning">
<ul>
	<li>需要CocoaPods 1.0版或更高版本。</li>
	<li>使用 CocoaPods（<code translate="No">pod</code>工具）將修改項目文件。在執行此操作之前，您可能需要進行備份。</li>
</ul>
</aside>

<ol class="bcls-tasklist">
	<li>
	<p>在您的項目文件夾中，創建一個純文本文件，名為<strong>播客文件</strong>（無文件擴展名）。</p>
	</li>
	<li>
	<p>使用文本編輯器，將以下代碼行添加到 Podfile 並保存。此代碼執行以下操作：</p>

	<ul>
		<li>第1行：指向Brightcove pod規範的GitHub位置。</li>
		<li>第3行：將 Pod 設置為使用框架而不是靜態庫。</li>
		<li>第5行：定義iOS平台版本。</li>
		<li>
		<p>7-9行：安裝Brightcove Native Player SDK。</p>

		<ol>
			<li>從中獲取當前的Native SDK版本<a href="/ios/basics/overview-brightcove-player-sdk-ios.html#Download_the_SDK">適用於iOS的Brightcove Native SDK概述</a>文檔。</li>
			<li>替換值<code translate="No"> '6.7.10'</code>使用當前的SDK版本號。</li>
			<li>
			<p>有關管理依賴項的更多信息，請參見<a href="https://cocoacasts.com/how-to-manage-dependencies-with-cocoapods/">如何使用CocoaPods管理依賴項</a>文章。</p>
			</li>
		</ol>
		&nbsp;<aside class="bcls-aside bcls-aside--information">這<code translate="No">target</code>屬性用於 CocoaPods 1.0 及更新版本。</aside>
		</li>
	</ul>

	<pre class="line-numbers" data-start="1">
<code class="language-swift" translate="No">source 'https://github.com/brightcove/BrightcoveSpecs.git'

use_frameworks!

platform :ios, '11.0' # (or whatever version you want)

target 'Simple-Video-Playback' do
	pod 'Brightcove-Player-Core', '6.7.10'
end</code></pre>

	<aside class="bcls-aside bcls-aside--information">這<code translate="No">target</code>屬性用於 CocoaPods 1.0 及更新版本。</aside>
	</li>
	<!--							<p class="text-warning">ReactiveCocoa will be added to your project as a part of the Brightcove SDK.</p>-->
	<li>
	<p>打開終端會話並導航到您的<strong>簡單視頻播放</strong> Xcode項目文件夾。</p>

	<figure class="bcls-figure"><img class="bcls-image--no-border" alt="Terminal session" src="//learning-services-media.brightcove.com/doc-assets/device-sdks/ios/getting-started/quick-start/quick-start-terminal.png" />
	<figcaption class="bcls-caption--image">終端會話</figcaption>
	</figure>
	</li>
	<li>
	<p>在終端會話中，鍵入命令</p>

	<pre>
<code class="language-swift" translate="No">pod install</code></pre>

	<p>然後按<strong>返回</strong>運行它。</p>
  <p>如果CocoaPods無法找到該Pod的兼容版本，或者它不是最新版本，請嘗試在終端應用程序中運行以下命令：</p>
  <pre>
<code class="language-swift" translate="No">pod update</code></pre>
  <p>您應該會在終端中看到一系列消息，表明 Brightcove Player SDK 已添加到您的項目中。</p>
	</li>
	<li>
    <p>這<code translate="No">pod install</code>命令創建一個<code translate="No">.xcworkspace</code>您的項目的文件。</p>
	<p>從現在開始，您必須打開<strong>Simple-Video-Playback.xcworkspace</strong> Xcode 中的文件，<strong>不是</strong>這 <em>Simple-Video-Playback.xcodeproj</em> 文件。 </p>
  <figure class="bcls-figure"><img class="bcls-image--no-border" alt="Workspace" src="/assets/images/ios/step-by-step-swift/workspace.png" />
	<figcaption class="bcls-caption--image">工作區</figcaption>
	</figure>
	</li>
</ol>

<aside class="bcls-aside bcls-aside--tip">
<ul>
	<li>如果您定期創建和編輯Podfile，可以嘗試使用<a href="https://cocoapods.org/app">CocoaPods應用程式</a>完成前面的步驟。</li>
	<li>如果您不想使用CocoaPods，則可以<a href="https://github.com/brightcove/brightcove-player-sdk-ios/releases">下載最新版本的SDK</a>並將其手動添加到您的項目中。</li>
</ul>
</aside>
</section>

<section class="bcls-section">
<h2 id="Code_the_video_app">編碼視頻應用</h2>

<p>為簡單的視頻播放應用程序創建代碼。</p>

<ol class="bcls-tasklist">
	<li>在Xcode中，打開<strong>Simple-Video-Playback.xcworkspace</strong>文件。</li>
</ol>

<h3 id="appdelegate">設置應用的音頻行為</h3>

<p>音頻會話處理應用級別的音頻行為。進一步了解<a href="https://developer.apple.com/documentation/avfoundation/avaudiosession">AVAudioSession</a>班級。</p>

<aside class="bcls-aside bcls-aside--tip">您可以從多個音頻會話類別和設置中進行選擇，以自定義應用的音頻行為。<a href="https://developer.apple.com/library/archive/documentation/Audio/Conceptual/AudioSessionProgrammingGuide/AudioSessionCategoriesandModes/AudioSessionCategoriesandModes.html#//apple_ref/doc/uid/TP40007875-CH10">選擇最佳音頻會話類別</a>為您的應用程序。</aside>

<p>對於此示例，我們將使用<a href="https://developer.apple.com/documentation/avfoundation/avaudiosession/category/1616509-playback">回放</a>類別。即使在屏幕被鎖定並且鈴聲/靜音開關設置為靜音時，它也會播放音頻。由於我們正在播放視頻，因此我們將使用<a href="https://developer.apple.com/documentation/avfoundation/avaudiosession/mode/1616623-movieplayback">電影回放</a>模式。為簡單起見，我們將此代碼放在 App Delegate 中。</p>

<ol class="bcls-tasklist">
	<li>
	<p>在您的項目中，打開“App Delegate"文件（<strong> AppDelegate.swift</strong>）。</p>
	</li>
	<li>
	<p>在裡面<code translate="No">didFinishLaunchingWithOptions</code>功能，添加代碼以設置音頻會話類別。確保您導入<code translate="No">AVFoundation</code>框架。</p>

	<ul>
		<li>
		<p>我們需要下面的代碼來確保音頻在我們期望的時候播放。例如，如果未設置此代碼，則靜音開關打開時我們將聽不到視頻。</p>
		</li>
	</ul>

	<pre class="line-numbers" data-start="1">
<code class="language-swift" translate="No">//
//  AppDelegate.swift
//  Simple-Video-Playback
//
//  Copyright © 2018 Brightcove. All rights reserved.
//

import UIKit
<span class="bcls-highlight">import AVFoundation</span>

@UIApplicationMain
class AppDelegate: UIResponder, UIApplicationDelegate {

  var window: UIWindow?

  func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -&gt; Bool {
  	// Override point for customization after application launch.

  <span class="bcls-highlight">  var categoryError :NSError?
  	var success: Bool
  	do {
  		try AVAudioSession.sharedInstance().setCategory(.playback, mode: .moviePlayback, options: .duckOthers)
  		success = true
  	} catch let error as NSError {
  		categoryError = error
  		success = false
  	}

  	if !success {
  		print("AppDelegate Debug - Error setting AVAudioSession category.  Because of this, there may be no sound. \(categoryError!)")
  	}</span>

  	return true
  }

  func applicationWillResignActive(_ application: UIApplication) {
  	// Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
  	// Use this method to pause ongoing tasks, disable timers, and invalidate graphics rendering callbacks. Games should use this method to pause the game.
  }

  func applicationDidEnterBackground(_ application: UIApplication) {
  	// Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later.
  	// If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.
  }

  func applicationWillEnterForeground(_ application: UIApplication) {
  	// Called as part of the transition from the background to the active state; here you can undo many of the changes made on entering the background.
  }

  func applicationDidBecomeActive(_ application: UIApplication) {
  	// Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
  }

  func applicationWillTerminate(_ application: UIApplication) {
  	// Called when the application is about to terminate. Save data if appropriate. See also applicationDidEnterBackground:.
  }

}</code></pre>
	</li>
</ol>

<h3>構建視圖控制器</h3>

<p>更新視圖控制器類以播放來自 Brightcove 目錄服務的視頻。</p>

<ol class="bcls-tasklist">
	<li>
	<p>在您的項目中，打開View Controller文件（<strong> ViewController.swift</strong>）。</p>
	</li>
</ol>

<div class="video-cloud-only">
<h4>導入本機SDK</h4>

<p>儘管iOS的Brightcove Native Player SDK是用Objective-C編寫的，但是我們可以簡單地將框架模塊導入到我們的Swift項目中。</p>

<ol class="bcls-tasklist">
	<li>
	<p>現有以下<code translate="No">import</code>指令，添加以下內容以導入Brightcove Native Player SDK：</p>

	<pre class="line-numbers" data-start="9">
<code class="language-swift" translate="No">import BrightcovePlayerSDK</code></pre>
	</li>
</ol>

<h4>用您的價值觀定制項目</h4>

<p>添加值以訪問您的Video Cloud帳戶。</p>

<p>此示例播放從<a href="https://apis.support.brightcove.com/playback/getting-started/overview-playback-api.html">Brightcove 播放 API</a>，這是最新且推薦的 API，用於從您的 Video Cloud 庫中檢索內容。如果您不熟悉策略密鑰，請參閱<a href="https://apis.support.brightcove.com/policy/getting-started/overview-policy-api.html">策略API概述</a>。</p>

<ol class="bcls-tasklist">
	<li>
	<p>以下<code translate="No">import</code>指令，為以下內容添加您自己的值：</p>

	<ul>
		<li>第12行：定義您的Brightcove播放API策略密鑰</li>
		<li>第13行：定義您的視頻雲帳戶ID</li>
		<li>
		<p>第14行：定義您的視頻雲視頻ID</p>
		</li>
	</ul>

	<pre class="line-numbers" data-start="11">
<code class="language-swift" translate="No">// ** Customize these values with your own account information **
let kViewControllerPlaybackServicePolicyKey = "<span class="bcls-input">your policy key</span>"
let kViewControllerAccountID = "<span class="bcls-input">your account id</span>"
let kViewControllerVideoID = "<span class="bcls-input">your video id</span>"</code></pre>
	</li>
</ol>

<h4>設置類委託</h4>

<p>這允許您的應用偵聽和響應視頻播放事件和播放器控制事件。</p>

<ol class="bcls-tasklist">
	<li>
	<p>更新視圖控制器類如下：</p>

	<pre class="line-numbers" data-start="15">
<code class="language-swift" translate="No">class ViewController: UIViewController, BCOVPlaybackControllerDelegate {
</code></pre>
	</li>
</ol>

<h4>聲明常量並設置視圖</h4>

<ol class="bcls-tasklist">
	<li>
	<p>在裡面<code translate="No">ViewController</code>類，添加以下內容：</p>

	<ul>
		<li>第16行：初始化共享管理器。這<a href="/ios/reference/sdk/Classes/BCOVPlayerSDKManager.html"><code translate="No">BCOVPlayerSDKManager</code></a> class 是一個單例，允許您在 SDK 生態系統中創建其他對象。</li>
		<li>第17行：定義一個常量，該常量使用您的帳戶ID和策略密鑰來初始化Brightcove播放服務。這<a href="/ios/reference/sdk/Classes/BCOVPlaybackService.html"><code translate="No">BCOVPlaybackService</code></a>類提供用於從回放 API 檢索數據的異步方法。</li>
		<li>第18行：為播放控制器定義一個常數。這<a href="/ios/reference/sdk/Protocols/BCOVPlaybackController.html"><code translate="No">BCOVPlaybackController</code></a>具有控製播放功能的方法。</li>
		<li>
		<p>第19行：為視圖定義一個變量。</p>
		</li>
	</ul>

	<pre class="line-numbers" data-start="15">
<code class="language-swift" translate="No">class ViewController: UIViewController, BCOVPlaybackControllerDelegate {
  let sharedSDKManager = BCOVPlayerSDKManager.shared()
  let playbackService = BCOVPlaybackService(accountId: kViewControllerAccountID, policyKey: kViewControllerPlaybackServicePolicyKey)
  let playbackController :BCOVPlaybackController
  @IBOutlet weak var videoContainerView: UIView!</code></pre>
	</li>
</ol>

<h4>創建一個初始化函數</h4>

<ol class="bcls-tasklist">
	<li>在上一步的代碼下方，創建一個<code translate="No">init()</code>功能如下：

	<ul>
		<li>第23行：使用共享管理器創建播放控制器。</li>
		<li>
		<p>第27行：<strong>可選的：</strong>將您的視頻雲帳戶 ID 發送到分析。僅當您覆蓋<code translate="No">BCOVVideo</code>類或不使用 Brightcove Playback 服務或目錄。</p>

		<aside class="bcls-aside bcls-aside--tip">有關將數據發送到 Video Cloud Analytics 的詳細信息，請參閱<a href="/features/viewing-brightcove-analytics-player-sdks.html">使用 Brightcove 分析</a>指導。</aside>
		</li>
		<li>
		<p>第29-31行：設置代表並打開自動前進和自動播放功能。</p>
		</li>
	</ul>

	<pre class="line-numbers" data-start="22">
<code class="language-swift" translate="No"> required init?(coder aDecoder: NSCoder) {
	playbackController = (sharedSDKManager?.createPlaybackController())!

	super.init(coder: aDecoder)

	playbackController.analytics.account = kViewControllerAccountID // Optional

	playbackController.delegate = self
	playbackController.isAutoAdvance = true
	playbackController.isAutoPlay = true
}</code></pre>
	</li>
</ol>

<h4>配置播放器</h4>

<ol class="bcls-tasklist">
	<li>
	<p>在裡面<code translate="No">viewDidLoad()</code>功能，添加以下內容：</p>

	<ul>
		<li>第39行：使用標準的VOD佈局創建並設置Brightcove播放器控件。</li>
		<li>第44行：將播放器視圖添加為主視圖的子視圖。</li>
		<li>第45行：關掉<a href="https://developer.apple.com/documentation/appkit/nsview/1526961-translatesautoresizingmaskintoco">自動調整大小掩碼</a> .</li>
		<li>46-51行：用<a href="https://developer.apple.com/library/archive/documentation/UserExperience/Conceptual/AutolayoutPG/index.html">自動佈局</a>為玩家視圖定義動態約束。</li>
		<li>第54行：將播放器視圖與播放控制器相關聯。</li>
		<li>
		<p>第56行：呼叫<code translate="No">requestContentFromPlaybackService</code>函數，我們將在下一步中對其進行定義。</p>
		</li>
	</ul>

	<pre class="line-numbers" data-start="34">
<code class="language-swift" translate="No">override func viewDidLoad() {
  super.viewDidLoad()
  // Do any additional setup after loading the view, typically from a nib.

  // Set up our player view. Create with a standard VOD layout.
  guard let playerView = BCOVPUIPlayerView(playbackController: self.playbackController, options: nil, controlsView: BCOVPUIBasicControlView.withVODLayout()) else {
      return
  }

  // Install in the container view and match its size.
  self.videoContainerView.addSubview(playerView)
  playerView.translatesAutoresizingMaskIntoConstraints = false
  NSLayoutConstraint.activate([
      playerView.topAnchor.constraint(equalTo: self.videoContainerView.topAnchor),
      playerView.rightAnchor.constraint(equalTo: self.videoContainerView.rightAnchor),
      playerView.leftAnchor.constraint(equalTo: self.videoContainerView.leftAnchor),
      playerView.bottomAnchor.constraint(equalTo: self.videoContainerView.bottomAnchor)
  ])

  // Associate the playerView with the playback controller.
  playerView.playbackController = playbackController

  requestContentFromPlaybackService()
}</code></pre>
	</li>
</ol>

<h4>從Brightcove庫中請求內容</h4>

<p>為了播放視頻內容，您將向目錄服務請求播放列表</p>

<ol class="bcls-tasklist">
	<li>
	<p>以下<code translate="No">viewDidLoad()</code>函數，創建一個名為<code translate="No">requestContentFromPlaybackService()</code>如下：</p>

	<ul>
		<li>60行：根據給定的視頻ID從Playback API返回視頻對象。</li>
		<li>第63行：將視頻添加到播放控制器。</li>
		<li>
		<p>第65行：如果未返回播放列表，則寫入錯誤消息。</p>
		</li>
	</ul>

	<pre class="line-numbers" data-start="59">
<code class="language-swift" translate="No">func requestContentFromPlaybackService() {
  playbackService?.findVideo(withVideoID: kViewControllerVideoID, parameters: nil) { (video: BCOVVideo?, jsonResponse: [AnyHashable: Any]?, error: Error?) -&gt; Void in

    if let v = video {
        self.playbackController.setVideos([v] as NSArray)
    } else {
        print("ViewController Debug - Error retrieving video: \(error?.localizedDescription ?? "unknown error")")
    }
  }
}</code></pre>
	</li>
</ol>
<!--
						<h4>The rest</h4>
						<ol start="10">
							<li><p>Create a function to handle when the playback session advances.</p></li>
							<p><code data-gist-id="ffab3777678c48c7212d" data-gist-line="123-125" data-gist-hide-footer="true"></code></p>
							<li><p>Create a function to set the status bar style.</p></li>
							<p><code data-gist-id="ffab3777678c48c7212d" data-gist-line="129-131" data-gist-hide-footer="true"></code></p>
						</ol>
-->

<h4 id="viewController">查看代碼</h4>

<p>視圖控制器現已完成。這是完整的代碼：</p>

<pre class="line-numbers" data-start="1">
<code class="language-swift" translate="No">//
//  ViewController.swift
//  VideoCloudBasicPlayer
//
//  Copyright © 2018 Brightcove, Inc. All rights reserved.
//

import UIKit
import BrightcovePlayerSDK

let kViewControllerPlaybackServicePolicyKey = "<span class="bcls-input">your policy key</span>"
let kViewControllerAccountID = "<span class="bcls-input">your account id</span>"
let kViewControllerVideoID = "<span class="bcls-input">your video id</span>"

class ViewController: UIViewController, BCOVPlaybackControllerDelegate {

  let sharedSDKManager = BCOVPlayerSDKManager.shared()
  let playbackService = BCOVPlaybackService(accountId: kViewControllerAccountID, policyKey: kViewControllerPlaybackServicePolicyKey)
  let playbackController :BCOVPlaybackController
  @IBOutlet weak var videoContainerView: UIView!

  required init?(coder aDecoder: NSCoder) {
    playbackController = (sharedSDKManager?.createPlaybackController())!

    super.init(coder: aDecoder)

    playbackController.analytics.account = kViewControllerAccountID // Optional

    playbackController.delegate = self
    playbackController.isAutoAdvance = true
    playbackController.isAutoPlay = true
  }

  override func viewDidLoad() {
    super.viewDidLoad()
    // Do any additional setup after loading the view, typically from a nib.

    // Set up our player view. Create with a standard VOD layout.
    guard let playerView = BCOVPUIPlayerView(playbackController: self.playbackController, options: nil, controlsView: BCOVPUIBasicControlView.withVODLayout()) else {
        return
    }

    // Install in the container view and match its size.
    self.videoContainerView.addSubview(playerView)
    playerView.translatesAutoresizingMaskIntoConstraints = false
    NSLayoutConstraint.activate([
      playerView.topAnchor.constraint(equalTo: self.videoContainerView.topAnchor),
      playerView.rightAnchor.constraint(equalTo: self.videoContainerView.rightAnchor),
      playerView.leftAnchor.constraint(equalTo: self.videoContainerView.leftAnchor),
      playerView.bottomAnchor.constraint(equalTo: self.videoContainerView.bottomAnchor)
    ])

    // Associate the playerView with the playback controller.
    playerView.playbackController = playbackController

    requestContentFromPlaybackService()
  }

  func requestContentFromPlaybackService() {
    playbackService?.findVideo(withVideoID: kViewControllerVideoID, parameters: nil) { (video: BCOVVideo?, jsonResponse: [AnyHashable: Any]?, error: Error?) -&gt; Void in

      if let v = video {
        self.playbackController.setVideos([v] as NSArray)
      } else {
        print("ViewController Debug - Error retrieving video: \(error?.localizedDescription ?? "unknown error")")
      }
    }
  }
}</code></pre>
</div>
<!--class="video-cloud-only"-->

<div class="player-only">
<h4>導入本機SDK</h4>

<p>儘管iOS的Brightcove Native Player SDK是用Obj-C編寫的，但是我們可以簡單地將框架模塊導入到我們的Swift項目中。</p>

<ol class="bcls-tasklist">
	<li>
	<p>現有以下<code translate="No">import</code>指令，添加以下內容以導入Brightcove Native Player SDK：</p>

	<pre class="line-numbers" data-start="9">
<code class="language-swift" translate="No">import BrightcovePlayerSDK</code></pre>
	</li>
</ol>

<h4>用您的價值觀定制項目</h4>

<p>設置您的帳戶 ID 的值，該值將在稍後的步驟中發送到 Brightcove。</p>

<ol class="bcls-tasklist">
	<li>
	<p>以下<code translate="No">#import</code>指令，為您的Brightcove帳戶ID添加自己的值。這將用於在Brightcove中註冊您的應用。</p>

	<pre class="line-numbers" data-start="11">
<code class="language-swift" translate="No">let kViewControllerAccountID = "<span class="bcls-input">your account id</span>" // For Brightcove registration</code></pre>
	</li>
</ol>

<h4>設置類代表</h4>

<p>這允許您的應用偵聽和響應視頻播放事件和播放器控制事件。</p>

<ol class="bcls-tasklist">
	<li>
	<p>更新視圖控制器類如下：</p>

	<pre class="line-numbers" data-start="13">
<code class="language-swift" translate="No">class ViewController: UIViewController, BCOVPlaybackControllerDelegate {</code></pre>
	</li>
</ol>

<h4>聲明常量並設置視圖</h4>

<ol class="bcls-tasklist">
	<li>
	<p>在裡面<code translate="No">ViewController</code>類，添加以下內容：</p>

	<ul>
		<li>第14行：初始化共享管理器。這<a href="/ios/reference/sdk/Classes/BCOVPlayerSDKManager.html"><code translate="No">BCOVPlayerSDKManager</code></a> class 是一個單例，允許您在 SDK 生態系統中創建其他對象。</li>
		<li>第15行：為播放控制器定義一個常數。這<a href="/ios/reference/sdk/Protocols/BCOVPlaybackController.html"><code translate="No">BCOVPlaybackController</code></a>具有控製播放功能的方法。</li>
		<li>
		<p>第16行：為視圖定義一個變量。</p>
		</li>
	</ul>

	<pre class="line-numbers" data-start="13">
<code class="language-swift" translate="No">class ViewController: UIViewController, BCOVPlaybackControllerDelegate {
  let sharedSDKManager = BCOVPlayerSDKManager.shared()
  let playbackController :BCOVPlaybackController
  @IBOutlet weak var videoContainerView: UIView!</code></pre>
	</li>
</ol>

<h4>創建一個初始化函數</h4>

<ol class="bcls-tasklist">
	<li>在上一步的代碼下方，創建一個<code translate="No">init()</code>功能如下：

	<ul>
		<li>第20行：使用共享管理器創建播放控制器。</li>
		<li>
		<p>第25行：將您的視頻雲發布者 ID 發送到 Brightcove 分析以註冊您的應用程序。</p>
		</li>
		<li>
		<p>第28-30行：設置代理並打開自動前進和自動播放功能。</p>
		</li>
	</ul>

	<pre class="line-numbers" data-start="18">
<code class="language-swift" translate="No">required init?(coder aDecoder: NSCoder) {
  // Create the Brightcove playback controller
  playbackController = (sharedSDKManager?.createPlaybackController())!

  super.init(coder: aDecoder)

  // Register your app with Brightcove
  playbackController.analytics.account = kViewControllerAccountID

  // Configure the player
  playbackController.delegate = self
  playbackController.isAutoAdvance = true
  playbackController.isAutoPlay = true
}</code></pre>
	</li>
</ol>

<h4>配置播放器</h4>

<ol class="bcls-tasklist">
	<li>
	<p>在裡面<code translate="No">viewDidLoad()</code>功能，添加以下內容：</p>

	<ul>
		<li>38-40行：使用網址路徑創建視頻源數組。</li>
		<li>第43-45行：配置播放控制器的視圖。</li>
		<li>第48行：將播放器視圖添加為主視圖的子視圖。</li>
		<li>第49行：關掉<a href="https://developer.apple.com/documentation/appkit/nsview/1526961-translatesautoresizingmaskintoco">自動調整大小掩碼</a> .</li>
		<li>第50-55行：用<a href="https://developer.apple.com/library/archive/documentation/UserExperience/Conceptual/AutolayoutPG/index.html">自動佈局</a>為玩家視圖定義動態約束。</li>
		<li>第58行：將播放器視圖與播放控制器關聯。</li>
		<li>第61行：將視頻陣列添加到控制器的播放隊列中。</li>
		<li>
		<p>第62行：開始播放第一個視頻。</p>
		</li>
	</ul>

	<pre class="line-numbers" data-start="33">
<code class="language-swift" translate="No">override func viewDidLoad() {
  super.viewDidLoad()
  // Do any additional setup after loading the view, typically from a nib.

  // Create an array of videos
  var videoArray = [AnyObject]()
  videoArray = [videoWithURL(url: NSURL(string: "https://solutions.brightcove.com/bcls/assets/videos/Great_Horned_Owl.mp4")!),
                videoWithURL(url: NSURL(string: "https://solutions.brightcove.com/bcls/assets/videos/Great_Blue_Heron.mp4")!)]

  // Set up the player view with a standard VOD layout.
  guard let playerView = BCOVPUIPlayerView(playbackController: self.playbackController, options: nil, controlsView: BCOVPUIBasicControlView.withVODLayout()) else {
      return
  }

  // Install the container view and match its size.
  self.videoContainerView.addSubview(playerView)
  playerView.translatesAutoresizingMaskIntoConstraints = false
  NSLayoutConstraint.activate([
      playerView.topAnchor.constraint(equalTo: self.videoContainerView.topAnchor),
      playerView.rightAnchor.constraint(equalTo: self.videoContainerView.rightAnchor),
      playerView.leftAnchor.constraint(equalTo: self.videoContainerView.leftAnchor),
      playerView.bottomAnchor.constraint(equalTo: self.videoContainerView.bottomAnchor)
  ])

  // Associate the playerView with the playback controller.
  playerView.playbackController = playbackController

  // Load the video array into the player and start video playback
  playbackController.setVideos(videoArray as NSArray)
  playbackController.play();
}</code></pre>
	</li>
</ol>

<h4>設置視頻源的傳送方式</h4>

<ol class="bcls-tasklist">
	<li>
	<p>以下<code translate="No">viewDidLoad()</code>函數，創建一個函數來設置投放方式<code translate="No">BCOVSources</code>屬於視頻的影片</p>

	<pre class="line-numbers" data-start="65">
<code class="language-swift" translate="No">func videoWithURL(url: NSURL) -&gt; BCOVVideo {
    // Set the delivery method for BCOVSources that belong to a video
    let source:BCOVSource = BCOVSource(url: url as URL, deliveryMethod: kBCOVSourceDeliveryHLS, properties: nil)
    let video = BCOVVideo.init(source: source, cuePoints: BCOVCuePointCollection.init(array: []), properties: [NSObject:AnyObject]())
    return video!
}</code></pre>
	</li>
</ol>
<!-- <h4>The rest</h4>

<ol class="bcls-tasklist">
	<li>
	<p>Optional: Below the <code translate="No">videoWithURL()</code> function, create a function to handle when the playback session advances.</p>

	<pre class="line-numbers" data-start="63">
<code class="language-swift" translate="No">private func playbackController(controller: BCOVPlaybackController!, didAdvanceToPlaybackSession session: BCOVPlaybackSession!) {
    print("ViewController Debug - Advanced to new session.")
}</code></pre>
	</li>
</ol> -->

<h4 id="viewControllerPerform">查看代碼</h4>

<p>視圖控制器現已完成。這是完整的代碼：</p>

<pre class="line-numbers" data-start="1">
<code class="language-swift" translate="No">//
//  ViewController.swift
//  Simple-Video-Playback for Brightcove Player Customers
//
//  Copyright © 2018 Brightcove. All rights reserved.
//

import UIKit
import BrightcovePlayerSDK

let kViewControllerAccountID = "<span class="bcls-input">your account id</span>" // For Brightcove registration

class ViewController: UIViewController, BCOVPlaybackControllerDelegate {
    let sharedSDKManager = BCOVPlayerSDKManager.shared()
    let playbackController :BCOVPlaybackController
    @IBOutlet weak var videoContainerView: UIView!

    required init?(coder aDecoder: NSCoder) {
        // Create the Brightcove playback controller
        playbackController = (sharedSDKManager?.createPlaybackController())!

        super.init(coder: aDecoder)

        // Register your app with Brightcove
        playbackController.analytics.account = kViewControllerAccountID

        // Configure the player
        playbackController.delegate = self
        playbackController.isAutoAdvance = true
        playbackController.isAutoPlay = true
    }

    override func viewDidLoad() {
        super.viewDidLoad()
        // Do any additional setup after loading the view, typically from a nib.

        // Create an array of videos
        var videoArray = [AnyObject]()
        videoArray = [videoWithURL(url: NSURL(string: "https://solutions.brightcove.com/bcls/assets/videos/Great_Horned_Owl.mp4")!),
                      videoWithURL(url: NSURL(string: "https://solutions.brightcove.com/bcls/assets/videos/Great_Blue_Heron.mp4")!)]

        // Set up the player view with a standard VOD layout.
        guard let playerView = BCOVPUIPlayerView(playbackController: self.playbackController, options: nil, controlsView: BCOVPUIBasicControlView.withVODLayout()) else {
            return
        }

        // Install in the container view and match its size.
        self.videoContainerView.addSubview(playerView)
        playerView.translatesAutoresizingMaskIntoConstraints = false
        NSLayoutConstraint.activate([
            playerView.topAnchor.constraint(equalTo: self.videoContainerView.topAnchor),
            playerView.rightAnchor.constraint(equalTo: self.videoContainerView.rightAnchor),
            playerView.leftAnchor.constraint(equalTo: self.videoContainerView.leftAnchor),
            playerView.bottomAnchor.constraint(equalTo: self.videoContainerView.bottomAnchor)
        ])

        // Associate the playerView with the playback controller.
        playerView.playbackController = playbackController

        // Load the video array into the player and start video playback
        playbackController.setVideos(videoArray as NSArray)
        playbackController.play();
    }

    func videoWithURL(url: NSURL) -&gt; BCOVVideo {
      // Set the delivery method for BCOVSources that belong to a video
      let source:BCOVSource = BCOVSource(url: url as URL, deliveryMethod: kBCOVSourceDeliveryHLS, properties: nil)
      let video = BCOVVideo.init(source: source, cuePoints: BCOVCuePointCollection.init(array: []), properties: [NSObject:AnyObject]())
      return video!
    }
}</code></pre>
</div>
<!--class="player-only"--></section>
<!--id="Code_the_video_app"-->

<section class="bcls-section">
<h2 id="Connect_the_storyboard_view">連接情節提要視圖</h2>

<p>連接<code translate="No">Main.storyboard</code>查看與<code translate="No">videoContainerView</code>財產。</p>

<ol class="bcls-tasklist">
	<li>
	<p>在Xcode中，打開<code translate="No">Main.storyboard</code>文件。</p>
	</li>
	<li>
	<p>在隨播資料檢視中，展開<strong>查看控制器場景</strong>然後<strong>查看控制器</strong>菜單以顯示<strong>看法</strong>目的。</p>

	<figure class="bcls-figure"><img class="bcls-image" alt="Storyboard view" src="//learning-services-media.brightcove.com/doc-assets/device-sdks/ios/getting-started/quick-start/quick-start-storyboard-view.png" />
	<figcaption class="bcls-caption--image">故事板視圖</figcaption>
	</figure>
	</li>
	<li>
	<p>通過選擇將助手編輯器添加到情節提要視圖中<strong>在右側添加編輯器</strong>圖標。</p>

	<figure class="bcls-figure"><img class="bcls-image" alt="Add assistant editor" src="/assets/images/ios/step-by-step-swift/add-editor.png" />
	<figcaption class="bcls-caption--image">添加助理編輯器</figcaption>
	</figure>
	</li>
  <li>
	<p>在助理編輯器中，打開<code translate="No">ViewController.swift</code>文件。</p>

	<figure class="bcls-figure"><img class="bcls-image" alt="Select controller file" src="/assets/images/ios/step-by-step-swift/select-controller.png" />
	<figcaption class="bcls-caption--image">選擇控制器文件</figcaption>
	</figure>
	</li>
	<li>
	<p>選擇旁邊的空心圓圈<code translate="No">@IBOutlet</code>為了<code translate="No">videoContainerView</code>，並將其拖到<strong>看法</strong>對象來連接這些組件。</p>

	<figure class="bcls-figure"><img class="bcls-image" alt="Connect the view" src="//learning-services-media.brightcove.com/doc-assets/device-sdks/ios/getting-started/quick-start-swift/connect-view.png" />
	<figcaption class="bcls-caption--image">連接視圖</figcaption>
	</figure>
	</li>
</ol>
</section>

<section class="bcls-section">
<h2 id="Manage_Media_Security">管理媒體安全</h2>

<p>App Transport Security（ATS）可以在您的應用程序和Web服務之間建立安全連接。隨著 Apple 發布 iOS 9 SDK，一項名為<a href="https://developer.apple.com/library/prerelease/ios/technotes/App-Transport-Security-Technote/">應用傳輸安全 (ATS)</a>加入。</p>

<ol class="bcls-tasklist">
	<li>
	<p>以下情況之一將適用於您的應用程序：</p>

	<ul>
		<li class="video-cloud-only">
		<p>默認情況下，適用於iOS的Brightcove Native SDK使用源選擇策略來選擇HTTPS而不是HTTP源，因此您可以在啟用ATS的情況下構建應用程序。</p>

		<p>就是這樣，您已準備好運行您的應用程序。</p>

		<p>&nbsp;</p>
		</li>
		<li class="player-only">
		<p>如果您的遠程資產使用HTTPS而不是HTTP源，則可以在啟用ATS的情況下構建應用程序。</p>

		<p>就是這樣，您已準備好運行您的應用程序。</p>

		<p>&nbsp;</p>
		</li>
		<li>
		<p>如果您使用的是HTTP源或您的應用程序中有其他HTTP調用，則可能會遇到以下錯誤消息：</p>

		<pre class="line-numbers" data-start="1">
<code class="language-swift" translate="No">App Transport Security has blocked a cleartext HTTP (http://) resource load since it is insecure.
Temporary exceptions can be configured via your app's Info.plist file.</code></pre>

		<p>這意味著 ATS 已啟用，但您的系統未配置為滿足 ATS 要求。要解決此問題，請參閱<a href="/ios/framework/working-app-transport-security-ats.html">使用應用傳輸安全 (ATS)</a>文檔。</p>
		</li>
	</ul>
	</li>
</ol>
</section>

<section class="bcls-section">
<h2 id="Run_the_app">運行應用程序</h2>

<div class="video-cloud-only">
<p>該應用程序已準備好在 iPhone、iPad 或 iOS 模擬器上構建和運行。您應該能夠播放播放列表中的視頻。</p>

<figure class="bcls-figure"><img class="bcls-image--no-border" alt="iPhone sample" src="//learning-services-media.brightcove.com/doc-assets/device-sdks/ios/getting-started/quick-start-swift/svp-app.png" />
<figcaption class="bcls-caption--image">iPhone樣本</figcaption>
</figure>
</div>

<div class="player-only">
<p>該應用程序已準備好在 iPhone、iPad 或 iOS 模擬器上構建和運行。您應該能夠播放數組中定義的視頻。</p>

<figure class="bcls-figure"><img class="bcls-image--no-border" alt="iPhone sample" src="//learning-services-media.brightcove.com/doc-assets/device-sdks/ios/getting-started/quick-start-swift/perform-quick-start-video.png" />
<figcaption class="bcls-caption--image">iPhone樣本</figcaption>
</figure>
</div>
<!--class="player-only"--></section>
</article>
<!-- Learning path right navigation -->
<link rel="stylesheet" href="https://support.brightcove.com/site-assets/css/site/learning-paths.css" /><script>
    var learning_path = [ { node: '18231', title: 'Native SDK Architecture' } , { node: '18229', title: 'Register Your App' } , { node: '18232', title: 'Use Media Content' } , { node: '18230', title: 'Understand Events' } , { node: '18219', title: 'Step-by-Step: Simple Obj-C Video App' } , { node: '18220', title: 'Step-by-Step: Simple Swift Video App' } ]
  </script><script src="https://support.brightcove.com/site-assets/js/site/learning-paths.js"></script>