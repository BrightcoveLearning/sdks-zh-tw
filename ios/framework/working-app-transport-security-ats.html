---
title: '使用應用傳輸安全 (ATS)' 
description:在本主題中，您將學習如何使用 App Transport Security。
parent: Framework 
grandparent: iOS Development
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Overview">概述</h2>

<p>隨著 iOS 9 的發布，Apple 推出了一項名為<a href="https://developer.apple.com/library/prerelease/ios/technotes/App-Transport-Security-Technote/">應用傳輸安全 (ATS)</a>它在應用程序和 Web 服務之間強制執行安全連接。在不久的將來，除非您提供合理的理由說明ATS例外情況，否則應用商店中的所有應用都將需要啟用ATS，這是應用審核過程的一部分。</p>

<aside class="bcls-aside bcls-aside--warning">很快，所有 App Store 應用程序都將被要求使用 App Transport Security。您將無法再為 App Store 應用禁用 ATS。
<ul>
	<li>有關詳細信息，請參見<a href="https://techcrunch.com/2016/06/14/apple-will-require-https-connections-for-ios-apps-by-the-end-of-2016/">Apple將於2016年底要求iOS應用使用HTTPS連接</a>文檔。</li>
	<li>跟隨<a href="https://developer.apple.com/news/#article-12212016b">蘋果的新聞和更新</a>找出何時需要ATS。</li>
</ul>
</aside>

<p>ATS限制適用於以iOS 9.0及更高版本為目標的應用程序。應用商店中的現有應用不會受到影響，但是在發布新應用或更新現有應用時，您將需要應用ATS限制。</p>

<p>Brightcove 生態系統支持 ATS 限制。在大多數情況下，您應該在啟用ATS的情況下構建應用。如果您需要連接到不安全的URL，則可以將ATS異常以及理由提交蘋果的App Store審查。</p>

<p>選擇以下任一項：</p>

<ul>
	<li><a href="#Building_Apps_with_ATS_Enabled">構建啟用了ATS的應用</a></li>
	<li><a href="#Using_ATS_exceptions">使用 ATS 異常</a></li>
</ul>

<p>作為最後的選擇，您可以禁用ATS要求。請記住，此選項很快就會消失。</p>

<ul>
	<li><a href="#Disabling_ATS_requirements">禁用ATS要求</a></li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Building_Apps_with_ATS_Enabled">在啟用ATS的情況下構建應用</h2>

<p>如果您在應用程序和Web服務之間通過HTTPS使用安全連接，則可以為應用程序啟用“應用程序傳輸安全性"。</p>

<aside class="bcls-aside bcls-aside--tip">ATS 定義的安全連接包括 TLS v1.2、前向保密和 SHA-2 證書。有關完整的規格，請參閱<a href="https://developer.apple.com/library/ios/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW35">使用 ATS 連接的要求</a>文檔。</aside>

<p>要構建啟用 ATS 的應用程序，請執行以下操作：</p>

<ol class="bcls-tasklist">
	<li>啟用CDN以進行安全通信。
	<ul>
		<li>
		<p>Video Cloud 客戶（無論您使用的是內部 CDN 還是指定的 CDN）應聯繫他們的 Brightcove 客戶經理，以確保將帳戶配置為通過 HTTPS 進行交付。</p>
		</li>
		<li>
		<p>對於使用遠程資產的用戶，您可能需要適當地配置CDN。</p>
		</li>
	</ul>
	</li>
	<li>
	<p>使用安全通信來傳遞您的媒體內容。這包括視頻、廣告、標題、海報圖像、縮略圖和其他第三方 API 連接。</p>

	<ul>
		<li>
		<p>視頻雲客戶：使用 Playback API 檢索每個資產的安全協議。</p>

		<aside class="bcls-aside bcls-aside--tip">默認情況下，適用於 iOS 的 Brightcove Native SDK 使用源選擇策略來選擇 HTTPS 而非 HTTP 源，因此您可以構建啟用 ATS 的應用程序。</aside>
		</li>
		<li>
		<p>Brightcove Player客戶：確保您的媒體內容通過HTTPS傳遞。</p>
		</li>
	</ul>
	</li>
	<!-- <li><p>In your Xcode projects, update the source selection policy to use HTTPS.</p>
						<p>Here is a code example:</p>
            <pre class="line-numbers" data-start="1"><code class="language-swift" translate="No">- (void)setup
{
  BCOVPlayerSDKManager *manager = [BCOVPlayerSDKManager sharedManager];

  <span class="bcls-highlight">BCOVBasicSessionProviderOptions *options = [[BCOVBasicSessionProviderOptions alloc] init];
  options.sourceSelectionPolicy = [BCOVBasicSourceSelectionPolicy sourceSelectionHLSWithScheme:kBCOVSourceURLSchemeHTTPS];
  id&lt;BCOVPlaybackSessionProvider&gt; provider = [manager createBasicSessionProviderWithOptions:options];
  _playbackController = [manager createPlaybackControllerWithSessionProvider:provider viewStrategy:[manager defaultControlsViewStrategy]];
}</span></code></pre>

						<p>For details, see the <strong>Source Selection</strong> section of the <a href="https://github.com/brightcove/brightcove-player-sdk-ios#source-selection-hls-mp4-httphttps">Brightcove Player SDK for iOS</a> notes.</p>
            </li> -->
</ol>
</section>

<section class="bcls-section">
<h2 id="Using_ATS_exceptions">使用 ATS 異常</h2>

<p>如果需要在應用程序和Web服務之間使用非安全連接，則可以嘗試使用ATS異常。請記住，滿足ATS要求的原因是為了確保用戶在使用您的應用程序時具有良好的安全性。因此，在深入研究 ATS 異常之前，請確保您的應用無法使用安全連接。</p>

<p>您可以使用特定的密鑰繞過 ATS 要求。這些例外將觸發額外的 App Store 審核，並要求您提供合理的理由。有關詳細信息，請參見<a href="https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW59">ATS的App Store評論</a>文檔。</p>

<p>請注意，對於已經加密的內容（例如，FairPlay），您也許可以為例外情況辯護，但請記住，最佳實踐是盡可能使用HTTPS。</p>
</section>

<section class="bcls-section">
<h2 id="Disabling_ATS_requirements">禁用ATS要求</h2>

<p>在構建面向 iOS 9 SDK 或更高版本的應用程序時，您可以選擇禁用 ATS。請按照以下步驟在您的應用中禁用ATS要求：</p>

<aside class="bcls-aside bcls-aside--warning">很快，所有 App Store 應用程序都將被要求使用 App Transport Security。您將無法再為 App Store 應用禁用 ATS。
<ul>
	<li>有關詳細信息，請參見<a href="https://techcrunch.com/2016/06/14/apple-will-require-https-connections-for-ios-apps-by-the-end-of-2016/">Apple將於2016年底要求iOS應用使用HTTPS連接</a>文檔。</li>
	<li>跟隨<a href="https://developer.apple.com/news/#article-12212016b">蘋果的新聞和更新</a>找出何時需要ATS。</li>
</ul>
</aside>

<ol class="bcls-tasklist-restart">
	<li>
	<p>在Xcode中，右鍵單擊<strong>信息清單</strong>文件並將其打開為<strong>源代碼</strong>。</p>

	<figure class="bcls-figure"><img class="bcls-image--no-border" alt="Source code info.plist" src="//learning-services-media.brightcove.com/doc-assets/device-sdks/ios/guides/ats/source-code.png" />
	<figcaption class="bcls-caption--image">源代碼 info.plist</figcaption>
	</figure>
	</li>
	<li>
	<p>複製以下代碼：</p>

	<pre class="line-numbers" data-start="1">
<code class="language-swift" translate="No">&lt;key&gt;NSAppTransportSecurity&lt;/key&gt;
&lt;dict&gt;
    &lt;key&gt;NSAllowsArbitraryLoads&lt;/key&gt;
    &lt;true/&gt;
&lt;/dict&gt;</code></pre>
	</li>
	<li>
	<p>在裡面<strong>信息清單</strong>文件，在關閉之前<code translate="No">&lt;/dict&gt;</code>標籤，從上面粘貼代碼。</p>

	<figure class="bcls-figure"><img class="bcls-image--no-border" alt="Allow arbitrary loads" src="//learning-services-media.brightcove.com/doc-assets/device-sdks/ios/guides/ats/allow-loads.png" />
	<figcaption class="bcls-caption--image">允許任意負載</figcaption>
	</figure>
	</li>
	<li>
	<p>在Xcode中，當您打開<strong>信息清單</strong>歸檔為<strong>物業清單</strong>，您現在應該在plist詞典中看到該條目。</p>

	<figure class="bcls-figure"><img class="bcls-image--no-border" alt="ATS disabled" src="//learning-services-media.brightcove.com/doc-assets/device-sdks/ios/guides/ats/ats-disabled.png" />
	<figcaption class="bcls-caption--image">禁用ATS</figcaption>
	</figure>
	</li>
</ol>
<!-- <p><code data-gist-id="d27e3a0e5343da1eb6dcf6e7af2ca58b" data-gist-line="24-28" data-gist-hide-footer="true"></code></p> -->

<p>禁用ATS不會更改現有的HTTPS連接。它只是阻止iOS對您的http通信強制執行其他安全要求。</p>
<!-- <p>You may also try whitelisting certain domains to disable ATS requirements. For details, see the <a href="https://developer.apple.com/library/ios/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW33">NSAppTransportSecurity</a> document.</p> --></section>

<section class="bcls-section">
<h2 id="Additional_Resources">其他資源</h2>

<ul>
	<li>蘋果開發者論壇：<a href="https://forums.developer.apple.com/thread/48979">2017年1月需要App Transport安全性</a></li>
	<li>蘋果開發者論壇：<a href="https://forums.developer.apple.com/message/15705#15705">App Transport安全更新</a></li>
</ul>
</section>
</article>