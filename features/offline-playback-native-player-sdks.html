---
title:使用本機播放器SDK的脫機播放
description:在本主題中，您將了解如何使用 Brightcove Native Player SDK 進行離線播放。
parent: Features 
grandparent: Home
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Overview">概述</h2>

<p>借助適用於iOS和Android的Brightcove Native Player SDK的離線播放功能，發布者可以以全新的方式吸引觀眾，同時確保其內容的安全性。我們的SDK為複雜的離線播放問題提供了功能強大的簡單解決方案，包括下載管理，離線目錄管理，分析，DRM，當然還有播放。</p>

<p>使用離線播放，用戶可以將受 DRM 保護的和清晰（未加密）的視頻內容下載到他們的設備，並在未連接時觀看。</p>

<!-- <aside class="bcls-aside bcls-aside--tip">To use this feature, you need to be a Video Cloud customer using Dynamic Delivery.</aside> -->
</section>

<section class="bcls-section">
<h2 id="Requirements">要求</h2>

<p>Brightcove Native Player SDKs 支持以下版本的離線播放：</p>

<h3>Brightcove本機SDK版本</h3>
<ul>
	<li>適用於iOS 6.0.1+的本機SDK</li>
	<li>適用於Android 5.0.3+的本機SDK</li>
</ul>

<h3>設備操作系統版本</h3>
<ul>
	<li>iOS 10.0以上，但建議使用10.3以上</li>
	<li>Android 5.0以上</li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Requirements">設置</h2>

<p>要開始，請執行以下操作：</p>
<ul>
	<li>請與您的客戶經理聯繫，以使您的帳戶可以離線播放。</li>
	<li>攝取視頻時，請確保使用動態投放。</li>
  <li><a href="#Prepare_videos">準備每個視頻</a>要啟用下載功能。</li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Content_delivery">內容傳遞</h2>

<p>流媒體視頻利用了 Video Cloud 的多比特率流媒體功能，該功能可檢測源頭的帶寬並為設備提供最佳質量。離線播放功能支持以下流媒體類型：</p>

<ul>
	<li><strong>安卓</strong>：通過HTTP（DASH）的動態自適應流</li>
	<li><strong>的iOS</strong>：Apple HTTP實時流（HLS）</li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Security">安全</h2>

<p>下載內容的保護是我們離線解決方案的首要任務。Brightcove Native Player SDK 提供以下功能以確保您的內容安全地存儲在查看器上' 設備：</p>

<h3>受DRM保護的內容</h3>

<ul>
	<li>對於受DRM保護的內容，本機SDK使用以下技術：
	<ul>
		<li><strong>安卓</strong>：DASH與<a href="https://castlabs.com/company/partners/google-widevine/">Widevine模塊化</a></li>
		<li>
		<p><strong>的iOS</strong>：HLS與<a href="https://developer.apple.com/streaming/fps/">公平競爭</a></p>
		</li>
	</ul>
	</li>
	<li>
	<p>視頻內容只能在下載了內容的設備和應用程序上觀看。</p>
	</li>
	<li>
	<p>視頻內容只能在特定日期和時間到期之前觀看。</p>

	<p>Native SDK 允許用戶租借或購買視頻。到期適用於租賃，並在 DRM 許可證中設置，使用本機 SDK API 下載視頻。相反，在Fastly令牌中設置的有效期適用於流內容。</p>
	</li>
	<li>返回給客戶端的視頻 URL 將過期，以便其他人無法使用它們。</li>
</ul>

<h3>全部內容</h3>

<ul>
	<li>刪除應用程序後，所有下載的內容都會被刪除。<aside class="bcls-aside bcls-aside--information">對於 Android，只要不覆蓋默認存儲位置，這就是正確的。</aside>
	</li>
	<li>您的應用程序可以隨時刪除本地存儲的內容。</li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Download_management">下載管理</h2>

<p>Brightcove Native Player SDK 處理將內容下載到觀眾設備的複雜性，極大地簡化了本機應用程序的過程。</p>

<ul>
	<li>發布者可以選擇要下載的內容的再現質量。</li>
	<li>字幕可以在離線狀態下下載和顯示。</li>
	<li>本機SDK支持多個音軌。有關下載其他軌道的詳細信息，請參見以下內容：
	<ul>
		<li><a href="/android/playback/multiple-audio-tracks-offline-playback-native-sdk-android.html">適用於Android的本地SDK的多個音頻軌道可進行離線播放</a></li>
		<li><a href="https://github.com/brightcove/brightcove-player-sdk-ios/blob/master/OfflinePlayback.md#downloading-secondary-tracks">iOS App開發人員離線播放指南</a>。</li>
	</ul>
	</li>
</ul>

<h3>功能性</h3>

<p>可以將以下功能添加到您的應用程序以支持下載管理：</p>

<ul>
	<li><a href="#Display_content">顯示內容</a></li>
	<li><a href="#Check_download_size">檢查下載大小</a></li>
	<li><a href="#Show_download_status">顯示下載狀態</a></li>
	<li><a href="#Manage_downloads">管理下載</a></li>
	<li><a href="#Show_local_storage_space">顯示本地存儲空間</a></li>
	<li><a href="#Pause_resume_cancel_download">暫停/恢復/取消下載</a></li>
</ul>

<h3 id="Display_content">顯示內容</h3>

<p>顯示可用於流式傳輸或下載的內容列表。</p>

<p>當您設置視頻的<code translate="No">offline_enabled</code>財產到<strong>真的</strong>，本機 SDK 會將此視頻標記為可下載。</p>

<h4 id="Prepare_videos">準備視頻</h4>

<p>要將視頻標記為可下載，您需要執行以下操作：</p>

<ol class="bcls-tasklist">
	<li>如果您尚未這樣做，請與您的客戶經理聯繫，以使您的帳戶可以離線播放。</li>
	<li>
	<p>對於您要下載的每個視頻，請執行以下任一操作以將其設置為“離線啟用"：</p>

	<h4>使用影音雲工作室</h4>

	<p>使用影音雲工作室<a href="https://studio.support.brightcove.com/media/editing-video-properties-using-media-module.html#videoinfo">啟用離線播放</a> .</p>

	<figure class="bcls-figure"><img class="bcls-image--no-border" alt="Offline enabled" src="/assets/images/getting-started/offline/offline-enabled.png" />
	<figcaption class="bcls-caption--image">離線啟用</figcaption>
	</figure>

	<h4>使用內容管理系統 API</h4>

	<p>您還可以使用<a href="https://apis.support.brightcove.com/cms/getting-started/overview-cms-api.html">內容管理系統 API</a>設置<a href="https://apis.support.brightcove.com/cms/references/cms-api-video-fields-reference.html">離線啟用</a>字段的值<strong>真的</strong> .</p>

	<p>這是使用curl的示例：</p>

	<pre class="line-numbers" data-start="1">
  <code class="language-json" translate="No">curl --header "Authorization: Bearer $oauth_token" --request PATCH --data '
  {"offline_enabled" : true}
  ' https://cms.api.brightcove.com/v1/accounts/<span class="bcls-input">your account id</span>/videos/<span class="bcls-input">your video id</span></code></pre>
	</li>
</ol>

<figure class="bcls-figure"><img class="bcls-image--no-border" alt="Display content" src="/assets/images/getting-started/offline/content-list.png" />
<figcaption class="bcls-caption--image">顯示內容</figcaption>
</figure>

<p>處理清晰的內容時，請參閱<a href="#Best_practices">最佳實踐</a>部分有關如何顯示您的內容的提示。</p>

<h3 id="Check_download_size">檢查下載大小</h3>

<p>Brightcove建議在請求下載之前，請確保設備存儲中有足夠的空間用於下載。要估算視頻下載的總大小，請按以下步驟操作：</p>

<ul>
	<li>對於iOS，請查看<strong>查看下載大小</strong>的部分<a href="https://github.com/brightcove/brightcove-player-sdk-ios/blob/master/OfflinePlayback.md#check-download-size">iOS App開發人員離線播放指南</a>。</li>
	<li>
	<p>對於Android，您可以在<a href="/android/reference/javadoc/com/brightcove/player/offline/MediaDownloadable.DownloadEventListener.html#onDownloadStarted-com.brightcove.player.model.Video-long-java.util.Map-">OnDownloadStarted</a>來自的回調<code translate="No">DownloadEventListener</code>。這是如何設置事件監聽器的示例：</p>

	<pre>
  <code class="language-java" translate="No">MediaDownloadable.DownloadEventListener downloadEventListener = new MediaDownloadable.DownloadEventListener() {
  //Your implementation.
  }
  OfflineCatalog catalog = new OfflineCatalog(context, eventEmitter, accountId, policyKey);
  catalog.addDownloadEventListener(downloadEventListener);</code></pre>
	</li>
</ul>

<p>&nbsp;</p>

<h3 id="Show_local_storage_space">顯示本地存儲空間</h3>

<p>當本地存儲空間不足以完成下載當前項目和隊列中的任何項目時，通知用戶。</p>

<p>SDK 提供估計的大小和進度，以便您可以確定是否有足夠的下載空間。</p>
<!-- <figure class="bcls-figure">
      <img class="bcls-image--no-border" src="//learning-services-media.brightcove.com/doc-assets/device-sdks/guides/odrm/download-space.png" alt="Local storage space">
      <figcaption class="bcls-caption--image">Local storage space</figcaption>
      </figure> -->

<h3 id="Show_download_status">顯示下載狀態</h3>

<p>顯示當前下載及其狀態。</p>

<p>SDK 將返回總估計大小、當前下載狀態和下載進度信息的百分比。</p>
<!-- <figure class="bcls-figure"><img class="bcls-image--no-border" alt="Download status" src="//learning-services-media.brightcove.com/doc-assets/device-sdks/guides/odrm/download-progress.png" />
      <figcaption class="bcls-caption--image">Download status</figcaption>
      </figure> -->

<aside class="bcls-aside bcls-aside--tip">對於 Android 設備，下載狀態也會顯示在通知區域中。通知標題設置為視頻標題。如果下載暫停或取消，通知將被刪除。有關詳細信息，請參閱<a href="/android/resources/code-snippets-using-native-sdk-android.html#Offline_playback_with_DRM">使用適用於 Android 的本機 SDK 的代碼片段</a>文檔。</aside>

<h3 id="Manage_downloads">管理下載</h3>

<h4>下載多個視頻</h4>

<p>本機 SDK 將允許多個視頻排隊下載。例如，用戶可以下載一個季節的多個情節，而Native SDK將通過提供每個資產的下載狀態來管理該過程。</p>

<aside class="bcls-aside bcls-aside--information">如果您的應用面向 iOS 11.0 - 11.2，我們不建議並發下載，因為暫停和恢復行為對於多個同時下載是不可靠的。該問題已在 iOS 11.3 中得到解決。</aside>
<!-- <figure class="bcls-figure">
      <img class="bcls-image--no-border" src="//learning-services-media.brightcove.com/doc-assets/device-sdks/guides/odrm/download-queue.png" alt="Download queue">
      <figcaption class="bcls-caption--image">Download queue</figcaption>
      </figure> -->

  <h4>下載輔助曲目（iOS）</h4>
  <p>
    在 iOS 13 中，Apple 改變了下載的工作方式。有關詳細信息，請參見<a href="https://github.com/brightcove/brightcove-player-sdk-ios/blob/master/OfflinePlayback.md#downloading-secondary-tracks">iOS App開發人員視頻下載和離線播放指南</a>指導。
  </p>
  <p>
    由於此更改，iOS脫機下載示例應用程序似乎可以重新下載具有多個音軌的視頻。這是因為每個曲目都給出了下載進度。因此，對於每個額外的音軌，進度條將從零開始。
  </p>
  <p>
    這是以下內容的簡要概述<code translate="No">AVMediaSelectionOptions</code>，字幕和替代音軌：<a href="https://developer.apple.com/documentation/avfoundation/media_playback_and_selection/adding_subtitles_and_alternative_audio_tracks?preferredLanguage=occ">添加字幕和替代音軌</a>
  </p>
  <h5>確定總下載量</h5>
  <p>
    有沒有辦法<code translate="No">didProgressTo</code>一個視頻令牌的總下載量？
  </p>
  <p>
    否。對於視頻離線令牌，沒有匯總的下載進度值。應用程序開發人員確定將發生多少資產下載。第一個資產下載是主視頻和首選的音頻和文本軌道。它通常是最大的下載，下載進度將從0.00上升到100.00。
  </p>
  <p>
    如果下載請求包括其他媒體選擇（應用程序開發人員明確要求），則總下載時間就是主視頻和首選媒體選擇的總下載時間，以及每個其他媒體選擇的總下載時間。在 UI 中表示總進度時，為每個下載選擇一個比例值，這樣所有下載的總和將為 100%，並將每個媒體選擇的縮放下載時間相加。
  </p>

  <h5>識別對像類型</h5>
  <p>
    有什麼方法可以識別每種對象（視頻或文本軌道）的類型<code translate="No">didProgressTo</code>事件相關？
  </p>
  <p>
    是的。額外的下載是 Apple Media Selection Option 對象（<code translate="No">AVMediaSelectionOption</code> )，而不是曲目。正在下載的媒體選擇對像在進度回調中標識。（<a href="/ios/reference/sdk/Protocols/BCOVOfflineVideoManagerDelegate.html#//api/name/offlineVideoToken:aggregateDownloadTask:didProgressTo:forMediaSelection:"> BCOVOfflineVideoManagerDelegate.h</a>）
  </p>
  <p>
    Apple提供了檢查媒體選擇選項屬性的方法。有關詳細信息，請參閱Apple的<a href="https://developer.apple.com/documentation/avfoundation/avmediaselectionoption">AVMediaSelectionOption</a>。
  </p>
  <p>
    運行時，您可以在 Xcode 調試器控制台中看到元數據值<a href="https://github.com/BrightcoveOS/ios-player-samples/tree/master/Offline">離線播放器示例應用</a>（不要被兩個英文選項誤導 - 這只是一個示例應用程序）
  </p>
  <pre class="line-numbers">
<code class="language-objectivec" translate="No">OfflinePlayer[523:355259] AVMediaSelection option 0 | legible display name: English
OfflinePlayer[523:355259] AVMediaSelection option 0 | audible display name: English
OfflinePlayer[523:355259] AVMediaSelection option 1 | legible display name: English
OfflinePlayer[523:355259] AVMediaSelection option 1 | audible display name: English</code></pre>
<p>
  你可以看到這是如何完成的<a href="https://github.com/BrightcoveOS/ios-player-samples/blob/master/Offline/OfflinePlayer/objc/OfflinePlayer/ManagersUtilities/DownloadManager.m#L253-L262">下載管理器代碼</a> .
</p>


<h3 id="Pause_resume_cancel_download">暫停/恢復/取消下載</h3>

<p>允許用戶暫停，恢復或取消內容下載。</p>

<p>如果用戶暫停/繼續或下載中斷，則下載功能將從中斷處恢復。例如，如果您在下載過程中失去了Wi-Fi連接，它將在您重新連接時從中斷處恢復。</p>

<p>如果您取消視頻下載，則所有進度都將被刪除。</p>
<!-- <figure class="bcls-figure"><img class="bcls-image--no-border" alt="Pause/resume/cancel download" src="//learning-services-media.brightcove.com/doc-assets/device-sdks/guides/odrm/download-cancelled.png" />
      <figcaption class="bcls-caption--image">Pause/resume/cancel download</figcaption>
      </figure> --></section>

<section class="bcls-section">
<h2 id="Local_catalog_management">本地目錄管理</h2>

<p>Brightcove Native Player SDK 簡化了管理下載的本地內容的過程。</p>

<p>可以將以下功能添加到您的應用程序以支持本地目錄管理：</p>

<ul>
	<li><a href="#Show_downloaded_content">顯示下載的內容</a></li>
	<li><a href="#Play_local_content">播放本地內容</a></li>
	<li><a href="#Delete_local_content">刪除本地內容</a></li>
</ul>

<h3 id="Show_downloaded_content">顯示下載的內容</h3>

<p>顯示每個節目/季節的所有下載劇集。</p>

<p>SDK 返回所有下載內容的元數據和播放詳細信息。此元數據包括視頻標題、描述、縮略圖、可用字幕、可用音軌等。</p>

<p>有特定於離線播放的新元數據屬性，其中包括：</p>

<h4>受DRM保護的內容</h4>

<ul>
	<li>令牌標識符</li>
	<li>許可證到期日期</li>
</ul>

<h4>全部內容</h4>

<ul>
	<li>下載開始時間和結束時間</li>
	<li>下載的縮略圖名稱及其文件URL</li>
	<li>下載的海報名稱及其文件URL</li>
	<li>視頻包的相對和派生文件URL</li>
</ul>

<p>然後，您可以過濾特定實現的結果。</p>

<aside class="bcls-aside bcls-aside--tip">您將能夠看到租賃許可證的剩餘時間。</aside>

<h3 id="Delete_local_content">刪除本地內容</h3>

<p>允許用戶從本地存儲中刪除內容。</p>

<p>SDK 公開了一種刪除視頻及其元數據和相關資產的方法。</p>
</section>

<section class="bcls-section">
<h2 id="Content_playback">內容播放</h2>

<p>Native SDK 允許您在以下情況下播放內容：</p>

<ul>
	<li>下載時播放視頻。</li>
	<li>下載後播放視頻。設備離線或在線時，可以在本地播放下載的內容。離線視頻只能從本地存儲播放。</li>
	<li>如果您選擇流式傳輸視頻的在線版本，則應從“播放服務"中檢索一個新的視頻對象。</li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Analytics">分析</h2>

<p>引入了用於測量與離線流相關的數據的分析。有關詳細信息，請參見<a href="/android/analytics/analytics-related-offline-playback-native-sdks.html">與本機SDK的離線播放相關的分析</a>文檔。</p>
</section>

<section class="bcls-section">
<h2 id="Samples">樣品</h2>

<p>下表包含指向代碼示例的鏈接，向您展示如何開始離線播放：</p>

<table class="bcls-table">
	<thead class="bcls-table__head">
		<tr>
			<th style="width:25%">示例應用程序</th>
			<th style="width:75%">描述</th>
		</tr>
	</thead>
	<tbody class="bcls-table__body">
		<tr>
			<td><a href="https://github.com/BrightcoveOS/ios-player-samples/tree/master/Offline">iOS離線播放</a></td>
			<td>下載並播放HLS視頻，包括受FairPlay加密保護的視頻。有關開發人員的詳細信息，請參見<a href="https://github.com/brightcove/brightcove-player-sdk-ios/blob/master/OfflinePlayback.md">iOS App開發人員離線播放指南</a>。</td>
		</tr>
		<tr>
			<td><a href="https://github.com/BrightcoveOS/android-player-samples/tree/master/brightcove-exoplayer/OfflinePlaybackSampleApp">Android離線播放</a></td>
			<td>下載並播放DASH視頻，包括受Widevine加密保護的視頻。</td>
		</tr>
	</tbody>
</table>
</section>

<section class="bcls-section">
<h2 id="FAQ">常問問題</h2>

<p>您將在下面找到一些一般性問題的答案。</p>

<h3>受DRM保護的內容</h3>
<details style="padding:0;">
    <summary style="font-size:1.25em;">用戶可以更改系統時鐘以繞過到期日期嗎？</summary>
    <p ><strong>安卓</strong>：絕對有效期限確定許可證有效的日期和時間。這是由 Widevine 和 Android DRM 層強制執行的。理論上，Android 中的 DRM 層必須防止用戶繞過過期時間。我們可能發現的任何問題都在 Android 操作系統發行說明中進行了描述。<br />
    <br />
    <strong>的iOS</strong>：許可證到期由FairPlay強制執行。 iOS處理所有時鐘更改等檢查。應用程序可以選擇檢查許可證的到期時間，以警告用戶許可證已過期。這可能比簡單地播放過期視頻然後接收播放錯誤更可取。</p>
<!-- <p class="bcls-answer">Absolute expiration determines the date and time until which a license is valid. This is enforced by Widevine and the Android DRM layer. Theoretically, the DRM layer in Android must prevent the user from bypassing the expiration period. Any issues that we may have found is described in the <a href="/android/reference/release-notes.txt">Native SDK for Android release notes</a>.</p> -->
</details>
<br/>

<details style="padding:0;">
    <summary style="font-size:1.25em;">當應用程序在後台時，許可證和離線視頻是否會繼續加載？</summary>
    <p><strong>安卓</strong>：是的。通常，許可證會立即下載，但即使是在應用程序處於後台時也可以下載許可證。<br />
    <br />
    <strong>的iOS</strong>：許可證加載應在前台進行。我們有一個<a href="https://github.com/brightcove/brightcove-player-sdk-ios/blob/master/ios/dynamic/BrightcovePlayerSDK.framework/Headers/BCOVOfflineVideoManager.h#L631">預加載許可證的方法</a> .當應用程序在後台運行時，可以下載主要視頻內容。</p>
<!-- <p class="bcls-answer">License loading should happen in the foreground. We have a method to preload the license.
      Downloading of the main video content can happen while the app is in the background.</p> -->
</details>

<h3>全部內容</h3>
<details style="padding:0;">
    <summary style="font-size:1.25em;">下載離線內容使用的視頻格式是什麼？</summary>
    <p><strong>安卓</strong>：受 DRM 保護的 DASH 或未加密的 DASH。<br />
    <br />
    <strong>的iOS</strong>：HLS蒸。您可以為下載指定比特率以使用特定變體。</p>
</details>
<br/>

<details style="padding:0;">
    <summary style="font-size:1.25em;">當用戶在線時，下載的視頻會在本地播放還是流式播放？</summary>
    <p>下載的視頻可以在線或離線播放，但始終會使用下載的視頻。如果您選擇播放視頻的在線版本，則應從“播放服務"中檢索一個新的視頻對象。離線視頻只能從本地存儲播放。</p>
</details>
<br/>



<p class="bcls-question"></p>


</section>

<section class="bcls-section">
<h2 id="Best_practices">最佳實務</h2>

<p>在開髮用於離線播放的應用程序時，以下指南應該會有所幫助。</p>

<h3>顯示暫停/取消按鈕</h3>

<p>視頻下載開始後，應顯示暫停和取消按鈕。</p>

<p><strong>安卓：</strong>作為調用的一部分，您應該顯示暫停和取消按鈕<code translate="No">onDownloadStarted</code>在回調<code translate="No">DownloadEventListener</code> .有關詳細信息，請參見<a href="https://github.com/BrightcoveOS/android-player-samples/tree/master/brightcove-exoplayer/OfflinePlaybackSampleApp">離線播放示例應用</a>。</p>

<p><strong>iOS：</strong>有關如何為離線播放創建應用的詳細信息，請參見<a href="https://github.com/brightcove/brightcove-player-sdk-ios/blob/master/OfflinePlayback.md">iOS App開發人員指南</a>。</p>

<h3>顯示清晰的內容</h3>

<p>如果您的帳戶未啟用DRM，或者您使用的是清晰內容，則Brightcove Native SDK將不會執行服務器端許可證請求。因此，明確內容不被視為可供出租或購買。在大多數情況下，為獲得清晰的內容，建議您隱藏<strong>租</strong>和<strong>買</strong>按鈕並顯示一個<strong>下載</strong>按鈕代替。</p>
</section>

<section class="bcls-section">
<h2 id="Enabling_the_feature">啟用功能</h2>

<p>請與您的客戶經理聯繫，以了解定價並為您的帳戶啟用離線播放功能。</p>
</section>

<section class="bcls-section">
<h2 id="Troubleshooting">故障排除</h2>

<p>以下提示可幫助您調查下載視頻時出現的問題。</p>

<p>當用戶由於網絡慢而試圖以比設備可以處理的比特率更高的比特率下載資產時，可能會發生錯誤。</p>

<p>為避免這種情況，您可以添加代碼來檢查設備功能並防止連接速度較慢的設備嘗試下載高比特率資產。您可以在限制連接的同時使用真實設備進行測試，並使用<a href="https://www.charlesproxy.com/">查爾斯代理</a>工具。</p>

<h3>安卓</h3>

<p>有關處理錯誤的詳細信息，請參見<a href="/android/troubleshooting/error-messages-native-sdk-android.html">來自Android的Native SDK的錯誤消息</a>文檔。這包括與離線播放相關的錯誤消息。</p>

<h3>的iOS</h3>

<p>有關處理錯誤的詳細信息，請參見<a href="/ios/troubleshooting/error-handling-native-sdk-ios.html">適用於iOS的Native SDK的錯誤處理</a>文檔。</p>

<p>當離線播放代碼收到錯誤時，我們捕獲它並拋出一個 NSError。要獲得潛在的錯誤，您可以嘗試以下操作：</p>

<pre class="line-numbers">
  <code class="language-objectivec" translate="No">NSError *underlyingError = initialError.userInfo[NSUnderlyingErrorKey];</code></pre>

<p>有關更多信息，請參見<a href="https://github.com/brightcove/brightcove-player-sdk-ios/blob/master/OfflinePlayback.md">iOS App開發人員離線播放指南</a>。</p>
</section>

<section class="bcls-section">
<h2 id="Known_issues">已知的問題</h2>

<p>有關影響本機SDK的離線播放的Android和iOS操作系統的已知問題的列表，請參見<a href="/developer-support/questions/known-issues-brightcove-native-player-sdks.html">已知的問題</a>支持文件。</p>
</section>

<section class="bcls-section">
  <h2 id="Notes_and_limitations">注意事項和限制</h2>
  
  <p>以下說明適用於 Native SDK 支持的離線播放功能：</p>
  
  <h3>廣告</h3>
  <p>離線播放不支持客戶端廣告或服務器端廣告。</p>
  
  <h3>HLSe</h3>
  <p>使用適用於 Android、iOS 或 tvOS 的 Brightcove Native SDK 離線播放不支持 HLSe 內容。</p>
  
  <h3>低功耗模式</h3>
  <p>設備上的低功耗模式可能會影響某些功能，包括下載。有關更多信息，請參見以下內容：</p>
  <ul>
    <li><a href="https://developer.android.com/about/versions/pie/power">電源管理Android 9（API級別28）</a></li>
    <li><a href="https://support.apple.com/en-us/HT205234">iPhone上的低功耗模式</a></li>
    <li><a href="https://developer.apple.com/library/archive/documentation/Performance/Conceptual/EnergyGuide-iOS/LowPowerMode.html">對iPhone上的低功耗模式做出反應</a></li>
  </ul>
  
  <h3>共享視頻</h3>
  <p>只有原始視頻可以下載，共享視頻才能離線觀看。該屬性是從原始視頻繼承的，不能僅對共享視頻進行更改。</p>
  
  <h3>純音頻</h3>
  <p>本機 SDK 支持離線播放的純音頻內容。您可以控制觀看者看到的內容，無論是海報圖像還是自定義屏幕。</p>
  <p>
    適用於 Android 的本機 SDK 需要一個<code translate="No">VideoView</code>，適用於 iOS 的 Native SDK 需要一個<code translate="No">UIView</code> .因此，不支持背景音頻。這意味著當用戶將應用程序發送到後台時，音頻將不會繼續播放。
  </p>
  
  <h3>安卓：應用刪除</h3>
  <p>刪除應用程序後，所有下載的內容都會被刪除。只要不覆蓋默認存儲位置，這就是正確的。</p>
  
  <h3>iOS：AirPlay</h3>
  <p>作為一項安全功能，您不能將脫機HLS視頻流式傳輸到AirPlay設備進行播放。這是蘋果公司確認的<code translate="No">AVFoundation</code>局限性。</p>
  </section>
</article>