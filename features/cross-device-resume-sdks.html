---
title: '使用本機 SDK 進行跨設備恢復' 
description:在本主題中，您將學習如何將跨設備恢復與 Brightcove Native SDK 結合使用。
parent: Features 
grandparent: Home
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Overview">概述</h2>

<p>跨設備恢復允許觀看者在一個設備上開始觀看視頻，並在以後的時間從其他設備上繼續觀看的視頻繼續觀看。</p>
<p>
  如果您不熟悉此功能，請參閱<a href="https://apis.support.brightcove.com/xdr/getting-started/xdr-overview.html">概述：跨設備簡歷</a>文檔。
</p>
</section>

<section class="bcls-section">
<h2 id="Requirements">要求</h2>

<p>使用 Brightcove Native SDK 進行跨設備恢復需要滿足以下要求：</p>

<h3>Brightcove本機SDK版本</h3>
<ul>
  <li>
    適用於Android 6.13.1+的本機SDK
  </li>
  <li>
    適用於iOS 6.0.1+，適用於Pulse 6.7.5+，適用於SSAI 6.7.7+的本機SDK
  </li>
</ul>

<h3>設備操作系統版本</h3>
<ul>
  <li>
    Android 6.0以上
  </li>
  <li>
    iOS 11.0以上
  </li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Setup">設置</h2>

  <p>任何擁有 Brightcove Video Cloud 帳戶的人都可以使用此功能。</p>
  <p>
    要開始，請執行以下操作
  </p>
  <ul>
    <li>
      與您的客戶經理聯繫以啟用您的帳戶跨設備恢復
    </li>
    <li>
      確保攝取您正在使用的視頻以進行動態投放
    </li>
  </ul>
</section>

<section class="bcls-section">
<h2 id="Implementing_Cross_Device_Resume">實施跨設備簡歷</h2>

  <p>要實現跨設備恢復，請按照下列步驟操作：</p>
 <ol class="bcls-tasklist">
    <li>
      <p>
        為 Brightcove 分析設置用戶標識符
      </p>
      <p>
        即使查看器數據已自動發送到Brightcove Analytics，您仍需要設置用戶標識符。
      </p>
      <p>
        您可以使用身份驗證網關或某些身份管理解決方案來跟踪查看者。使用此查看者 ID 作為用戶標識符傳遞給 Brightcove 分析。
      </p>
    </li>
    <li>
      <p>
        從跨設備簡歷（XDR）API獲取查看器的播放位置
      </p>
    </li>
    <li>
      恢復播放
    </li>
  </ol>
</section>

<section class="bcls-section">
<h2 id="Android_Implementation">Android實施</h2>

<p>對於適用於Android的Native SDK，請按照以下步驟操作：</p>
<ol class="bcls-tasklist-restart">
  <li>
    <p>
      設置 Brightcove 分析的用戶標識符。
    </p>
    <pre><code class="language-java" translate="No">HashMap&lt;String, String&gt; baseParams = new HashMap&lt;&gt;();
baseParams.put(Analytics.Fields.USER, &quot;<span class="bcls-input">viewer id</span>&quot;);
baseParams.put(Analytics.Fields.APPLICATION_ID, &quot;<span class="bcls-input">application id</span>&quot;);

HashMap&lt;String, Object&gt; eventParams = new HashMap&lt;&gt;();
eventParams.put(Analytics.Fields.BASE_PARAMS, baseParams);
eventEmitter.emit(EventType.ADD_ANALYTICS_BASE_PARAMS, eventParams);
</code></pre>
  </li>
  <li>
    <p>
        從跨設備恢復（XDR）API獲取查看器的播放位置。 
    </p>
    <p>
       有關詳細信息，請參見以下內容：
    </p>
    <ul>
      <li>
        <a href="https://apis.support.brightcove.com/xdr/getting-started/get-playback-position.html">從跨設備簡歷（XDR）API獲取播放位置</a>
      </li>
      <li>
        <a href="https://apis.support.brightcove.com/xdr/references/reference.html">跨設備簡歷（XDR）API參考</a>
      </li>
    </ul>
  </li>
  <li>
    <p>
      恢復播放。
    </p>
    <p>
      從XDR API獲得查看器的播放位置後，您可以從該點繼續播放。使用<code translate="No">brightcoveVideoView.seekTo()</code>方法。
    </p>
    <pre><code class="language-java" translate="No">final VideoPlaybackController playbackController = brightcoveVideoView.getPlaybackController();
eventEmitter.on(EventType.VIDEO_DURATION_CHANGED, new EventListener() {
  @Override
  public void processEvent(final Event event) {
    playbackController.setAdsDisabled(true);
    brightcoveVideoView.seekTo(&lt;<span class="bcls-input">viewer playhead position</span>&gt;);
  }
});

eventEmitter.on(EventType.DID_SEEK_TO, new EventListener() {
  @Override
  public void processEvent(final Event event) {
    playbackController.setAdsDisabled(false);
  }
});
</code></pre>
  </li>
</ol>
</section>

<section class="bcls-section">
<h2 id="iOS_Implementation">iOS實施</h2>
<p>對於適用於iOS的Native SDK，請按照以下步驟操作：</p>
<ol class="bcls-tasklist-restart">
  <li>
    <p>
      設置 Brightcove 分析的用戶標識符。
    </p>
    <pre><code class="language-objectivec" translate="No">@try
  {
    [BCOVGlobalConfiguration.sharedConfig setValue:@{
      @&quot;privateUser&quot;: self.<span class="bcls-input">viewer id</span>,
      @&quot;privateApplication&quot;: @&quot;<span class="bcls-input">application id</span>&quot;
    }
    forKey:@&quot;privateSessionAnalytics&quot;];
  }
  @catch (NSException *e)
  {
    NSLog(@&quot;%@&quot;, e.description);
  }
</code></pre>
  </li>
  <li>
    <p>
        從跨設備恢復（XDR）API獲取查看器的播放位置。 
    </p>
    <p>
      有關詳細信息，請參見以下內容：
    </p>
    <ul>
      <li>
        <a href="https://apis.support.brightcove.com/xdr/getting-started/get-playback-position.html">從跨設備簡歷（XDR）API獲取播放位置</a>
      </li>
      <li>
        <a href="https://apis.support.brightcove.com/xdr/references/reference.html">跨設備簡歷（XDR）API參考</a>
      </li>
    </ul>
  </li>
  <li>
    <p>
      恢復播放。
    </p>
    <p>
      從XDR API獲得查看器的播放位置後，您可以從該點繼續播放。使用以下方法設置播放頭位置：
    </p>
    <pre><code class="language-objectivec" translate="No">-[BCOVPlaybackController seekWithoutAds:(CMTime)seekToTime completionHandler:(void (^)(BOOL finished))completion]
</code></pre>
    <p>
      這允許您在特定時間恢復播放，而不會強迫觀眾觀看之前安排的廣告<code translate="No">seekToTime</code> .
    </p>
    <p>
      在準備<code translate="No">seekWithoutAds:completionHandler:</code>，禁用<code translate="No">autoPlay</code>設置時<code translate="No">BCOVPlaybackController</code>。
    </p>
    <p>
      蘋果建議您等待手機的狀態<code translate="No">AVPlayerItem</code>在使用<code translate="No">AVPlayerItem</code>。因此，調用<code translate="No">seekWithoutAds:completionHandler:</code>在裡面<code translate="No">kBCOVPlaybackSessionLifecycleEventReady</code>的處理者<code translate="No">playbackController:playbackSession:didReceiveLifecycleEvent</code>你的方法<code translate="No">BCOVPlaybackControllerDelegate</code> .
    </p>
    <p>
      有關不帶廣告的搜索的詳細信息，請參閱以下內容：
    </p>
    <ul>
      <li>
        <a href="https://github.com/brightcove/brightcove-player-sdk-ios-ima#seek-without-ads">我是一個</a>
      </li>
      <li>
        <a href="https://github.com/brightcove/brightcove-player-sdk-ios-fw#seek-without-ads">飛輪</a>
      </li>
      <li>
        Pulse實現無廣告的搜索，方法與IMA或FreeWheel相同
      </li>
      <li>
        SSAI<a href="https://github.com/brightcove/brightcove-player-sdk-ios-ssai#seek-without-ads"></a>
      </li>
    </ul>
  </li>
</ol>


</section>

<!-- <section class="bcls-section">
<h2 id="Notes">Notes</h2>

<p>The following notes apply to this feature:</p>
<ul>
  <li>
    
  </li>
</ul>
</section> -->

</article>