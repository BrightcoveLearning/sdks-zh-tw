<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

	<title>BCOVSidecar字幕參考</title>

	<link rel="stylesheet" href="css/style.css">
	<meta name="viewport" content="initial-scale=1, maximum-scale=1.4">
	<meta name="generator" content="appledoc 2.2.1 (build 1334)">
</head>
<body class="appledoc">
	<header>
		<div class="container" class="hide-in-xcode">
			
			<h1 id="library-title"><a href="index.html">BCOVSidecar字幕</a></h1>

			<p id="developer-home">
				<a href="index.html">亮灣</a>
			</p>
			
		</div>
	</header>

	<aside>
		<div class="container">
			<nav>
				<ul id="header-buttons" role="toolbar">
					<li><a href="hierarchy.html">等級制度</a></li>
				</ul>
			</nav>
		</div>
	</aside>

	<article>
		<div id="overview-contents" class="container">
			<div id="content">
				<main role="main">
					<h1 class="title">BCOVSidecar字幕參考</h1>

					
					<div class="section section-overview index-overview">
						
						
						<h1>適用於 iOS 和 tvOS 的 Brightcove Player SDK 的 Sidecar 字幕插件，版本 2.1.6.129</h1><h1>支持的平台</h1>

<p>iOS 8.0 及以上。</p>

<p>tvOS 9.0 及以上。</p>

<h1>安裝</h1>

<p>Brightcove Player SDK 的 Sidecar Subtitles 插件為 iOS 提供了兩個安裝包；一個靜態庫框架和一個動態框架。對於 tvOS，Sidecar Subtitles 插件僅提供動態框架。</p>

<h2>可可豆</h2>

<p>您可以使用<a href="http://cocoapods.org">可可豆</a>將適用於 Brightcove Player SDK 的 Sidecar Subtitles Plugin 添加到您的項目中。你可以找到最新的<code>Brightcove-Player-SDK-SidecarSubtitles</code> podspec <a href="https://github.com/CocoaPods/Specs/tree/master/Specs/9/5/e/Brightcove-Player-SDK-SidecarSubtitles">這裡</a> .</p>

<p>指定默認 pod <code> Brightcove-Player-SDK-SidecarSubtitles</code>將安裝靜態庫框架。要安裝動態框架，請使用以下命令聲明 pod <code>動態的</code>子規格：<code>Brightcove-Player-SDK-Sidecar字幕/動態</code></p>

<p>靜態框架示例：</p>

<pre><code>pod 'Brightcove-Player-SDK-SidecarSubtitles' </code></pre>

<p>動態框架示例：</p>

<pre><code>pod 'Brightcove-Player-SDK-SidecarSubtitles/dynamic' </code></pre>

<p>必須維護最新的主 podspec 存儲庫，以確保您始終使用最新版本的 Brightcove 軟件。從 CocoaPods 1.0.0 開始，podspec repo 更新不再是自動功能，因此要更新您的主 repo，請在命令行上運行以下命令：</p>

<pre><code>pod 回購更新</code></pre>

<h2>手動的</h2>

<p>將適用於 Brightcove Player SDK 的 Sidecar 字幕插件手動添加到您的項目中：</p>

<ol>
<li>安裝最新版本的<a href="https://github.com/brightcove/brightcove-player-sdk-ios">Brightcove 播放器 SDK</a> .</li>
<li>從我們的網站下載 BrightcoveSidecarSubtitles 插件的最新壓縮版本<a href="https://github.com/brightcove/brightcove-player-sdk-ios-sidecarsubtitles/releases">發布頁面</a> .</li>
<li>添加<code>BrightcoveSidecarSubtitles.framework</code>到您的項目。</li>
<li>在&ldquo;構建設置&rdquo;應用程序目標的選項卡，確保&ldquo;框架搜索路徑&rdquo;包括框架的路徑。這應該自動完成，除非框架存儲在與您的項目不同的根目錄下。</li>
<li>（僅限動態框架）在&ldquo;一般的&rdquo;應用程序目標的選項卡，添加&lsquo; BrightcoveSidecarSubtitles.framework &rsquo;到&ldquo;嵌入式二進製文件&rdquo;部分。</li>
<li>（僅限動態框架）在&ldquo;構建階段&rdquo;選項卡，添加一個&ldquo;運行腳本&rdquo;階段與命令<code>猛擊 $ {BUILT_PRODUCTS_DIR} /$ {FRAMEWORKS_FOLDER_PATH} /BrightcoveSidecarSubtitles.framework/strip-frameworks.sh</code> .查看&ldquo;僅在安裝時運行腳本&rdquo; .這將從構建中刪除不需要的架構，這對於 App Store 提交很重要。</li>
<li>（僅限靜態框架）在&ldquo;構建設置&rdquo;應用程序目標的選項卡，添加<code>-ObjC</code>到&ldquo;其他鏈接器標誌&rdquo;構建設置。</li>
</ol>


<h2>進口</h2>

<p>適用於 iOS 的 Brightcove Player SDK 可以通過幾種不同的方式導入代碼：</p>

<ul>
<li>@import BrightcoveSidecarSubtitles;<code></code></li>
<li>#import &lt;BrightcoveSidecarSubtitles/BrightcoveSidecarSubtitles.h&gt;<code></code></li>
<li><code>#import &lt;BrightcoveSidecarSubtitles/[特定類].h&gt;</code> .</li>
</ul>


<h1>快速開始</h1>

<pre><code>NSString *policyKey = &lt;your-policy-key&gt;; NSString *accountId = &lt;your-account-id&gt;; NSString *videoID = &lt;your-video-id&gt;; BCOVPlayerSDKManager *manager = [BCOVPlayerSDKManager sharedManager]; [1] id&lt;BCOVPlaybackController&gt; controller = [playbackManager createSidecarSubtitlesPlaybackControllerWithViewStrategy:nil]; [self.view addSubview:controller.view]; BCOVPlaybackService *playbackService = [[BCOVPlaybackService alloc] initWithAccountId:accoundId policyKey:policyKey]; [2] [playbackService findVideoWithVideoID:videoID parameters:nil completion:^(BCOVVideo *video, NSDictionary *jsonResponse, NSError *error) { [controller setVideos:@[ video ]]; [controller play]; } ];</code></pre>

<p>BCOVSidecarSubtitles 向 BCOVPlaybackManager 添加了一些分類方法。其中第一個是<code>-createSidecarSubtitlesPlaybackControllerWithViewStrategy：</code> .使用此方法創建您的播放控制器。或者（如果您使用多個會話提供程序），您可以創建一個 BCOVSSSessionProvider 並將其傳遞給使用上游會話提供程序創建播放控制器的管理器方法。*如果您正在為 tvOS 開發，則傳遞給 createSidecarSubtitlesPlaybackControllerWithViewStrategy 的 ViewStrategy 必須是零。</p>

<p>* 注意<code>BCOVSSSessionProvider</code>在構造播放控制器時，鏈中的任何會話提供程序都應該在傳遞給管理器之前出現。這個插件是<strong>不兼容</strong>使用 Widevine 插件。</p>

<p>如果您有疑問或需要幫助，請訪問 Brightcove Native Player SDK 的支持論壇，網址為<a href="https://groups.google.com/forum/">https://groups.google.com/forum/</a> #!forum/brightcove-native-player-sdks 。</p>

<h2>使用內置 PlayerUI 控件</h2>

<p>上面的代碼片段展示了一個沒有任何控件的視頻播放器。您可以像這樣將播放控件添加到您的代碼中。</p>

<p>添加一個屬性來跟踪<code>BCOVPUIPlayerView</code>：</p>

<pre><code>// PlayerUI 的播放器視圖 @property (nonatomic) BCOVPUIPlayerView *playerView;</code></pre>

<p>創建<code>BCOVPUIBasicControlView</code>，然後<code>BCOVPUIPlayerView</code> .這是我們將播放控制器（以及它播放的所有視頻）與控件關聯的地方。設置播放器視圖以匹配佈局中的視頻容器 ( <code>你的視頻視圖</code> ) 調整大小時。</p>

<pre><code>BCOVPUIBasicControlView *controlView = [BCOVPUIBasicControlView basicControlViewWithVODLayout]; self.playerView = [[BCOVPUIPlayerView alloc] initWithPlaybackController:controller options:nil controlsView:controlView]; // 匹配父視圖大小 self.playerView.frame = self.yourVideoView.bounds; self.playerView.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth; // 將 BCOPUIPlayerView 添加到您的視頻視圖中。 [self.yourVideoView addSubview:self.playerView];</code></pre>

<p>如果使用BCOVPUIPlayerView，還需要去掉上面的一行：</p>

<pre><code>[self.view addSubview:controller.view]; // 使用 PlayerUI 時不再需要</code></pre>

<p>如果您想將播放器與另一個播放控制器一起使用，您可以簡單地進行新分配：</p>

<pre><code>self.playerView.playbackController = anotherPlaybackController;</code></pre>

<p>播放器視圖會自動添加播放控制器&rsquo; s 視圖到它自己的視圖層次結構。</p>

<p>請參閱 Brightcove Native Player SDK &rsquo; s README 以獲取有關在您的應用程序中添加和自定義 PlayerUI 控件的更多信息。</p>

<p>如果您有疑問或需要幫助，請訪問<a href="https://groups.google.com/forum/#!forum/brightcove-native-player-sdks">Brightcove Native Player SDK 支持論壇</a> .</p>

<h1>手動填充字幕數據</h1>

<p>BCOVSidecarSubtitle 插件將在<code>BCOV視頻</code>對象屬性，鍵控<code>kBCOVSSVideoPropertiesKeyTextTracks</code> .如果您正在使用<code>BCOVPlaybackService</code>要檢索視頻並且這些視頻具有與之關聯的文本軌道，這將自動填充。</p>

<p>如果您提供自己的視頻或 Perform 客戶，則需要按如下所示構建數據：</p>

<pre><code>NSArray *subtitles = @[ @ { kBCOVSSTextTracksKeySource: ..., // required kBCOVSSTextTracksKeySourceLanguage: ..., // required kBCOVSSTextTracksKeyLabel: ..., // required kBCOVSSTextTracksKeyDuration: ..., // required/optional [1] kBCOVSSTextTracksKeyKind: kBCOVSSTextTracksKindSubtitles or kBCOVSSTextTracksKindCaptions, // required kBCOVSSTextTracksKeyDefault: ..., // optional kBCOVSSTextTracksKeyMIMEType: ..., // optional } , @ {...} , // 第二個文本軌道字典@ {...} , // 第三個文本軌道字典 ]; BCOVVideo *video = [BCOVVideo alloc] initWithSource:&lt;source&gt; cuePoints:&lt;cuepoints&gt; properties:@ { kBCOVSSVideoPropertiesKeyTextTracks:subtitles } ];</code></pre>

<p>這<code>kBCOVSSTextTracksKeySource</code>鍵保存字幕軌道的源 URL，可以作為 WebVTT URL 或 M3U8 播放列表 URL 提供。</p>

<p>WebVTT 文件應該有&ldquo; .vtt &rdquo;擴展名，並且 M3U8 文件應該有一個&ldquo; .M3U8 &rdquo;延期。如果您不能遵循這些約定，則必須包含一個<code>kBCOVSSTextTracksKeySourceType</code>鍵，並指定<code>kBCOVSSTextTracksKeySourceTypeWebVTTURL</code>或者<code>kBCOVSSTextTracksKeySourceTypeM3U8URL</code>指示 URL 引用的文件類型。</p>

<p>如果您要為從 Video Cloud 檢索的視頻提供曲目，您應該<strong>添加</strong>您將字幕添加到任何現有曲目，而不是<strong>覆蓋</strong>他們。此代碼顯示瞭如何向現有視頻添加曲目：</p>

<pre><code>BCOVVideo *updatedVideo = [視頻更新：^(id&lt;BCOVMutableVideo&gt; mutableVideo) { // Save the current tracks NSArray *originalTracks = video.properties[kBCOVSSVideoPropertiesKeyTextTracks]; // Create your text track dictionary NSArray *subtitles = @[ @{ kBCOVSSTextTracksKeySource: ..., // required kBCOVSSTextTracksKeySourceLanguage: ..., // required kBCOVSSTextTracksKeyLabel: ..., // required kBCOVSSTextTracksKeyDuration: ..., // required/optional [1] kBCOVSSTextTracksKeyKind: kBCOVSSTextTracksKindSubtitles or kBCOVSSTextTracksKindCaptions, // required kBCOVSSTextTracksKeyDefault: ..., // optional kBCOVSSTextTracksKeyMIMEType: ..., // optional } , @ {...} , // 第二個文本軌道字典@ {...} , // 第三個文本軌道字典 ]; // 將新曲目附加到原始曲目，如果有的話 NSArray *combinedTextTracks = ((originalTracks != nil) ? [originalTracks arrayByAddingObjectsFromArray:subtitles] : captions); // 更新當前字典（我們不想丟失已經存在的屬性） NSMutableDictionary *updatedDictionary = [mutableVideo.properties mutableCopy]; // 將文本軌道存儲在文本軌道屬性中 updatedDictionary[kBCOVSSVideoPropertiesKeyTextTracks] = combineTextTracks; mutableVideo.properties = updatedDictionary; }];</code></pre>

<h1>筆記</h1>

<ul>
<li><code>kBCOVSSTextTracksKeyDuration</code>如果您使用帶有 .vtt 擴展名的字幕文件，則是必需的鍵。<code> kBCOVSSTextTracksKeyDuration</code>如果您使用帶有 .m3u8 擴展名的字幕文件，則是一個可選鍵。</li>
</ul>


<p>請參閱 BCOVSSComponent.h 頭文件中的代碼文檔，了解有關使用這些密鑰的更多信息。</p>

<h1>已知的問題</h1>

<ul>
<li><p>觀看 360 度視頻時不會顯示字幕。</p></li>
<li><p>此插件目前不支持與適用於 iOS 的 Brightcove Brightcove Player SDK 的 Widevine 插件集成。</p></li>
<li><p>從 Brightcove Playback API 檢索視頻時，您的再現必須包含主 M3U8 播放列表。Sidecar Subtitle 插件不適用於單一的 M3U8 播放列表。</p></li>
<li><p>如果您向插件提供字幕播放列表，並且該字幕播放列表包含指向響應為 404 的 web vtt 文件的鏈接，則播放將失敗。這是蘋果的一個bug &rsquo; s AVPlayer。</p></li>
</ul>

						
						
					</div>
					

					<div class="index-container">
						

						

						
						<div class="index-column">
							

							

							
							<h2 class="index-title">類別參考</h2>
							<ul>
								
								<li>BCOVPlayerSDKManager(BCOVSSAdditions)<a href="Categories/BCOVPlayerSDKManager+BCOVSSAdditions.html"></a></li>
								
								<li>BCOVPlayerSDKManager(BCOVSSAdditionsDepricated)<a href="Categories/BCOVPlayerSDKManager+BCOVSSAdditionsDepricated.html"></a></li>
								
							</ul>
							
						</div>
						
					</div>

					<footer>
						<div class="footer-copyright">
							
							<p class="copyright">版權&copy; 2017 年光明灣。版權所有。更新：2017-01-30</p>
							
							
							<p class="generator">生成者<a href="http://appledoc.gentlebytes.com">蘋果文檔 2.2.1（內部版本 1334）</a> .</p>
							
						</div>
					</footer>
				</main>
			</div>
		</div>
	</article>

	<script src="js/script.js"></script>
<script src="https://learning-services-media.brightcove.com/doc-assets/js/https-fix.js"></script>
<script src="https://learning-services-media.brightcove.com/doc-assets/js/support-feedback.js"></script><script src="https://support.brightcove.com/site-assets/js/site/feedback-docs.js"></script>
</body>
</html>