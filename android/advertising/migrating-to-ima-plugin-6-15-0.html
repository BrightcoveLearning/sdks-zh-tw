---
title:遷移到Brightcove的IMA插件6.15.0
description:在本主題中，您將了解如何遷移您的應用程序以使用適用於 Android 6.15.0 的 Native SDK 的 Brightcove 的 IMA 插件。
parent: Advertising 
grandparent: Android Development
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>


<section class="bcls-section">
<h2 id="Overview">概述</h2>
<p>適用於 Android 6.15.0 或更高版本的 Brightcove Native SDK 支持 Google IMA SDK 版本 3.19.4。如果您使用的是IMA廣告，則需要注意一些使用此版本的IMA插件的注意事項。它們包括以下內容：</p>
<ul>
  <li>
    <a href="#Changes_in_the_Google_IMA_SDK">Google IMA SDK中的更改</a>
  </li>
  <li>
     <a href="#Changes_in_the_Brightcove_IMA_plugin">Brightcove IMA插件中的更改</a>
  </li>
  <li>
     <a href="#Migrating_to_the_IMA_Plugin_6_15_0">遷移到IMA插件6.15.0 &lt;/a
    </li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Changes_in_the_Google_IMA_SDK">Google IMA SDK中的更改</h2>
<p>
  Brightcove Native SDK 將 Google IMA SDK 從版本 3.11.2 更新到版本 3.19.4。最相關的變化包括：
</p>
<ul>
  <li>
    <code translate="No">SdkFactory.createAdDisplayContainer()</code>不推薦使用
  </li>
  <li>
    <code translate="No">AdDisplayContainer.setPlayer(VideoAdPlayer)</code>不推薦使用
  </li>
  <li>
    <code translate="No">AdDisplayContainer.setAdContainer(ViewGroup)</code>不推薦使用
  </li>
  <li>
    <code translate="No">AdsRequest.setAdDisplayContainer(AdDisplayContainer)</code>已移除
  </li>
</ul>
<p>有關完整版本，請參見<a href="https://developers.google.com/interactive-media-ads/docs/sdks/android/client-side/history">Google IMA Android SDK發行記錄</a>文檔。</p>
</section>

<section class="bcls-section">
<h2 id="Changes_in_the_Brightcove_IMA_plugin">Brightcove IMA插件中的更改</h2>
<p>
  Brightcove IMA 插件進行了多項更改，以與新的 Google IMA SDK 版本完全兼容。它們包括：
</p>
<ul>
  <li>
    <a href="#Using_the_GoogleIMAComponent_Builder">使用 GoogleIMAComponent Builder</a>
  </li>
  <li>
     <a href="#Creating_the_AdDisplayContainer">創建AdDisplayContainer</a>
  </li>
  <li>
     <a href="#Deprecated_methods_in_GoogleIMAVideoAdPlayer">GoogleIMAVideoAdPlayer中不推薦使用的方法</a>
  </li>
</ul>

<h3 id="Using_the_GoogleIMAComponent_Builder">使用 GoogleIMAComponent Builder</h3>
<p>我們建議使用 Builder 來創建<code translate="No">GoogleIMAComponent</code>實例。這使得配置更容易<code translate="No">GoogleIMAComponent</code> .</p>
<pre class="line-numbers"><code class="language-java" translate="No">googleIMAComponent = new GoogleIMAComponent.Builder(brightcoveVideoView, eventEmitter)
  .setUseAdRules(true)
  .setImaSdkSettings(customIMASDKSettings)
  .setAdsRenderingSettings(customAdsRenderingSettings)
  .setAdDisplayContainerFactory(customAdDisplayContainerFactory)
  .build();
}</code></pre>

<h3 id="Creating_the_AdDisplayContainer">創建AdDisplayContainer</h3>
<p>由於Google IMA SDK已刪除<code translate="No">AdsRequest.setAdDisplayContainer(...)</code>，Brightcove IMA插件現在可以使用<code translate="No">GoogleIMAVideoAdPlayer</code>和<code translate="No">BaseVideoView</code>。</p>
<p>該插件需要一個<code translate="No">AdDisplayContainerFactory</code>創建<code translate="No">AdDisplayContainer</code> .</p>
<pre class="line-numbers"><code class="language-java" translate="No">public interface AdDisplayContainerFactory {
  /**
  * Creates the AdDisplayContainer with the provided GoogleIMAVideoAdPlayer
  * and the ViewGroup retrieved with getViewContainer()
  *
  * @param googleIMAVideoAdPlayer the Brightcove Ad Player for Google IMA
  */
  AdDisplayContainer createAdDisplayContainer(GoogleIMAVideoAdPlayer googleIMAVideoAdPlayer);

  /**
  * Returns the ViewGroup container used for both,
  * the creation of the GoogleIMAVideoAdPlayer and the AdDisplayContainer
  */
  ViewGroup getViewContainer();
}
</code></pre>
<p>在幕後，該插件使用<code translate="No">DefaultAdDisplayContainerFactory</code>， 一個<code translate="No">AdDisplayContainerFactory</code> , 創建<code translate="No">AdDisplayContainer</code> .這<code translate="No">getViewContainer()</code>返回<code translate="No">BaseVideoView</code>傳入其構造函數，並且<code translate="No">createAdDisplayContainer</code>方法返回：</p>

<pre><code class="language-java" translate="No">ImaSdkFactory.createAdDisplayContainer(getViewContainer(), googleIMAVideoAdPlayer);</code></pre>

<h4>添加您的AdDisplayContainerFactory</h4>
<p>如果需要其他實現，則必須傳遞自己的實現<code translate="No">AdDisplayContainerFactory</code>到<code translate="No">GoogleIMAComponent</code>建造者：</p>
<pre class="line-numbers"><code class="language-java" translate="No">googleIMAComponent = new GoogleIMAComponent.Builder(brightcoveVideoView, eventEmitter)
  .setAdDisplayContainerFactory(customAdDisplayContainerFactory)
  .build();
</code></pre>

<p>如果您想以其他視圖播放廣告，<code translate="No">BaseVideoView</code>，您可以提供<code translate="No">DefaultAdDisplayContainerFactory</code>和你的<code translate="No">ViewGroup</code>。</p>
<pre class="line-numbers"><code class="language-java" translate="No">googleIMAComponent = new GoogleIMAComponent.Builder(brightcoveVideoView, eventEmitter)
  .setAdDisplayContainerFactory(new DefaultAdDisplayContainerFactory(myViewGroup))
  .build();
</code></pre>

<h3 id="Deprecated_methods_in_GoogleIMAVideoAdPlayer">GoogleIMAVideoAdPlayer中不推薦使用的方法</h3>
<p>以下方法在<code translate="No">GoogleIMAVideoAdPlayer</code>班級：</p>
<table class="bcls-table">
  <thead class="bcls-table__head">
    <tr>
      <!-- <th style="width:10%">Deprecated</th> -->
      <th>不推薦使用的方法</th>
      <th style="text-align:center";>改用</th>
    </tr>
  </thead>
  <tbody class="bcls-table__body">
    <tr>
      <td><code translate="No">playAd()</code></td>
      <td><code translate="No">playAd(AdMediaInfo)</code></td>
    </tr>
    <tr>
      <td><code translate="No">loadAd(String)</code></td>
      <td><code translate="No">loadAd(AdMediaInfo, AdPodInfo)</code></td>
    </tr>
    <tr>
      <td><code translate="No">stopAd()</code></td>
      <td><code translate="No">stopAd(AdMediaInfo)</code></td>
    </tr>
    <tr>
      <td><code translate="No">resumeAd()</code></td>
      <td><code translate="No">playAd(AdMediaInfo)</code></td>
    </tr>
    <tr>
      <td><code translate="No">pauseAd()</code></td>
      <td><code translate="No">pauseAd(AdMediaInfo)</code></td>
    </tr>
  </tbody>
</table>
<br/>
<p>請注意，現在需要使用替換方法<code translate="No">AdMediaInfo</code>。您可以檢索當前<code translate="No">AdMediaInfo</code>通過調用對象<code translate="No">GoogleIMAVideoAdPlayer.getCurrentAdMediaInfo()</code> .這將返回加載的<code translate="No">AdMediaInfo</code>， 或者<code translate="No">Null</code> .</p>
</section>

<section class="bcls-section">
<h2 id="Migrating_to_the_IMA_Plugin_6_15_0">遷移到IMA插件6.15.0</h2>
<p>
  要遷移到 Brightcove IMA 插件 6.15.0，請執行以下步驟：
</p>
<ul>
  <li>
    <a href="#Update_dependency_versions">更新依賴版本</a>
  </li>
  <li>
    <a href="#Remove_deprecated_methods">刪除不推薦使用的方法</a>
  </li>
</ul>

<h3 id="Update_dependency_versions">更新依賴版本</h3>
<p>更新您的應用以使用以下依賴項版本：</p>
<ul>
  <li>
    所有Brightcove SDK依賴項都設置為6.15.0版
  </li>
  <li>
    使用 Google IMA SDK 版本 3.19.4
  </li>
  <li>
    使用 Google Play 服務 19.2.0 版
  </li>
</ul>
<p>這是一個例子<strong>build.gradle</strong>文件：</p>
<pre class="line-numbers"><code class="language-java" translate="No">//build.gradle
dependencies {
 //Brightcove SDK dependencies
 implementation &quot;com.brightcove.player:android-sdk6.15.0:&quot;
 implementation &quot;com.brightcove.player:exoplayer2:6.15.0&quot;
 implementation &quot;com.brightcove.player:android-ima-plugin:6.15.0&quot;

 //Google IMA SDK
 implementation &quot;com.google.ads.interactivemedia.v3:interactivemedia:3.19.4&quot;

 //Google Play Services
 implementation &quot;com.google.android.gms:play-services-ads:19.2.0&quot;
 ...
}
</code></pre>

<h3 id="Remove_deprecated_methods">刪除不推薦使用的方法</h3>
<p>您當前的 Google IMA 設置可能類似於：</p>
<pre class="line-numbers"><code class="language-java" translate="No">AdDisplayContainer container = sdkFactory.createAdDisplayContainer();
container.setPlayer(googleIMAComponent.getVideoAdPlayer());
container.setAdContainer(brightcoveVideoView);
</code></pre>
<p>這三種方法已被棄用並將消失。</p>
<p>你現在必須打電話<code translate="No">googleIMAComponent.getAdDisplayContainer()</code>它會返回<code translate="No">AdDisplayContainer</code>與<code translate="No">GoogleIMAVideoAdPlayer</code>，如果不可用，則為 null。</p>
<p>有關創建<code translate="No">AdDisplayContainer</code>，請參閱<a href="#Creating_the_AdDisplayContainer">創建AdDisplayContainer</a>部分。</p>
<p>以下方法也已從 Google IMA SDK 中刪除：</p>
<pre><code class="language-java" translate="No">adsRequest.setAdDisplayContainer(container);
</code></pre>
<p>相反，請使用<code translate="No">AdDisplayContainer</code>創建Google IMA的實例<code translate="No">AdsLoader</code>。</p>
<p>有關不推薦使用的方法及其替代方法的詳細信息，請參見<a href="#Deprecated_methods_in_GoogleIMAVideoAdPlayer">GoogleIMAVideoAdPlayer中不推薦使用的方法</a>部分。</p>
</section>

<section class="bcls-section">
<h2 id="More_information">更多信息</h2>
<p>有關IMA更改的更多詳細信息，請參見<a href="https://developers.google.com/interactive-media-ads/docs/sdks/android/client-side/history">Google IMA Android SDK發行記錄</a>文檔。</p>
<p>如有任何相關問題，請隨時通過<a href="https://groups.google.com/g/brightcove-native-player-sdks">Brightcove SDK論壇</a>。</p>
</section>

</article>