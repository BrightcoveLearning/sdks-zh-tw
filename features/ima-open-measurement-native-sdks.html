---
title: '使用本機 SDK 的 IMA 開放測量' 
description:在本主題中，您將學習如何將 Open Measurement SDK 與 Brightcove Native SDK 的 IMA 插件配合使用。
parent: Features 
grandparent: Home
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Overview">概述</h2>

<p>Brightcove Native SDK 現在支持使用<a href="https://iabtechlab.com/standards/open-measurement-sdk/">開放測量 SDK</a>（OM SDK）。OM SDK 與 Google IMA 集成，允許您使用第三方工具進行廣告測量和驗證。</p>

<p>Open Measurement SDK 將覆蓋廣告媒體元素的所有視圖視為障礙物並降低廣告可見度。視頻控件可能被視為“友好”障礙物，但必須在 OM SDK 中註冊才能從廣告可見度衡量中排除。</p>
</section>

<section class="bcls-section">
<h2 id="iOS">的iOS</h2>

<p>適用於 iOS 的 Brightcove Native SDK 支持使用 OM SDK。有關實施第三方廣告評估的更多信息，請參見<a href="https://developers.google.com/interactive-media-ads/docs/sdks/ios/omsdk">適用於iOS的IMA SDK中的開放測量</a>文檔。</p>

<h3>用戶界面覆蓋</h3>

<p>如果您使用覆蓋IMA廣告視圖的UI控件元素，則需要在OM SDK中進行註冊。有關詳細信息，請參見<a href="https://github.com/brightcove/brightcove-player-sdk-ios-ima#registering-ad-overlays">註冊廣告疊加層</a>適用於iOS的Native SDK的“參考"部分。</p>

<h3>IMA設定</h3>

<p>默認情況下，適用於iOS的Brightcove Native SDK設置了<code translate="No">playerType</code>和<code translate="No">playerVersion</code>具有以下值的屬性：</p>

<pre class="line-numbers">
<code class="language-objectivec" translate="No">imaSettings.playerType = @"bcov/ios-sdk-player";
imaSettings.playerVersion = [BCOVIMAComponent versionIdentifier];</code></pre>

<p>您可能想要覆蓋這些值。一個示例是直接從Google IMA獲取廣告指標。要使用您自己的值，請在<code translate="No">imaSettings</code>目的：</p>

<pre class="line-numbers">
<code class="language-objectivec" translate="No">imaSettings.playerType = @"<span class="bcls-input">your-player-type</span>";
imaSettings.playerVersion = @"<span class="bcls-input">your-player-version</span>"</code></pre>

<aside class="bcls-aside bcls-aside--information">每個屬性的最大長度為 20 個字符。</aside>

<p>有關將IMA廣告與iOS的本地SDK結合使用的代碼詳細信息，請參見<a href="https://github.com/BrightcoveOS/ios-player-samples/tree/master/IMA/BasicIMAPlayer">BasicIMAPlayer示例</a>。</p>
</section>

<section class="bcls-section">
<h2 id="Android">安卓</h2>

<p>適用於 Android 的 Brightcove Native SDK 支持使用 OM SDK。有關實施第三方廣告評估的更多信息，請參見<a href="https://developers.google.com/interactive-media-ads/docs/sdks/android/omsdk">適用於Android的IMA SDK中的開放式衡量</a>文檔。</p>

<h3>用戶界面覆蓋</h3>

<p>如果您使用覆蓋IMA廣告視圖的UI控件元素，則需要在OM SDK中進行註冊。為此，您的代碼將如下所示：</p>

<pre class="line-numbers">
<code class="language-java" translate="No">public class MainActivity extends BrightcovePlayer {
 // ...
 private AdDisplayContainer adDisplayContainer;
 private View adOverlayView;
 // ...

 @Override
 protected void onCreate(Bundle savedInstanceState) {
   // ...
   adOverlayView = findViewById(R.id.ad_overlay);
   setupGoogleIMA();
   // ...
 }

 private void setupGoogleIMA() {
   // Show adOverlayView
   eventEmitter.on(EventType.AD_BREAK_STARTED, (event) -&gt;  {
       adOverlayView.setVisibility(View.VISIBLE);
   });

   // Hide adOverlayView
   eventEmitter.on(EventType.AD_BREAK_COMPLETED, (event) -&gt;  {
       adOverlayView.setVisibility(View.GONE);
   });

   // Create ImaSdkFactory
   final ImaSdkFactory sdkFactory = ImaSdkFactory.getInstance();
   eventEmitter.on(GoogleIMAEventType.ADS_REQUEST_FOR_VIDEO, new EventListener() {
     @Override
     public void processEvent(Event event) {
       // Create a container object to register the friendly obstructions.
       adDisplayContainer = sdkFactory.createAdDisplayContainer();
       adDisplayContainer.registerVideoControlsOverlay(adOverlayView);
       // ...
     }
   });

   eventEmitter.on(EventType.COMPLETED, (event) -&gt; {
     if (adDisplayContainer != null) {
       // Unregister the friendly obstructions
       adDisplayContainer.unregisterAllVideoControlsOverlays();
     }
   });
 }
}</code></pre>

<h3>IMA設定</h3>

<p>默認情況下，適用於iOS的Brightcove Native SDK設置了<code translate="No">playerType</code>和<code translate="No">playerVersion</code>具有以下值的屬性：</p>

<pre class="line-numbers">
<code class="language-java" translate="No">imaSdkSettings.setPlayerType("bcov/and-sdk-player");
imaSdkSettings.setPlayerVersion("&lt;replaced with current sdk version&gt;");</code></pre>

<p>您可能想要覆蓋這些值。一個示例是直接從Google IMA獲取廣告指標。要使用您自己的值，請在<code translate="No">imaSdkSettings</code>目的：</p>

<pre class="line-numbers">
<code class="language-java" translate="No">ImaSdkSettings imaSdkSettings = imaSdkFactory.createImaSdkSettings();
imaSdkSettings.setPlayerType("<span class="bcls-input">your-player-type</span>");
imaSdkSettings.setPlayerVersion("<span class="bcls-input">your-player-version</span>");
GoogleIMAComponent googleIMAComponent = new GoogleIMAComponent(brightcoveVideoView, eventEmitter, imaSdkSettings);</code></pre>

<aside class="bcls-aside bcls-aside--information">每個屬性的最大長度為 20 個字符。</aside>

<p>有關將IMA廣告與Android原生SDK結合使用的代碼詳細信息，請參見<a href="https://github.com/BrightcoveOS/android-player-samples/tree/master/brightcove-exoplayer/AdRulesIMASampleApp">AdRulesIMASampleApp示例</a>。</p>
</section>
</article>