<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

	<title>BCOVFairPlay 參考</title>

	<link rel="stylesheet" href="css/style.css">
	<meta name="viewport" content="initial-scale=1, maximum-scale=1.4">
	<meta name="generator" content="appledoc 2.2.1 (build 1334)">
</head>
<body class="appledoc">
	<header>
		<div class="container" class="hide-in-xcode">
			
			<h1 id="library-title"><a href="index.html">BCOVFairPlay</a></h1>

			<p id="developer-home">
				<a href="index.html">亮灣</a>
			</p>
			
		</div>
	</header>

	<aside>
		<div class="container">
			<nav>
				<ul id="header-buttons" role="toolbar">
					<li><a href="hierarchy.html">等級制度</a></li>
				</ul>
			</nav>
		</div>
	</aside>

	<article>
		<div id="overview-contents" class="container">
			<div id="content">
				<main role="main">
					<h1 class="title">BCOVFairPlay 參考</h1>

					
					<div class="section section-overview index-overview">
						
						
						<h1>適用於 iOS 版 Brightcove Player SDK 的 FairPlay 插件，版本 1.1.3.89</h1><h1>支持的平台</h1>

<p>iOS 8.0 及以上。</p>

<p>tvOS 9.0 及以上。</p>

<h1>安裝</h1>

<p>Brightcove Player SDK 的FairPlay 插件為iOS 提供了兩個安裝包，一個靜態庫框架和一個動態框架。iOS 8.0 及更高版本支持部署。</p>

<p>FairPlay 插件提供了一個動態框架來支持 tvOS 9.0 及更高版本。</p>

<p><strong>請注意以下 iOS/tvOS + FairPlay 限制：</strong></p>

<ul>
<li><p>雖然插件包含模擬器架構，但您不能在模擬器中播放受 FairPlay 保護的內容。</p></li>
<li><p>FairPlay 流媒體內容不會在 AirPlay 鏡像模式下呈現。更多詳細信息，請參見 2015 WWDC 演示文稿 502：<a href="https://developer.apple.com/videos/play/wwdc2015/502/">HLS 的內容保護</a> .</p></li>
</ul>


<h2>可可豆</h2>

<p>您可以使用<a href="http://cocoapods.org">可可豆</a>將 Brightcove Player SDK 添加到您的項目。你可以找到最新的<code>Brightcove-Player-SDK-FairPlay</code> podspec <a href="https://github.com/CocoaPods/Specs/tree/master/Specs/6/0/2/Brightcove-Player-SDK-FairPlay">這裡</a> .podspec 支持 iOS 和 tvOS。需要 CocoaPods 1.0 或更高版本。</p>

<p>指定默認 pod <code> Brightcove-Player-SDK-FairPlay</code>將安裝靜態庫框架。要安裝動態框架，請使用以下命令聲明 pod <code>動態的</code>子規格：<code>Brightcove-Player-SDK-FairPlay/動態</code></p>

<p>靜態框架示例：</p>

<pre><code>pod 'Brightcove-Player-SDK-FairPlay' </code></pre>

<p>動態框架示例：</p>

<pre><code>pod 'Brightcove-Player-SDK-FairPlay/動態' </code></pre>

<p>必須維護最新的主 podspec 存儲庫，以確保您始終使用最新版本的 Brightcove 軟件。從 CocoaPods 1.0.0 開始，podspec repo 更新不再是自動功能，因此要更新您的主 repo，請在命令行上運行以下命令：</p>

<pre><code>pod 回購更新</code></pre>

<h2>手動的</h2>

<p>手動將 Brightcove Player SDK 的 FairPlay 插件添加到您的項目中：</p>

<ol>
<li>安裝最新版本的<a href="https://github.com/brightcove/brightcove-player-sdk-ios">Brightcove 播放器 SDK</a> .</li>
<li>從我們的網站下載插件的最新壓縮版本<a href="https://github.com/brightcove/brightcove-player-sdk-ios-fairplay/releases">發布頁面</a> .</li>
<li>添加<code>BrightcoveFairPlay.framework</code>到您的項目。</li>
<li>在&ldquo;構建設置&rdquo;應用程序目標的選項卡，確保&ldquo;框架搜索路徑&rdquo;包括框架的路徑。這應該自動完成，除非框架存儲在與您的項目不同的根目錄下。</li>
<li>在&ldquo;一般的&rdquo;應用程序目標的選項卡，將以下內容添加到&ldquo;將二進製文件與庫鏈接&rdquo;部分：

<ul>
<li>BrightcoveFairPlay.framework<code></code></li>
</ul>
</li>
<li>（僅限動態框架）在&ldquo;一般的&rdquo;應用程序目標的選項卡，添加&lsquo; BrightcoveFairPlay.framework &rsquo;到&ldquo;嵌入式二進制&rdquo;部分。</li>
<li>（僅限動態框架）在&ldquo;構建階段&rdquo;選項卡，添加一個&ldquo;運行腳本&rdquo;階段與命令<code>猛擊 $ {BUILT_PRODUCTS_DIR} /$ {FRAMEWORKS_FOLDER_PATH} /BrightcoveFairPlay.framework/strip-frameworks.sh</code> .查看&ldquo;僅在安裝時運行腳本&rdquo; .這將從構建中刪除不需要的架構，這對於 App Store 提交很重要。</li>
<li>（僅限靜態框架）在&ldquo;構建設置&rdquo;應用程序目標的選項卡，添加<code>-ObjC</code>到&ldquo;其他鏈接器標誌&rdquo;構建設置。</li>
</ol>


<h2>進口</h2>

<p>適用於 iOS 的 Brightcove Player SDK 可以通過幾種不同的方式導入代碼；<code> @import BrightcoveFairPlay;</code> , <code> #import &lt;BrightcoveFairPlay/BrightcoveFairPlay.h&gt;</code>或者<code>#import &lt;BrightcoveFairPlay/[特定類].h&gt;</code> .</p>

<h1>快速開始</h1>

<p>Brightcove FairPlay 是 Apple FairPlay 和<a href="https://github.com/brightcove/brightcove-player-sdk-ios">適用於 iOS 的 Brightcove Player SDK</a> .以下部分展示瞭如何為基本播放設置代碼。</p>

<h2>視頻雲動態交付</h2>

<p>當您使用 Video Cloud Dynamic Delivery 時，對 FairPlay 應用程序證書的引用嵌入在從播放服務返回的 BCOVVideo 對像中。當您播放 FairPlay 視頻時，SDK 使用此引用來檢索應用程序證書。</p>

<p>以下是您需要遵循的基本步驟：</p>

<pre><code>@property (nonatomic, strong) id&lt;BCOVPlaybackController&gt; 播放控制器；
---
-
---
  // 使用 // 用於向 Brightcove 註冊您的 // FairPlay 憑據的應用程序 ID 和發布者 ID 創建一個 BCOVFPSBrightcoveAuthProxy 對象。BCOVFPSBrightcoveAuthProxy *proxy = [[BCOVFPSBrightcoveAuthProxy alloc] initWithPublisherId:&lt;pub-id&gt; applicationId:&lt;app-id&gt;]; BCOVPlayerSDKManager *sdkManager = [BCOVPlayerSDKManager sharedManager]; // Brightcove FairPlay 向 BCOVPlaybackManager 添加了一些類別方法。 // 如果您使用自己的 FairPlay 許可證服務器，則 // 您將在此處傳入您自己的代理實現。 id&lt;BCOVPlaybackController&gt;playbackController = [sdkManager createFairPlayPlaybackControllerWithAuthorizationProxy:proxy];播放控制器.delegate = self; _playbackController = 播放控制器； [self.view addSubview:playbackController.view]; BCOVPlaybackService *playbackService = [[BCOVPlaybackService alloc] initWithAccountId:&lt;account-id&gt; policyKey:&lt;policy-key&gt;]; [playbackService findVideoWithVideoID:&lt;video-id&gt; 參數：@ {}完成：^（BCOVVideo *video，NSDictionary *jsonResponse，NSError *error）{ if(video) { [self.playbackController setVideos:@[video]]; } }];</code></pre>

<h2>傳統視頻雲工作流</h2>

<p>如果您使用的是舊版 Video Cloud 工作流程，則需要在播放視頻之前檢索 FairPlay 證書。此代碼顯示基本設置和播放：</p>

<pre><code>@property (nonatomic, strong) id&lt;BCOVPlaybackController&gt; 播放控制器；
---
-
---
  // 使用 // 用於向 Brightcove 註冊您的 // FairPlay 憑據的應用程序 ID 和發布者 ID 創建一個 BCOVFPSBrightcoveAuthProxy 對象。BCOVFPSBrightcoveAuthProxy *proxy = [[BCOVFPSBrightcoveAuthProxy alloc] initWithPublisherId:&lt;pub-id&gt; applicationId:&lt;app-id&gt; BCOVPlayerSDKManager *sdkManager = [BCOVPlayerSDKManager sharedManager]; // 使用身份驗證代理創建您的 FairPlay 播放控制器。 id&lt;BCOVPlaybackController&gt;playbackController = [sdkManager createFairPlayPlaybackControllerWithAuthorizationProxy:proxy];播放控制器.delegate = self; _playbackController = 播放控制器； [self.view addSubview:playbackController.view]; // 使用代理，檢索 FairPlay 應用程序證書。 // 在生產應用程序中，您可能希望在應用程序啟動後立即執行此操作。 [代理檢索應用程序證書：^（NSData * _Nullable applicationCertificate，NSError * _Nullable 錯誤）{ if (applicationCertificate) { // Add the application certificate to the playback controller [playbackController addFairPlayApplicationCertificate:applicationCertificate identifier:kBCOVDefaultFairPlayApplicationCertificateIdentifier]; BCOVPlaybackService *playbackService = [[BCOVPlaybackService alloc] initWithAccountId:&lt;account-id&gt; policyKey:&lt;policy-key&gt;]; [playbackService findVideoWithVideoID:&lt;video-id&gt; parameters:@{}完成：^（BCOVVideo *video，NSDictionary *jsonResponse，NSError *error）{ if(video) { [playbackController setVideos:@[video]]; } }]; } }];</code></pre>

<p>您可以將多個 FairPlay 應用程序證書添加到播放控制器，但對於傳統播放，您通常只需要一個。如果您使用相同的播放控制器播放來自兩個不同帳戶的視頻，您可以為每個帳戶添加一個應用證書，帳戶 ID 作為&ldquo;標識符&rdquo;範圍。</p>

<p>如果您使用舊方法來創建播放控制器，這些方法將繼續有效。創建較新的方法是為了通過讓您在創建播放控制器之前或之後檢索 FairPlay 應用程序證書來提供更大的靈活性，並且在動態交付的情況下，您不需要&rsquo;根本不需要檢索或傳遞申請證書。</p>

<p>如果您有問題或需要幫助，我們有 Brightcove 支持論壇&rsquo; s 本機播放器 SDK，位於<a href="https://groups.google.com/forum/#!forum/brightcove-native-player-sdks">[https://groups.google.com/forum/](https://groups.google.com/forum/)#!forum/brightcove-native-player-sdks</a> .</p>

<h1>申請證書</h1>

<p>播放受 FairPlay 保護的視頻需要與內容關聯的應用程序證書。</p>

<p>如果您使用的是視頻雲動態交付，則會根據需要下載和使用應用程序證書。證書被緩存以供重複使用，因此每個帳戶通常只有一次下載。</p>

<p>如果您使用的是舊版視頻雲服務，您仍然需要檢索應用程序證書以通過您的初始化方法傳入。這<a href="Classes/BCOVFPSBrightcoveAuthProxy.html"><code>BCOVFPSBrightcoveAuthProxy</code></a>類提供了一種從 fps.brightcove.com 檢索它的便捷方法。</p>

<p>如果您遠程存儲自己的應用程序證書，則可以使用正常的<code>NSURLSessionDataTask</code>檢索證書作為<code>NSData</code>目的。收到後，您可以使用以下命令將證書添加到播放控制器<code>[BCOVPlaybackController addFairPlayApplicationCertificate:identifier:]</code> .在大多數情況下，您會使用<code>kBCOVDefaultFairPlayApplicationCertificateIdentifier</code>作為標識符。</p>

<h1>使用第三方 FairPlay 許可證服務器</h1>

<p>這<a href="Classes/BCOVFPSBrightcoveAuthProxy.html"><code>BCOVFPSBrightcoveAuthProxy</code></a>旨在與<code>fps.brightcove.com</code> .如果您需要使用另一個 FairPlay 許可證服務器，您可以實現<a href="Protocols/BCOVFPSAuthorizationProxy.html"><code>BCOVFPSAuthorizationProxy</code></a>處理許可證通信的協議，或者如果您的需求很簡單，您可以覆蓋一些<a href="Protocols/BCOVFPSAuthorizationProxy.html"><code>BCOVFPSAuthorizationProxy</code></a>特性：</p>

<pre><code>/** * FairPlay 相關許可請求的基本 URL。默認 URL 指向 * fps.brightcove.com。 * 如果設置為 nil，將重新創建指向 fps.brightcove.com 的默認 NSURL。 */ @property (nonatomic, strong, null_resettable) NSURL *fpsBaseURL; /** * FairPlay 相關密鑰請求的密鑰請求 URL。 * 通常設置為 nil，在這種情況下，密鑰請求 URL * 將從 Video Cloud Playback API 響應中檢索。 */ @property (nonatomic, strong, null_resettable) NSURL *keyRequestURL;</code></pre>

<p>這<code>fpsBaseURL</code>屬性還用於設置應用程序證書請求的基本 URL。證書要求如下：</p>

<pre><code>[fpsBaseURL]/application_certificate/[publisherID]/[applicationID]</code></pre>

<p>無論是使用 Video Cloud 還是您自己的服務器，您的<code>BCOV視頻</code>對象應該包含一個<code>BCOV源</code>對象，其 URL 指向某些受 FairPlay 保護的內容。未受保護的視頻 URL 仍將在 FairPlay 工作流程中播放。</p>
						
						
					</div>
					

					<div class="index-container">
						

						
						<div class="index-column">
							<h2 class="index-title">類引用</h2>
							<ul>
								
								<li>BCOVFPSBrightcoveAuthProxy<a href="Classes/BCOVFPSBrightcoveAuthProxy.html"></a></li>
								
							</ul>
						</div>
						

						
						<div class="index-column">
							
							<h2 class="index-title">協議參考</h2>
							<ul>
								
								<li>BCOVFPSAuthorizationProxy<a href="Protocols/BCOVFPSAuthorizationProxy.html"></a></li>
								
							</ul>
							

							

							
							<h2 class="index-title">類別參考</h2>
							<ul>
								
								<li>BCOVPlayerSDKManager(BCOVFPSAdditions)<a href="Categories/BCOVPlayerSDKManager+BCOVFPSAdditions.html"></a></li>
								
							</ul>
							
						</div>
						
					</div>

					<footer>
						<div class="footer-copyright">
							
							<p class="copyright">版權&copy; 2017 年光明灣。版權所有。更新：2017-03-02</p>
							
							
							<p class="generator">生成者<a href="http://appledoc.gentlebytes.com">蘋果文檔 2.2.1（內部版本 1334）</a> .</p>
							
						</div>
					</footer>
				</main>
			</div>
		</div>
	</article>

	<script src="js/script.js"></script>
<script src="https://learning-services-media.brightcove.com/doc-assets/js/https-fix.js"></script>
<script src="https://learning-services-media.brightcove.com/doc-assets/js/support-feedback.js"></script><script src="https://support.brightcove.com/site-assets/js/site/feedback-docs.js"></script>
</body>
</html>