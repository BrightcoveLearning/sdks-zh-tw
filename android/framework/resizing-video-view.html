---
title: '使用適用於 Android 的本機 SDK 調整視頻視圖的大小' 
description:在本主題中，您將學習如何調整/拉伸內部視頻視圖以填充<code translate="No">BrightcoveVideoView</code>使用適用於 Android 的本機 SDK 時。
parent: Framework 
grandparent: Android Development
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Overview">概述</h2>
<p>作為開發人員，您可以更改視頻在視頻視圖中的顯示方式的默認行為。您可以調整/拉伸內部視頻視圖（<code translate="No">SurfaceView</code> / <code translate="No">TextureView</code> ) 來填充<code translate="No">BrightcoveVideoView</code> ( <code translate="No">FrameLayout</code>）。為此，您可以收聽<code translate="No">EventType.VIDEO_SIZE_KNOWN</code>事件，做一些數學運算並設置顯示值。</p>
<p>有兩種方法可以更改視頻視圖：</p>
<ul>
  <li>
    <a href="#Resizing_the_container">調整容器大小（<code translate="No">BaseVideoView</code> / <code translate="No">FrameLayout</code>）</a>
  </li>
  <li>
    <a href="#Resizing_the_video">調整視頻大小（<code translate="No">SurfaceView</code>）</a>
  </li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Resizing_the_container">調整容器大小</h2>
<p>您可能想要開發一個應用程序，將視頻視圖設置為在縱向模式下適合整個設備屏幕。您可以通過調整容器大小（<code translate="No">BaseVideoView</code> / <code translate="No">FrameLayout</code>）。</p>
<aside class="bcls-aside bcls-aside--information">因為<code translate="No">Video</code>高度最初是未知的，它將匹配其父視圖大小（整個屏幕在<a href="https://github.com/BrightcoveOS/android-player-samples/tree/master/brightcove-exoplayer/BasicSampleApp/src/main">基本示例應用程序</a>） 直到<code translate="No">VIDEO_SIZE_KNOWN</code>事件被觸發。然後，該<code translate="No">BaseVideoView</code>將包裹<code translate="No">SurfaceView</code> .調整容器大小時，您可能會看到初始閃爍。</aside>

<h3>設置容器屬性</h3>
<p>如果您在視頻周圍看到黑邊，可以嘗試設置<code translate="No">BrightcoveVideoView</code><code translate="No">layout-height</code>。</p>
<ol class="bcls-tasklist">
    <li>打開XML <strong>佈局</strong>文件。</li>
    <li>設置<code translate="No">BrightcoveVideoView layout-height</code>到<code translate="No">wrap_content</code> .</li>
    <li>您可能會遇到如上述註釋中所述的初始閃爍。</li>
</ol>

<h3>設置視頻視圖大小</h3>
<p>控制“視頻視圖"的另一種方法是通過編程設置大小。</p>
<ol class="bcls-tasklist-restart">
    <li>要最小化初始閃爍，請嘗試設置<code translate="No">layout_height</code>到特定值（例如 280dp）。目標是設置的高度接近計算出的高度。</li>
    <li>聽著<code translate="No">EventType.VIDEO_SIZE_KNOWN</code>事件。</li>
    <li>得到<code translate="No">Event.VIDEO_WIDTH</code>和<code translate="No">Event.VIDEO_HEIGHT</code></li>
    <li>使用這些值，確定縱橫比。</li>
    <li>使用縱橫比計算顯示器上的寬度和高度。</li>
</ol>
<p>此解決方案將類似於以下內容：</p>
<pre class="line-numbers">
<code class="language-java" translate="No">//Event sent when we know the Video dimensions.
eventEmitter.on(EventType.VIDEO_SIZE_KNOWN, new EventListener() {
  @Override
  public void processEvent(Event event) {
    // Get the width and height
    float width = event.getIntegerProperty(Event.VIDEO_WIDTH);
    float height = event.getIntegerProperty(Event.VIDEO_HEIGHT);
    float aspectRatio = height/width;

    //Get the display metrics
    DisplayMetrics metrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(metrics);
    int videoWidth = metrics.widthPixels; // We cover the entire display's width
    int videoHeight = (int) (videoWidth*aspectRatio); //Calculate the height based on the ratio

    // Set the layout params
    brightcoveVideoView.setLayoutParams(new FrameLayout.LayoutParams(videoWidth,videoHeight));
  }
});
</code></pre>
<p>添加視圖時，您需要覆蓋佈局參數。有關詳細信息，請參見<a href="/android/framework/android-adding-viewmanaging-layout.html">安卓：添加視圖/管理佈局</a>文檔。</p>
</section>

<section class="bcls-section">
<h2 id="Resizing_the_video">調整視頻大小</h2>
<p>您可能想要實現填充屏幕的雙擊。這將需要一個 16:9 的視頻並在 18:9 或 19:9 的設備上填滿屏幕。</p>
<p>您可以通過調整實際視頻的大小（<code translate="No">SurfaceView</code>）。</p>
<ol class="bcls-tasklist-restart">
    <li>
      <p>
        如果將寬度和高度設置為<code translate="No">renderView</code>為匹配設備顯示屏的大小，視頻將調整大小以匹配整個屏幕。
      </p>
      <aside class="bcls-aside bcls-aside--information">這不會拉伸實際視頻。我們將在下一步中這樣做。</aside>
      <pre class="line-numbers">
<code class="language-java" translate="No">//Event sent when we know the Video dimensions.
eventEmitter.on(EventType.VIDEO_SIZE_KNOWN, new EventListener() {
  @Override
  public void processEvent(Event event) {
    // Get the width and height
    float width = event.getIntegerProperty(Event.VIDEO_WIDTH);
    float height = event.getIntegerProperty(Event.VIDEO_HEIGHT);
    float aspectRatio = height/width;

    //Get the display metrics
    DisplayMetrics metrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(metrics);
    int videoWidth = metrics.widthPixels; // We cover the entire display's width
    int videoHeight = (int) (videoWidth*aspectRatio); //Calculate the height based on the ratio

    // Set the video size
    brightcoveVideoView.getRenderView().setVideoSize(videoWidth, videoHeight);
  }
});
</code></pre>
    </li>
    <li>
      <p>
        下面的代碼更新底層視頻視圖（例如<code translate="No">SurfaceView</code> ) 匹配其父級<code translate="No">BaseVideoView</code> ( <code translate="No">FrameLayout</code>）。有幾件事情要記住：
      </p>
      <ul>
        <li>
          你需要傾聽<code translate="No">VIDEO_SIZE_KNOWN</code>進入和退出全屏以及旋轉設備時的事件。
        </li>
        <li>
          您需要決定何時針對上述條件更新您的視圖。
        </li>
      </ul>
  <p>一種情況是您將<code translate="No">BaseVideoView layout_height</code>至<code translate="No">280dp</code>然後調整<code translate="No">SurfaceView</code>匹配<code translate="No">280dp</code>。縱橫比將略有修改。如果用戶以縱向模式進入全屏模式，並且<code translate="No">updateVideoViewMatchToParent()</code>被稱為，那麼<code translate="No">BaseVideoView</code>和<code translate="No">SurfaceView</code>將填充設備的顯示屏，並且視頻縱橫比將稍作修改。</p>
<pre class="line-numbers">
<code class="language-java" translate="No">public void updateVideoViewMatchToParent(@NonNull BaseVideoView brightcoveVideoView) {
  RenderView renderView = brightcoveVideoView.getRenderView();
  if (renderView != null) {
      renderView.setVideoSize(brightcoveVideoView.getWidth(), brightcoveVideoView.getHeight());
  }
}
</code></pre>
<p>要檢測雙擊，您可以使用<a href="https://developer.android.com/reference/android/view/GestureDetector.OnDoubleTapListener">GestureDetector.OnDoubleTapListener</a>界面。有關詳細信息，請參見<a href="https://developer.android.com/training/gestures/detector">檢測常見手勢</a>文檔。</p>
    </li>
</ol>
<p>如果您想在不考慮寬高比的情況下拉伸視頻（不裁剪視頻），則可以嘗試以下操作：</p>
<pre class="line-numbers">
<code class="language-java" translate="No">eventEmitter.on(EventType.VIDEO_SIZE_KNOWN, new EventListener() {
  @Override
  public void processEvent(Event event) {
      //Get the display metrics
      DisplayMetrics metrics = new DisplayMetrics();
      getWindowManager().getDefaultDisplay().getMetrics(metrics);

      int videoHeight = metrics.heightPixels;
      int videoWidth = metrics.widthPixels;
      brightcoveVideoView.getRenderView().setVideoSize(videoWidth, videoHeight);
  }
});
</code></pre>
<aside class="bcls-aside bcls-aside--information">重要的是<code translate="No">BaseVideoView</code>用途<code translate="No">match_parent</code>對彼此而言<code translate="No">layout_width</code>和<code translate="No">layout_height</code>為了<code translate="No">SurfaceView</code>填充設備的顯示屏。</aside>

<p>請記住，您獲得的值受設備方向的影響。要同時拉伸縱向和橫向視頻，您需要執行以下操作：</p>
<ol class="bcls-tasklist-restart">
    <li>
      <p>
        覆蓋以下內容<code translate="No">Activity</code>：
      </p> 
      <pre>
<code class="language-java" translate="No">public void onConfigurationChanged(Configuration configuration)</code>
</pre>
    </li>
    <li>重置視頻大小。</li>
</ol>
</section>

</article>