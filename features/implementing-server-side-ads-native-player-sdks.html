---
title: '使用原生 SDK 實現服務器端廣告' 
description:在本主題中，您將學習如何使用 Brightcove Native Player SDK 播放服務器端廣告，從為動態交付攝取的視頻。
parent: Features 
grandparent: Home
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Overview">概述</h2>

<p>服務器端廣告插入 (SSAI) 允許您將廣告嵌入到您的視頻中，這樣它們就不會被瀏覽器中的廣告攔截器攔截。動態交付是下一代攝取和交付系統，可減少您的存儲空間並動態打包媒體。了解更多有關使用的信息<a href="https://studio.support.brightcove.com/general/overview-dynamic-delivery.html">動態投放</a>為您的視頻。</p>

<p>SSAI 適用於 DRM 和非 DRM 內容。</p>

<aside class="bcls-aside bcls-aside--information">筆記：
<ul>
	<li>要使用 SSAI，您的 Video Cloud 帳戶需要配置為<a href="https://studio.support.brightcove.com/general/overview-dynamic-delivery.html">動態交付</a>並為 SSAI 啟用。請與您的客戶經理聯繫以開始使用此功能。</li>
	<li>SSAI 與視頻點播 (VOD) 配合使用並支持實時播放。</li>
	<li>有關限制的列表，請參見<a href="https://ssai.support.brightcove.com/getting-started/video-cloud-ssai-overview.html#Limitations">SSAI概述</a>文檔。</li>
</ul>
</aside>

<figure class="bcls-figure"><img class="bcls-image--no-border" alt="Server-side ad" src="/assets/images/android/ssai/ssai-sdk.png" />
<figcaption class="bcls-caption--image">服務器端廣告</figcaption>
</figure>

<p>從Video Cloud檢索到的，已通過Dynamic Delivery提取的任何視頻，都將在廣告配置中包含VMAP文件中指定的廣告。</p>

<p>要使用存儲在 Video Cloud 中的視頻內容播放服務器端廣告，請按照以下步驟操作：</p>

<ol class="bcls-tasklist">
	<li><a href="#Create_an_ad_configuration">創建廣告配置</a></li>
	<li>
	<p>構建您的應用程序：</p>

	<ul>
		<li><a href="#Android_implementation">Android實施</a></li>
		<li><a href="#iOS_implementation">iOS實施</a></li>
		<li><a href="#tvOS_implementation">tvOS 實現</a></li>
	</ul>
	</li>
	<li><a href="#Play_a_video_with_ads">播放帶有廣告的視頻</a></li>
	<!-- <li><a href="#Append_query_parameters">Append query parameters</a></li> -->
</ol>
</section>

<section class="bcls-section">
<h2 id="Create_an_ad_configuration">創建廣告配置</h2>

<p>廣告配置定義了 SSAI 播放的各個方面，包括視頻多廣告播放列表 (VMAP) 文件的 URL、信標和其他配置。要創建廣告配置，請按以下步驟操作：</p>

<ol class="bcls-tasklist-restart">
	<li>
	<p>在Video Cloud Studio中，展開<strong>行政</strong>菜單並選擇<strong>服務器端廣告設置</strong>。</p>

	<figure class="bcls-figure"><img class="bcls-image--no-border" alt="Ad configuration admin" src="/assets/images/android/ssai/ad-config-admin.png" />
	<figcaption class="bcls-caption--image">廣告配置管理員</figcaption>
	</figure>
	</li>
	<li>
	<p>添加廣告配置信息，然後選擇<strong>保存</strong>。</p>

	<figure class="bcls-figure"><img class="bcls-image--no-border" alt="Ad settings" src="/assets/images/android/ssai/ad-settings.png" />
	<figcaption class="bcls-caption--image">廣告設定</figcaption>
	</figure>
	</li>
</ol>

<p>有關詳細信息，請參閱<a href="https://studio.support.brightcove.com/admin/configuring-server-side-ad-settings.html">配置服務器端廣告設置</a>文檔。</p>

<p>要使用 SSAI API 創建廣告配置，請參閱<a href="https://ssai.support.brightcove.com/vod/guides/video-cloud-ssai-ad-config-api.html">Video Cloud SSAI 廣告配置 API</a>文檔。</p>
</section>

<section class="bcls-section">
<h2 id="Android_implementation">Android實施</h2>

<p>在您的應用中執行以下步驟以獲取廣告配置並播放視頻：</p>

<ol class="bcls-tasklist-restart">
	<li>在Android Studio中，打開您的<strong>MainActivity.java</strong>文件。</li>
	<li>添加以下導入語句：
	<pre>
<code class="language-java" translate="No">import com.brightcove.ssai.SSAIComponent;
import com.brightcove.player.network.HttpRequestConfig;</code></pre>
	</li>
	<li>為您的帳戶ID，策略密鑰，視頻ID和廣告配置ID定義常量。
	<pre class="line-numbers">
<code class="language-swift" translate="No">private String accountId = "<span class="bcls-input">your account id</span>";
private String policyKey = "<span class="bcls-input">your policy key</span>";
private String videoId = "<span class="bcls-input">your video id</span>";
private String adConfigId = "<span class="bcls-input">your ad configuration id</span>";</code></pre>

	<aside class="bcls-aside bcls-aside--tip">了解如何在<a href="https://apis.support.brightcove.com/policy/getting-started/overview-policy-api.html">策略密鑰</a>文檔。</aside>
	</li>
	<!-- <li>In the <code translate="No">onCreate</code> method, set the query parameter value to your ad configuration id.
  	<pre class="line-numbers">
<code class="language-swift" translate="No">Map&lt;String, String&gt; parameters = new HashMap&lt;&gt;();
      parameters.put("ad_config_id", adConfigId);
      </code></pre>
  	</li> -->
	<li>創建目錄服務的實例，該實例提供了用於從Playback API檢索數據的異步方法。創建SSAI組件的實例。
	<pre class="line-numbers">
<code class="language-swift" translate="No">Catalog catalog = new Catalog(eventEmitter, myAccountId, myPolicyKey);
SSAIComponent plugin = new SSAIComponent(appContext, getBrightcoveVideoView());
</code></pre>
	</li>
	<li>將 adConfigId 設置為 URL 參數。
	<pre class="line-numbers">
<code class="language-java" translate="No">HttpRequestConfig httpRequestConfig = new HttpRequestConfig.Builder()
  .addQueryParameter("ad_config_id", myAdConfig)
  .build();</code></pre>
	</li>
	<li>調用目錄服務以從Playback API檢索視頻以及廣告配置。使用您指定的廣告開始視頻播放。
	<pre class="line-numbers">
<code class="language-swift" translate="No">catalog.findVideoByID(myVideoId, httpRequestConfig, new VideoListener() {
    @Override
    public void onVideo(Video video) {

    // Process the Video
    plugin.processVideo(video);
  }
});</code></pre>
	</li>
</ol>

<h3>字幕</h3>
<aside class="bcls-aside bcls-aside--information">適用於 Android 的本機 SDK 僅支持帶有 SSAI 的清單內字幕。Sidecar（或遠程）字幕可能不會與內容和廣告插播同步。</aside>

<h3>大事記</h3>
<p>有關與服務器端廣告插入相關的事件的詳細信息，請參見以下內容：</p>
<ul>
	<li><a href="/android/reference/javadoc/com/brightcove/ssai/event/SSAIEventType.html">SSAI 事件類型</a></li>
</ul>

<h3>尋找無廣告</h3>
<p>如果您想在用戶搜索視頻時禁用廣告播放，請參閱<a href="/android/resources/code-snippets-using-native-sdk-android.html#Seek_without_ads">尋找無廣告</a>代碼片段。</p>

<h3>程式碼範例</h3>
<p>這是完整的代碼示例：</p>
<ul>
	<li><a href="https://github.com/BrightcoveOS/android-player-samples/tree/master/brightcove-exoplayer/BasicSsaiSampleApp">使用適用於Android的Native SDK的基本SSAI Player</a></li>
</ul>

<!-- <h3>Related topics</h3>
<p>For more details, see the following:</p>
<ul>
	<li><a href="/android/advertising/ssai-plugin-native-sdk-android.html">The SSAI Plugin for the Native SDK for Android</a></li>
	<li><a href="/android/advertising/ssai-plugin-native-sdk-android.html#Migrating_from_the_OnceUx_Plugin">Migrating from the OnceUX plugin</a></li>
</ul> -->
</section>

<section class="bcls-section">
<h2 id="iOS_implementation">iOS實施</h2>

<p>在您的應用中執行以下步驟以獲取廣告配置並播放視頻：</p>

<ol class="bcls-tasklist-restart">
	<li>在Xcode中，打開您的<strong>ViewController.m</strong>文件。</li>
	<li>導入iOS的SSAI插件。
	<pre>
<code class="language-swift" translate="No">import BrightcoveSSAI</code></pre>
	</li>
	<li>為您的帳戶ID，策略密鑰，視頻ID和廣告配置ID定義常量。
	<pre class="line-numbers">
<code class="language-swift" translate="No">struct Constants {
  static let AccountID = "<span class="bcls-input">your account id</span>"
  static let PlaybackServicePolicyKey = "<span class="bcls-input">your policy key</span>"
  static let VideoId = "<span class="bcls-input">your video id</span>"
  static let AdConfigId = "<span class="bcls-input">your ad configuration id</span>"
}</code></pre>

	<aside class="bcls-aside bcls-aside--tip">了解如何在<a href="https://apis.support.brightcove.com/policy/getting-started/overview-policy-api.html">策略密鑰</a>文檔。</aside>
	</li>
	<!-- <li>
      Define the view along with the companion view for ads.
      <pre class="line-numbers"><code class="language-swift" translate="No">class ViewController: UIViewController {
    @IBOutlet weak var videoContainerView: UIView!
    @IBOutlet weak var companionSlotContainerView: UIView!</code></pre>
    </li> -->
	<li>定義<code translate="No">BCOVPlaybackService</code>類，提供用於從Playback API檢索數據的異步方法。
	<pre class="line-numbers">
<code class="language-swift" translate="No">private lazy var playbackService: BCOVPlaybackService = {
  let factory = BCOVPlaybackServiceRequestFactory(accountId: Constants.AccountID, policyKey: Constants.PlaybackServicePolicyKey, baseURLStr: "https://edge.api.brightcove.com/playback/v1")
  return BCOVPlaybackService(requestFactory: factory)
}()</code></pre>
	</li>
	<li>將查詢參數值設置為您的廣告配置 ID。
	<pre>
<code class="language-swift" translate="No">let queryParameters = [kBCOVPlaybackServiceParamaterKeyAdConfigId: Constants.AdConfigId]</code></pre>
	</li>
	<li>
	<p>致電<code translate="No">playbackService</code>從Playback API檢索視頻以及廣告配置。使用您指定的廣告開始視頻播放。</p>

	<pre class="line-numbers">
<code class="language-swift" translate="No">playbackService.findVideo(withVideoID: Constants.VideoId, parameters: queryParameters) { [weak self] (video: BCOVVideo?, jsonResponse: [AnyHashable: Any]?, error: Error?) -&gt; Void in

  guard let _video = video else {
    print("ViewController Debug - Error retrieving video: \(error?.localizedDescription ?? "unknown error")")
    return
  }

  self?.playbackController?.setVideos([_video] as NSFastEnumeration)
}</code></pre>
	</li>
</ol>

<h3>大事記</h3>
<p>有關與服務器端廣告插入相關的事件的詳細信息，請參見以下內容：</p>
<ul>
	<li><a href="https://github.com/brightcove/brightcove-player-sdk-ios-ssai/blob/master/ios/dynamic/BrightcoveSSAI.framework/Headers/BCOVSSAIConstants.h">SSAI活動</a></li>
	<li><a href="https://github.com/brightcove/brightcove-player-sdk-ios/blob/master/ios/dynamic/BrightcovePlayerSDK.framework/Headers/BCOVAdvertising.h">廣告活動</a></li>
</ul>

<h3>尋找無廣告</h3>
<p>如果您想在用戶搜索視頻時禁用廣告播放，請參閱<a href="https://github.com/brightcove/brightcove-player-sdk-ios-ssai#seek-without-ads">尋找無廣告</a> SDK 參考的部分。</p>

<h3>程式碼範例</h3>
<p>這是完整的代碼示例：</p>
<ul>
		<li><a href="https://github.com/BrightcoveOS/ios-player-samples/tree/master/SSAI/BasicSSAIPlayer">使用適用於iOS的Native SDK的基本SSAI Player（Objective-C和Swift）</a></li>
</ul>

<h3>相關主題</h3>
<p>有關更多詳細信息，請參見以下內容：</p>
<ul>
	<li><a href="https://github.com/brightcove/brightcove-player-sdk-ios-ssai">適用於 iOS 的 Native SDK 的 SSAI 插件</a></li>
	<!-- <li><a href="https://github.com/brightcove/brightcove-player-sdk-ios-ssai#migrating-onceux-to-ssai">Migrating from the OnceUX plugin</a></li> -->
</ul>
</section>

<section class="bcls-section">
<h2 id="tvOS_implementation">tvOS 實現</h2>

<p>使用適用於 tvOS 的 Native SDK 實現 SSAI 的代碼類似於<a href="#iOS_implementation">iOS 實現</a>以上。</p>

<h3>大事記</h3>
<p>有關與服務器端廣告插入相關的事件的詳細信息，請參見以下內容：</p>

<ul>
	<li><a href="https://github.com/brightcove/brightcove-player-sdk-ios-ssai/blob/master/ios/dynamic/BrightcoveSSAI.framework/Headers/BCOVSSAIConstants.h">SSAI活動</a></li>
	<li><a href="https://github.com/brightcove/brightcove-player-sdk-ios/blob/master/ios/dynamic/BrightcovePlayerSDK.framework/Headers/BCOVAdvertising.h">廣告活動</a></li>
</ul>

<h3>程式碼範例</h3>
<p>這是完整的代碼示例：</p>
<ul>
		<li><a href="https://github.com/BrightcoveOS/ios-player-samples/tree/master/SSAI/BasicSSAItvOSPlayer">使用適用於tvOS的Native SDK的基本SSAI Player（Objective-C和Swift）</a></li>
</ul>
</section>

<!-- <section class="bcls-section">
<h2 id="Additional_notes">Additional notes</h2>

<p>There are a few technical notes to be aware of when using SSAI with the Native SDKs.</p>

<h3>Brightcove Native SDK for iOS/tvOS</h3>

<ul>
	<li><strong>Post-rolls:</strong> The OnceUX plugin translates the <code translate="No">timeOffset</code> value of <code translate="No">end</code> on the final ad break (post-roll) to a <code translate="No">CMTime</code> value of <code translate="No">+INFINITY</code>, for speed and efficiency. This translation is done AFTER the VMAP document is received (which occurs after the Playback API response is received) and BEFORE playback begins.</li>
</ul>
</section> -->
</article>