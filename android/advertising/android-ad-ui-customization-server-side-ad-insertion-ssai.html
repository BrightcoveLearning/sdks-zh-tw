---
title: '帶有服務器端廣告插入 (SSAI) 的 Android 廣告 UI 自定義' 
description:在本主題中，您將學習如何使用適用於 Android 的 Brightcove Native SDK 的 SSAI 插件管理和自定義在服務器端廣告播放期間顯示的 UI 元素。
parent: Advertising 
grandparent: Android Development
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Overview">概述</h2>

<p>使用服務器端廣告插入 (SSAI) 時，適用於 Android 的 Brightcove Native SDK 允許您自定義廣告 UI 元素。有關SSAI的更多詳細信息，請參見以下內容：</p>

<ul>
	<li><a href="/features/implementing-server-side-ads-native-player-sdks.html">使用Native Player SDK實施服務器端廣告</a></li>
</ul>

<p>廣告 UI 由兩個主要組件組成：</p>

<ul>
	<li>廣告重疊式廣告（A）</li>
	<li>廣告媒體控制器（B）</li>
</ul>

<figure class="bcls-figure"><img class="bcls-image--no-border" width="800" alt="Ad UI components" src="/assets/images/android/ssai-ad-ui/ad-ui-components.png" />
<figcaption class="bcls-caption--image">廣告用戶界面組件</figcaption>
</figure>

<h3>廣告重疊式廣告</h3>

<p>廣告疊加層由以下組件組成：</p>

<ul>
	<li>廣告連播總時長倒計時（A）</li>
	<li>了解更多信息（B）</li>
	<li>跳過廣告視圖 (C)</li>
</ul>

<figure class="bcls-figure"><img class="bcls-image--no-border" width="800" alt="Ad overlay" src="/assets/images/android/ssai-ad-ui/ad-overlay.png" />
<figcaption class="bcls-caption--image">廣告重疊式廣告</figcaption>
</figure>

<aside class="bcls-aside bcls-aside--information">跳過廣告按鈕僅支持 VOD 服務器端廣告插入 (SSAI)。Live SSAI 目前不支持它。</aside>

<h3>廣告媒體控制器</h3>

<p>Ad 媒體控制器由以下組件組成，從左到右：</p>

<ul>
	<li>播放按鈕（A）</li>
	<li>廣告編號倒數（B）</li>
	<li>單個廣告時長倒計時 (C)</li>
	<li>全屏按鈕（D）</li>
</ul>

<figure class="bcls-figure"><img class="bcls-image--no-border" width="800" alt="Ad media controller" src="/assets/images/android/ssai-ad-ui/ad-media-controller.png" />
<figcaption class="bcls-caption--image">廣告媒體控制器</figcaption>
</figure>
</section>

<section class="bcls-section">
<h2 id="Managing_ad_UI_components">管理廣告用戶界面組件</h2>

<p>要從視圖啟用或禁用廣告 UI 組件，請參閱以下內容：</p>

<ul>
	<li><a href="#Modifying_the_VAST_document">修改VAST文檔</a></li>
	<li><a href="#Specifying_the_ad_configuration">指定廣告配置</a></li>
</ul>

<h3 id="Modifying_the_VAST_document">修改VAST文檔</h3>

<p>這<strong>了解更多</strong>和<strong>跳過廣告</strong>可以根據 VAST 文檔中的廣告定義顯示或隱藏視圖。</p>

<p>這<strong>了解更多</strong>僅當線性廣告素材包含<code translate="No">ClickThrough</code> URL，如下所示：</p>

<pre class="line-numbers">
<code class="language-xml" translate="No"> &lt;VAST xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;
  &lt;Ad id="blue-01-5s"&gt;
    &lt;InLine&gt;
      ...
      &lt;Creatives&gt;
        &lt;Creative id="creative-01-5s"&gt;
          &lt;Linear&gt;
            ...
            &lt;VideoClicks&gt;
              <span class="bcls-highlight">&lt;ClickThrough id="clickthrough"&gt;https://www.brightcove.com/en/&lt;/ClickThrough&gt;</span>
              &lt;ClickTracking id="...”&gt;...&lt;/ClickTracking&gt;
            &lt;/VideoClicks&gt;
          &lt;/Linear&gt;
        &lt;/Creative&gt;
      &lt;/Creatives&gt;
    &lt;/InLine&gt;
  &lt;/Ad&gt;
&lt;/VAST&gt;
</code></pre>

<p>這<strong>跳過廣告</strong>僅當存在有效的視圖時才會出現<code translate="No">skipoffset</code>線性廣告素材中的值：</p>

<pre class="line-numbers">
<code class="language-xml" translate="No"> &lt;VAST xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;
  &lt;Ad id="blue-01-5s"&gt;
    &lt;InLine&gt;
      ...
      &lt;Creatives&gt;
        &lt;Creative id="creative-01-5s"&gt;
          <span class="bcls-highlight">&lt;Linear skipoffset="00:00:03"&gt;</span>
            ...
          &lt;/Linear&gt;
        &lt;/Creative&gt;
      &lt;/Creatives&gt;
    &lt;/InLine&gt;
  &lt;/Ad&gt;
&lt;/VAST&gt;
</code></pre>

<h3 id="Specifying_the_ad_configuration">指定廣告配置</h3>

<p>使用時<a href="/features/using-player-enhancements-live-ssai-native-sdks.html#Create_an_ad_configuration">Live SSAI 的播放器增強功能</a>，您可以啟用或禁用<code translate="No">application_ad_configuration</code>您的廣告配置。這<code translate="No">client_options</code>對象允許您打開或關閉廣告 UI 組件。</p>

<aside class="bcls-aside bcls-aside--information">使用廣告配置修改廣告 UI 僅適用於 Live SSAI。</aside>

<pre class="line-numbers">
<code class="language-json" translate="No">{
  "application_ad_configuration": {
	"ad_configuration_description": "$YOUR_DESCRIPTION",
	"ad_configuration_expected_response_type": "Vast",
	"ad_configuration_headers_for_impressions": false,
	"ad_configuration_strategy": "SingleAdResponse",
	"ad_configuration_transforms": [],
	"ad_configuration_url_format": "$YOUR_AD_SERVER",
     <span class="bcls-highlight">"ad_configuration_client_sdk_enabled": true,
     "client_options": {
        "show_ad_break_remaining_time": true / false,
        "show_ad_remaining_time": true / false,
        "show_number_of_remaining_ads": true / false,
        "client_only_tracking": true / false
     }</span>
  },
  "application_description": "$YOUR_DESCRIPTION"
}
</code></pre>

<aside class="bcls-aside bcls-aside--tip">如果您正在使用任何<code translate="No">client_options</code>組件，你必須有<code translate="No">ad_configuration_client_sdk_enabled</code>設置<code translate="No">true</code> .</aside>

<p>使用 client_options 對象啟用/禁用以下組件：</p>

<ul>
	<li><code translate="No">Show_ad_break_remaining_time</code>：Ad Pod 總持續時間倒計時

	<ul>
		<li>例子：<strong>您的視頻將在 15 秒後繼續播放</strong></li>
	</ul>
	</li>
	<li><code translate="No">Show_ad_remaining_time</code>：單個廣告持續時間倒計時
	<ul>
		<li>例子：<strong>（0:15）</strong></li>
	</ul>
	</li>
	<li><code translate="No">Show_number_of_remaining_ads</code>：廣告編號倒計時
	<ul>
		<li>例子：<strong>廣告1之3</strong>，<strong>廣告2之3</strong>， 等等。</li>
	</ul>
	</li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Customizing_the_Ad_Overlay">自定義廣告疊加層</h2>

<p>您可以自定義與廣告疊加層關聯的視圖和默認文本。</p>

<h3>修改視圖</h3>

<p>要自定義廣告疊加，您可以替換您的版本<strong>ssai_ad_overlay.xml</strong>應用程序中的佈局文件<strong>資源</strong>文件夾。該文件包含幾個不同的獨立佈局，如下所示：</p>

<figure class="bcls-figure"><img class="bcls-image--no-border" width="800" alt="Ad Overlay layouts" src="/assets/images/android/ssai-ad-ui/ad-overlay-layouts.png" />
<figcaption class="bcls-caption--image">廣告重疊式廣告版式</figcaption>
</figure>

<p>例如，您可以通過更新<strong>ssai_ad_pod_duration_countdown_view.xml</strong>文件。您還可以通過替換整個廣告疊加視圖<strong>ssai_ad_overlay.xml</strong>文件。</p>

<p>這種佈局結構允許您覆蓋特定組件，同時保持與舊 SSAI 插件版本的向後兼容性。</p>

<p>使用Android Studio瀏覽廣告覆蓋文件。從適用於Android的本地SDK 6.9.0版本開始，SSAI插件的<strong>ssai_ad_overlay.xml</strong>看起來像這樣：</p>

<pre class="line-numbers">
<code class="language-xml" translate="No">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:background="@color/white"&gt;

   &lt;include layout="@layout/ssai_ad_countdown_and_learn_more_overlay"/&gt;
   &lt;include layout="@layout/ssai_ad_skip_overlay"/&gt;
&lt;/FrameLayout&gt;
</code></pre>

<p>替換組件 xml 文件時，必須使用<code translate="No">TextView</code>指定原始視圖 ID 以避免出現意外結果。有關詳細信息，請參見下表</p>

<table class="bcls-table">
	<thead class="bcls-table__head">
		<tr>
			<th>組件名稱</th>
			<th>組件編號</th>
			<th>組件視圖</th>
		</tr>
	</thead>
	<tbody class="bcls-table__body">
		<tr>
			<td>廣告連播時長視圖</td>
			<td><code translate="No">text_ad_countdown</code></td>
			<td><code translate="No">TextView</code></td>
		</tr>
		<tr>
			<td>了解更多信息</td>
			<td><code translate="No">text_ad_learn_more</code></td>
			<td><code translate="No">TextView</code></td>
		</tr>
		<tr>
			<td>跳過廣告視圖</td>
			<td><code translate="No">text_ad_skip</code></td>
			<td><code translate="No">TextView</code></td>
		</tr>
	</tbody>
</table>

<h3>修改默認文字</h3>

<p>所有廣告重疊式廣告的組成部分都是<code translate="No">TextViews</code>是在您應用的<strong>string.xml</strong>文件。要更改顯示文本，請通過創建一個覆蓋它<code translate="No">string</code>或者<code translate="No">plurals</code>使用與適用於 Android 的本機 SDK 相同的字符串 ID 的項目。</p>

<p>這<strong>廣告連播時長</strong>視圖使用以下字符串：</p>

<pre class="line-numbers">
<code class="language-xml" translate="No">&lt;plurals name="ssai_message_ad_break_duration_countdown"&gt;
   &lt;item quantity="one"&gt;Your video will resume in\n%1$d second&lt;/item&gt;
   &lt;item quantity="other"&gt;Your video will resume in\n%1$d seconds&lt;/item&gt;
&lt;/plurals&gt;
&lt;string name="ad_info_now_text"&gt;Your video will resume now&lt;/string&gt;
&lt;string name="ad_buffering_text"&gt;Your ad is buffering …&lt;/string&gt;
</code></pre>

<p>這<strong>了解更多</strong>視圖使用以下字符串：</p>

<pre>
<code class="language-xml" translate="No">&lt;string name="ssai_message_learn_more"&gt;Learn More &gt;&gt; &lt;/string&gt;
</code></pre>

<p>這<strong>跳過廣告</strong>視圖使用以下字符串：</p>

<pre class="line-numbers">
<code class="language-xml" translate="No">&lt;plurals name="you_can_skip_text"&gt;
   &lt;item quantity="one"&gt;You can skip this ad in\n%d second&lt;/item&gt;
   &lt;item quantity="other"&gt;You can skip this ad in\n%d seconds&lt;/item&gt;
&lt;/plurals&gt;
&lt;string name="skip_text"&gt;Skip Ad&lt;/string&gt;
</code></pre>
</section>

<section class="bcls-section">
<h2 id="Customizing_the_Ad_Media_Controller">自定義廣告媒體控制器</h2>

<p>您可以自定義與廣告媒體控制器關聯的視圖和默認文本。</p>

<h3>修改視圖</h3>

<p>要自定義廣告媒體控制器，您可以替換您的版本<strong>default_ssai_ad_media_controller.xml</strong>應用程序中的佈局文件<strong>資源</strong>文件夾。</p>

<p>這會覆蓋 SSAI 插件中使用的默認佈局。每次檢測到廣告時，SSAI插件都會切換到此佈局，然後在廣告完成後返回默認控制器。</p>

<p>使用您自己的佈局時，請使用與最初指定的視圖類型和視圖 ID 相同的視圖類型和視圖 ID，以避免出現意外結果。使用Android Studio探索廣告媒體控制器的佈局。對於SSAI插件版本6.9.0，<strong> default_ssai_ad_media_controller.xml</strong>看起來像這樣：</p>

<pre class="line-numbers">
<code class="language-xml" translate="No">&lt;com.brightcove.player.mediacontroller.BrightcoveControlBar
   xmlns:android="http://schemas.android.com/apk/res/android"
   xmlns:tools="http://schemas.android.com/tools"
   android:id="@+id/brightcove_control_bar"
   style="@style/SSAIAdControlBar"
   android:layout_width="match_parent"
   android:layout_height="wrap_content"
   android:layout_gravity="bottom"
   android:background="@color/bmc_background"
   android:orientation="vertical"
   android:padding="8dp"&gt;

   &lt;LinearLayout
       android:layout_width="match_parent"
       android:layout_height="wrap_content"
       android:gravity="bottom"
       android:orientation="horizontal"&gt;

       &lt;Button style="@style/BorderlessButton"
           android:id="@id/play"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:text="@string/brightcove_controls_play"
           android:visibility="gone"
           tools:visibility="visible"/&gt;

       &lt;include layout="@layout/ssai_ad_number_countdown_view"/&gt;

       &lt;include layout="@layout/ssai_single_ad_duration_countdown_view"/&gt;

       &lt;View
           android:id="@id/two_line_spacer"
           android:layout_width="0dp"
           android:layout_height="0dp"
           android:layout_weight="1"
           android:visibility="gone"
           tools:visibility="visible"/&gt;

       &lt;Button style="@style/BorderlessButton"
           android:id="@id/full_screen"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:padding="4dp"
           android:text="@string/brightcove_controls_enter_full_screen"
           android:visibility="gone"
           tools:visibility="visible"/&gt;
   &lt;/LinearLayout&gt;

&lt;/com.brightcove.player.mediacontroller.BrightcoveControlBar&gt;
</code></pre>

<p>SSAI 廣告媒體控制器組件視圖類型和視圖 ID 如下所述：</p>

<table class="bcls-table">
	<thead class="bcls-table__head">
		<tr>
			<th>組件名稱</th>
			<th>組件編號</th>
			<th>組件視圖</th>
		</tr>
	</thead>
	<tbody class="bcls-table__body">
		<tr>
			<td>播放按鈕</td>
			<td><code translate="No">play</code></td>
			<td>按鈕</td>
		</tr>
		<tr>
			<td>全屏按鈕</td>
			<td><code translate="No">full_screen</code></td>
			<td>按鈕</td>
		</tr>
		<tr>
			<td>廣告編號倒數</td>
			<td><code translate="No">text_ad_number_countdown</code></td>
			<td>文本視圖</td>
		</tr>
		<tr>
			<td>單個廣告持續時間倒計時</td>
			<td><code translate="No">text_single_ad_duration_countdown</code></td>
			<td>文本視圖</td>
		</tr>
	</tbody>
</table>

<p>看看<a href="https://github.com/BrightcoveOS/android-player-samples/tree/master/brightcove-player-controls/CustomizedControlsSampleApp">定制控件示例應用</a>，其中自定義默認媒體控制器以添加新按鈕。您可以應用相同的方法來自定義您的 SSAI 廣告媒體控制器。</p>

<h3>修改默認文字</h3>

<p>所有的Ad Media Controller組件都是<code translate="No">TextViews</code>是在您應用的<strong>string.xml</strong>文件。要更改顯示文本，請通過創建一個覆蓋它<code translate="No">string</code>或者<code translate="No">plurals</code>使用與適用於 Android 的本機 SDK 相同的字符串 ID 的項目。</p>

<p>這<strong>廣告編號倒計時</strong>視圖使用以下字符串：</p>

<pre>
<code class="language-xml" translate="No">&lt;string name="ssai_message_ad_number_countdown"&gt;Ad %1$d of %2$d&lt;/string&gt;
</code></pre>

<p>這<strong>單個廣告持續時間倒計時</strong>視圖使用以下字符串：</p>

<pre>
<code class="language-xml" translate="No">&lt;string name="ssai_message_ad_duration_countdown"&gt;(%1$s)&lt;/string&gt;
</code></pre>
</section>

<section class="bcls-section">
<h2 id="Summary">概括</h2>

<p>您有幾個選項可以自定義 SSAI UI 元素。複雜程度取決於您想要實現的目標。從低到高的複雜度，您可以：</p>

<ul>
	<li>通過VAST配置配置/隱藏某些組件</li>
	<li>顯示/隱藏組件使用<code translate="No">client_options</code>廣告配置中的對象（目前僅限 Live SSAI）</li>
	<li>更改顯示的字符串值</li>
	<li>覆蓋UI佈局</li>
</ul>

<p>請分享您在其中的任何想法或反饋<a href="https://groups.google.com/forum/#!forum/brightcove-native-player-sdks">Brightcove Native Player SDK論壇</a>。</p>
</section>
</article>