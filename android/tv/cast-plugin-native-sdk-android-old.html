---
title: '適用於 Android 的 Native SDK 的 Cast 插件' 
description:在本主題中，您將學習如何使用適用於 Android 版 Brightcove Player SDK 的 Cast 插件將視頻投射到連接 Chromecast 的電視上。
parent: Connected TV 
grandparent: Android Development
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Overview">概述</h2>

<p>和<a href="https://developers.google.com/cast/docs/developers">谷歌演員</a>技術，您可以啟動和控制從移動設備到高清電視和家庭音頻系統的流視頻內容。在您的應用中，您可以點擊“投射"按鈕以在大屏幕上流式傳輸您的內容。</p>

<p>要構建 Cast 應用程序，您需要以下組件：</p>

<ul>
	<li>
	<p>一種<strong>發件人申請</strong> -它位於您的移動設備上，並檢測接收器設備，建立安全連接並鏡像您的內容。發件人應用程序是投射到 Chromecast 的本地播放器。投射到接收器應用後，您可以將其視為Chromecast的遙控器。</p>

	<p>發件人應用程序由適用於 Android 的 Brightcove Player SDK 的 Cast 插件提供。您將在本主題中了解它。</p>
	</li>
	<li>
	<p>一種<strong>接收者申請</strong> -這是在Chromecast設備上運行的代碼。可以將其視為具有CSS和JS資產的單頁HTML應用程序。</p>

	<p>對於測試，請按照下列步驟操作：</p>

	<ol class="bcls-tasklist">
		<li>從...開始<a href="https://github.com/googlecast/CastReceiver">Google 的示例 Cast Receiver</a></li>
		<li>審查<a href="https://developers.google.com/cast/v2/receiver_apps#default">Google 的默認媒體接收器</a>文件</li>
	</ol>

	<p>對於生產，您必須創建自己的接收器應用程序，因為Google不支持在生產環境中使用其演示接收器應用程序。有關詳細信息，請參見Google的<a href="https://developers.google.com/cast/docs/receiver_apps">演員表接收器應用</a>文檔。</p>
	</li>
</ul>

<aside class="bcls-aside bcls-aside--information">適用於 Android 的 Brightcove Player SDK 的 Cast 插件提供發送器應用程序功能，但您必須實現自己的接收器應用程序。</aside>
</section>

<section class="bcls-section">
<h2 id="Cast_plugin">演員表插件</h2>

<p>Cast插件建立在<a href="https://medium.com/google-exoplayer/new-cast-extension-and-demo-app-55816a50012">新的 ExoPlayer Cast 擴展</a>和 Google Play 服務投射框架。添加演員轉換插件依賴關係後，gradle將拉取Play Services Cast Framework依賴關係，ExoPlayer Cast Extension依賴關係以及其他所需的依賴關係。要了解有關使用的依賴項的更多信息，請參閱<a href="">投射插件依賴項</a>部分。</p>

<h3 id="Supported_SDK_version">支持的SDK版本</h3>

<p>對於Cast插件，您必須使用Brightcove Native SDK for Android 6.3.0+。</p>
</section>

<section class="bcls-section">
<h2 id="Getting_started">入門</h2>

<p>要開始使用 Cast 插件，請按照下列步驟操作：</p>

<ol class="bcls-tasklist-restart">
	<li>在你的<strong>build.gradle</strong>文件，添加以下依賴項以包含Cast插件：

	<pre>
<code class="language-swift" translate="No">implementation "com.brightcove.player:android-cast-plugin:6.3.0"</code></pre>
	</li>
</ol>
</section>

<section class="bcls-section">
<h2 id="Options_Provider">期權提供者</h2>

<p>接下來，您需要指定<a href="https://developers.google.com/android/reference/com/google/android/gms/cast/framework/OptionsProvider">選項提供者</a> Google Cast框架的實現。這<code translate="No">OptionsProvider</code>界面有助於設置初始化所需的幾個選項<a href="https://developers.google.com/android/reference/com/google/android/gms/cast/framework/CastContext">投射上下文</a>班級。您將在此處設置 Cast Receiver App ID。要了解有關集成的更多信息<code translate="No">OptionsProvider</code>，見谷歌的文檔：<a href="https://developers.google.com/cast/docs/android_sender_integrate#initialize_the_cast_context">初始化演員表上下文</a>。</p>

<p>Brightcove Cast 插件包括一個<code translate="No">DefaultOptionsProvider</code>類，其中默認的 Google Demo Cast Receiver App ID 是通過在<strong>字符串.xml</strong>文件。有關更多詳細信息並了解如何覆蓋它，請參見<a href="">演員表接收器應用ID</a>部分。</p>

<ol class="bcls-tasklist">
	<li>無論您使用<code translate="No">DefaultOptionsProvider</code>班級或你自己的<code translate="No">OptionsProvider</code>實現，你需要設置<code translate="No">OptionsProvider</code>應用程序中的實現類名稱<strong>AndroidManifest.xml</strong>文件作為鍵值對元數據，如下所示：

	<pre class="line-numbers">
<code class="language-swift" translate="No">&lt;meta-data
android:name="com.google.android.gms.cast.framework.OPTIONS_PROVIDER_CLASS_NAME"
android:value="com.brightcove.cast.DefaultOptionsProvider" /&gt;</code></pre>
	</li>
</ol>

<p>如果您使用<code translate="No">DefaultOptionsProvider</code>上課，您將可以設置<code translate="No">ExpandedControllerActivity</code>並通過在AndroidManifest中設置類似的元數據信息來打開/關閉投射通知。</p>
</section>

<section class="bcls-section">
<h2 id="Expanded_Controller_Activity">擴展控制器活動</h2>

<p>這<a href="https://developers.google.com/android/reference/com/google/android/gms/cast/framework/media/widget/ExpandedControllerActivity">擴展控制器活動</a>附帶 Google Cast 庫，可讓您控制在 Chromecast 設備上投射的視頻。此類提供了一些自定義靈活性。例如，有五個插槽可用於顯示按鈕，其中第三個插槽是為不可配置的“播放"按鈕保留的。其餘按鈕可以設置為其他預定義按鈕或您自己的自定義按鈕。</p>

<p>Brightcove Cast 插件提供了子類<code translate="No">DefaultExpandedControllerActivity</code> .我們已按以下順序啟用以下按鈕：</p>

<ul>
	<li><strong>隱藏式字幕</strong></li>
	<li><strong>跳過上一個</strong></li>
	<li><strong>玩</strong></li>
	<li><strong>跳過下一步</strong></li>
	<li><strong>靜音切換</strong></li>
</ul>

<p>此外，搜索欄設置的默認可繪製對象與標準中使用的默認可繪製對象相同<code translate="No">BrightcoveMediaController</code>：</p>

<ul>
	<li>進度可繪製：
	<pre>
<code class="language-swift" translate="No">R.drawable.default_scrubber_progress_horizontal</code></pre>
	</li>
	<li>拇指可繪製：
	<pre>
<code class="language-swift" translate="No">R.drawable.default_scrubber_thumb</code></pre>
	</li>
</ul>

<p>要了解如何自定義搜索欄，請參閱<a href="https://github.com/BrightcoveOS/android-player-samples/tree/master/brightcove-player-controls/SeekBarColorsSampleApp/src/main">SeekBarColorsSampleApp</a> .</p>

<ol class="bcls-tasklist">
	<li>為了設置<code translate="No">DefaultExpandedControllerActivity</code>還是你自己的<code translate="No">ExpandedControllerActivity</code>，在您的<strong>AndroidManifest.xml</strong>文件：

	<pre class="line-numbers">
<code class="language-swift" translate="No">&lt;meta-data  android:name="com.brightcove.cast.DefaultOptionsProvider.EXPANDED_CONTROLLER_ACTIVITY_CLASS_NAME"
android:value="com.brightcove.cast.DefaultExpandedControllerActivity" /&gt;</code></pre>
	</li>
</ol>
</section>

<section class="bcls-section">
<h2 id="Cast_Notification">演員表通知</h2>

<p>啟用投射通知後，當您投射視頻並將您的應用置於後台時會出現通知；例如，在按下主頁鍵後。</p>

<ol class="bcls-tasklist">
	<li>要啟用投射通知，請在您的<strong>AndroidManifest.xml</strong>文件並提供單擊通知時要啟動的活動的名稱：

	<pre class="line-numbers">
<code class="language-swift" translate="No">&lt;meta-data android:name="com.brightcove.cast.DefaultOptionsProvider.NOTIFICATION_TARGET_ACTIVITY_CLASS_NAME"
android:value="com.brightcove.cast.BrightcoveControllerActivity" /&gt;</code></pre>
	</li>
</ol>

<p>如果您不提供com.brightcove.cast.DefaultOptionsProvider.NOTIFICATION_TARGET_ACTIVITY_CLASS_NAME，或者該值具有無效的活動名稱，則投射通知將被關閉。</p>

<aside class="bcls-aside bcls-aside--information">去除的同時<code translate="No">meta-data</code>標籤來自<strong>AndroidManifest.xml</strong>文件將禁用來自發件人應用程序的通知，但仍然可以在發件人設備上查看通知，指示設備正在您的 Wi-Fi 網絡上投射。這不是來自發件人應用程序的通知，而是來自發件人設備的通知，與任何應用程序配置無關。</aside>
</section>

<section class="bcls-section">
<h2 id="Cast_Receiver_App_Id">演員表接收器應用ID</h2>

<p>接下來，在您的項目中設置您的Google Cast接收器應用ID。Cast Receiver 應用程序是一個網絡播放器，負責在 Chromecast 設備中播放您的視頻。要了解有關接收器應用程序的更多信息，請訪問<a href="https://developers.google.com/cast/docs/receiver_apps">谷歌官方指南</a> .您的 Receiver 應用程序將具有唯一的十六進制 ID。這是您將在 Android 應用程序中設置的 ID。</p>

<ol class="bcls-tasklist">
	<li>默認情況下，Brightcove Cast插件會設置一個Google Demo Receiver App ID，這對入門和測試很有幫助，但對生產而言則無濟於事。要使用您的 Cast Receiver 應用程序覆蓋此值，請在您的<strong>字符串.xml</strong>文件：

	<pre>
<code class="language-swift" translate="No">&lt;string name="cast_receiver_app_id"&gt;4F8B3483&lt;/string&gt;</code></pre>
	</li>
</ol>
</section>

<section class="bcls-section">
<h2 id="The_Cast_Button">投射按鈕</h2>

<p>通過投射按鈕，您可以選擇與您的設備位於同一網絡中的 Chromecast 設備，並允許您連接和創建會話。要將 Cast Button 添加到您的應用程序，請按照 Google 的文檔進行操作<a href="https://developers.google.com/cast/docs/android_sender_integrate#add_a_cast_button">整合演員表：添加投射按鈕</a>。</p>

<ol class="bcls-tasklist">
	<li>Brightcove Cast 插件提供了一種實用方法來輕鬆設置 Cast 按鈕。當您只想將 Cast 按鈕添加到 Activity/Fragment 菜單時，這很有用。詳情見以下代碼：
	<pre class="line-numbers">
<code class="language-swift" translate="No">//Activity
@Override
public boolean onCreateOptionsMenu(Menu menu) {
   super.onCreateOptionsMenu(menu);
   GoogleCastComponent.setUpMediaRouteButton(MainActivity.this, menu);
   return true;
}</code></pre>
	</li>
</ol>
</section>

<section class="bcls-section">
<h2 id="The_Mini_Controller">迷你控制器</h2>

<p>Mini Controller 是一個附加到您的 Activity 的 Fragment，通常位於佈局的底部。迷你控制器允許您播放和暫停視頻，並在您的 Chromecast 設備中播放視頻時發出指示。單擊迷你控制器時，將啟動擴展控制器。</p>

<ol class="bcls-tasklist">
	<li>要啟用迷你控制器，請將以下代碼添加到您的 Activity 佈局中。
	<pre class="line-numbers">
<code class="language-swift" translate="No">&lt;fragment
   android:id="@+id/castMiniController"
   android:layout_width="match_parent"
   android:layout_height="wrap_content"
   android:layout_alignParentBottom="true"
   android:visibility="gone"
   class="com.google.android.gms.cast.framework.media.widget.MiniControllerFragment" /&gt;</code></pre>
	</li>
</ol>

<p>要了解 Mini Controller 的最佳實踐，請參閱<a href="https://developers.google.com/cast/docs/design_checklist/sender#sender-mini-controller">設計清單：發送器迷你控制器</a>文檔。有關實現的詳細信息，請參見<a href="https://developers.google.com/cast/docs/android_sender_integrate#add_mini_controller">整合Cast：添加迷你控制器</a>文檔。</p>
</section>

<section class="bcls-section">
<h2 id="The_Brightcove_GoogleCastComponent">Brightcove GoogleCastComponent</h2>

<p>這<code translate="No">GoogleCastComponent</code> GoogleCastComponent 類是 Brightcove Cast 插件的主要類。它實例化ExoPlayer CastPlayer並設置其偵聽器。它提供了一些基本方法來加載視頻或將其添加到隊列中。這<code translate="No">GoogleCastComponent</code>類還添加了幾個 Brightcove 事件偵聽器來處理 Activity 和 Fragment 生命週期事件，以及可用於發出媒體信息以將視頻加載到 Chromecast 設備的其他事件偵聽器。</p>

<p>Cast 插件旨在讓 Video Cloud 花費最少的精力。使用視頻雲時，<code translate="No">BrightcoveCastMediaManager</code>類從 Video Cloud 響應中收集信息，例如 Brightcove Video 和 Source 對象，每次<code translate="No">EventType.SET_SOURCE</code>事件發出。當用戶選擇播放以將視頻排隊時，此信息將被緩存並準備好使用。</p>

<ol class="bcls-tasklist">
	<li>為了創建<code translate="No">GoogleCastComponent</code>上課，您需要通過<code translate="No">Context</code>和<code translate="No">EventEmitter</code>：

	<pre>
<code class="language-swift" translate="No">GoogleCastComponent googleCastComponent = new GoogleCastComponent(eventEmitter, context);</code></pre>

	<p>或者你可以繼承<code translate="No">BrightcoveCastMediaManager</code>覆蓋其某些行為並將其傳遞給<code translate="No">GoogleCastComponent</code>：</p>

	<pre class="line-numbers">
<code class="language-swift" translate="No">MyBrightcoveCastMediaManager myBrightcoveCastMediaManager = new MyBrightcoveCastMediaManager(context, eventEmitter);

GoogleCastComponent googleCastComponent = new GoogleCastComponent(eventEmitter, context, myBrightcoveCastMediaManager);</code></pre>
	</li>
</ol>

<p>這就是開始將視頻投射到 Chromecast 設備所需的全部內容。</p>
</section>

<section class="bcls-section">
<h2 id="Listening_for_Cast_session">收聽演員表會議</h2>

<p>如果您希望您的應用在Cast連接開始或結束時做出反應，則可以添加<code translate="No">GoogleCastEventType.CAST_SESSION_STARTED</code>或者<code translate="No">GoogleCastEventType.CAST_SESSION_ENDED</code>事件偵聽器，如下所示：</p>

<pre class="line-numbers">
<code class="language-swift" translate="No">eventEmitter.on(GoogleCastEventType.CAST_SESSION_STARTED, new EventListener() {
   @Override
   public void processEvent(Event event) {
       // Session Started
   }
});
eventEmitter.on(GoogleCastEventType.CAST_SESSION_ENDED, new EventListener() {
   @Override
   public void processEvent(Event event) {
       // Session Ended
   }
});</code></pre>

<p>或者，您可以致電<code translate="No">GoogleCastComponent.isSessionAvailable()</code>檢查可用的會話。</p>
</section>

<section class="bcls-section">
<h2 id="Casting_a_Video">投放視頻</h2>

<p>為了在成功連接後將視頻投射到Chromecast，您可以使用EventEmitter並發出媒體信息信息，也可以直接使用<code translate="No">GoogleCastComponent</code>方法。</p>

<p>如果您希望發出媒體信息，則可以使用以下事件：</p>

<ul>
	<li><code translate="No">GoogleCastEventType.LOAD_MEDIA_INFO</code></li>
	<li><code translate="No">GoogleCastEventType.LOAD_MEDIA_QUEUE_ITEM</code></li>
	<li><code translate="No">GoogleCastEventType.ADD_MEDIA_INFO</code></li>
	<li><code translate="No">GoogleCastEventType.ADD_MEDIA_QUEUE_ITEM</code></li>
</ul>

<p>下表顯示了每個事件的預期屬性：</p>

<table class="bcls-table">
	<thead class="bcls-table__head">
		<tr>
			<th rowspan="2">活動名稱</th>
			<th colspan="2">特性</th>
		</tr>
		<tr>
			<th>鑰匙</th>
			<th>值類類型</th>
		</tr>
	</thead>
	<tbody class="bcls-table__body">
		<tr>
			<td><code translate="No">LOAD_MEDIA_INFO</code></td>
			<td><code translate="No">GoogleCastComponent.CAST_MEDIA_INFO</code><br />
			<code translate="No">GoogleCastComponent.CAST_MEDIA_PLAY_POSITION</code></td>
			<td><code translate="No">MediaInfo</code>整數</td>
		</tr>
		<tr>
			<td><code translate="No">LOAD_MEDIA_QUEUE_ITEM</code></td>
			<td><code translate="No">GoogleCastComponent.CAST_MEDIA_QUEUE_ITEM</code></td>
			<td><code translate="No">MediaQueueItem</code></td>
		</tr>
		<tr>
			<td><code translate="No">ADD_MEDIA_INFO</code></td>
			<td><code translate="No">GoogleCastComponent.CAST_MEDIA_INFO</code><br />
			<code translate="No">GoogleCastComponent.CAST_MEDIA_PLAY_POSITION</code></td>
			<td><code translate="No">MediaInfo</code>整數</td>
		</tr>
		<tr>
			<td><code translate="No">ADD_MEDIA_QUEUE_ITEM</code></td>
			<td><code translate="No">GoogleCastComponent.CAST_MEDIA_QUEUE_ITEM</code></td>
			<td><code translate="No">MediaQueueItem</code></td>
		</tr>
	</tbody>
</table>

<p>另外，您可以使用以下GoogleCastComponent方法：</p>

<ul>
	<li>
	<pre>
<code class="language-swift" translate="No">public void loadMediaInfo(MediaInfo mediaInfo, long positionMs)</code></pre>
	</li>
	<li>
	<pre>
<code class="language-swift" translate="No">public void loadMediaInfo(MediaInfo mediaInfo)</code></pre>
	</li>
	<li>
	<pre>
<code class="language-swift" translate="No">public PendingResult&lt;RemoteMediaClient.MediaChannelResult&gt; loadItem(MediaQueueItem mediaQueue, int playheadPosition)</code></pre>
	</li>
	<li>
	<pre>
<code class="language-swift" translate="No">public PendingResult&lt;RemoteMediaClient.MediaChannelResult&gt; addItems(MediaQueueItem... mediaQueue )</code></pre>
	</li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Changing_the_default_MediaInfo_data">更改默認的MediaInfo數據</h2>

<p>默認情況下，Cast插件會收集有關由<code translate="No">EventType.SET_SOURCE event</code>。如果您想更改或添加其他信息，例如將自定義JSON對象添加到您的<code translate="No">MediaInfo</code>您的應用接收者可以理解的，您可以通過覆蓋<code translate="No">loadMediaInfo()</code>和<code translate="No">addMediaInfo()</code>來自的方法<code translate="No">BrightcoveCastMediaManager</code>。那麼，你的<code translate="No">BrightcoveCastMediaManager</code>子類作為構造函數參數傳遞給<code translate="No">GoogleCastComponent</code>班級。</p>

<p>在這些方法中，您可以創建自己的<code translate="No">MediaInfo</code>對象並發出相應的事件，如前所示。一定要檢查<code translate="No">com.brightcove.cast.util.CastMediaUtil</code>，因為它提供了一些實用的方法來創建<code translate="No">MediaInfo</code>從視頻和源對象。</p>
</section>

<section class="bcls-section">
<h2 id="Configuring_the_Cast_MediaController">配置Cast MediaController</h2>

<p>要更改在 Cast 會話開始時出現在 Brightcove 視頻視圖中的控制器佈局，請按照以下步驟操作。</p>

<ol class="bcls-tasklist-restart">
	<li><a href="#Extend_the_BrightcoveCastMediaManager">擴展BrightcoveCastMediaManager</a></li>
	<li><a href="#Set_the_MediaControllerConfig">設置 MediaControllerConfig</a></li>
	<li><a href="#Overwrite_the_control_bar_setup">覆蓋控制欄設置</a></li>
</ol>

<h3 id="Extend_the_BrightcoveCastMediaManager">擴展BrightcoveCastMediaManager</h3>

<p>更改默認行為<code translate="No">BrightcoveCastMediaManager</code>，創建一個子類並覆蓋一些關鍵方法：</p>

<ul>
	<li>
	<pre>
<code class="language-swift" translate="No">public void updateBrightcoveMediaController(boolean isRemote)</code></pre>

	<p>這個方法被調用<code translate="No">GoogleCastComponent</code>當會話發生變化時；也就是說，當會話開始或結束時。當會話開始時，<code translate="No">isRemote</code>參數將是<code translate="No">true</code>和<code translate="No">setupRemoteController</code>方法被調用。否則，<code translate="No">isRemote</code>將<code translate="No">false</code>和<code translate="No">resetToLocalController</code>叫做。</p>
	</li>
	<li>
	<pre>
<code class="language-swift" translate="No">protected void setupRemoteController()</code></pre>

	<p>此方法發出事件<code translate="No">EventType.SET_MEDIA_CONTROLLER_CONFIG</code>與<code translate="No">MediaControllerConfig</code>目的。我們將更多地談論<code translate="No">MediaControllerConfig</code>在本節後面。這個方法也監聽<code translate="No">BrightcoveMediaController.CONTROL_BAR_CREATED</code>事件並通過調用<code translate="No">setupBrightcoveControlBar</code>方法。</p>
	</li>
	<li>
	<pre>
<code class="language-swift" translate="No">protected void resetToLocalController()</code></pre>

	<p>該方法負責重置<code translate="No">BrightcoveMediaController</code>通過發射到原始控制器佈局<code translate="No">EventType.RESTORE_DEFAULT_MEDIA_CONTROLLER</code> .</p>
	</li>
	<li>
	<pre>
<code class="language-swift" translate="No">protected void setupBrightcoveControlBar(BrightcoveControlBar controlBar)</code></pre>

	<p>一旦<code translate="No">BrightcoveMediaController</code>已使用<code translate="No">MediaControllerConfig</code>，您將可以訪問<code translate="No">BrightcoveControlBar</code>看法。從這裡，您可以訪問UI視圖（例如Buttons），您可以在其中添加<code translate="No">OnClickListener</code>是他們的。</p>
	</li>
</ul>

<h3 id="Set_the_MediaControllerConfig">設置 MediaControllerConfig</h3>

<p>這<code translate="No">MediaControllerConfig</code>是一個配置類，可用於更改默認控件佈局<code translate="No">BrightcoveMediaController</code>班級。在此類中，您可以設置佈局和<code translate="No">OnTouchListener</code>。創建和配置後，可以發出此對象，如下所示：</p>

<pre class="line-numbers">
<code class="language-swift" translate="No">Map&lt;String, Object&gt; properties = new HashMap&lt;&gt;();
properties.put(Event.MEDIA_CONTROLLER_CONFIG, myMediaControllerConfig);
eventEmitter.emit(EventType.SET_MEDIA_CONTROLLER_CONFIG,properties);</code></pre>

<p>默認的<code translate="No">MediaControllerConfig</code>對象設置<code translate="No">R.layout.cast_media_controller</code>作為一個單一的佈局<strong>玩</strong>按鈕。單擊後，它將打開一個對話框，其中包含兩個選項：</p>

<ul>
	<li><strong>現在播放</strong> -選擇後，<code translate="No">loadMediaInfo()</code>方法會被調用，視頻將在Chromecast中加載並播放。</li>
	<li><strong>添加到隊列</strong> -選擇後，<code translate="No">addMediaInfo()</code>方法會被調用，並將視頻添加到隊列的末尾。</li>
</ul>

<aside class="bcls-aside bcls-aside--information">如果您想保持相同的 UI 但想在正在投射的視頻中加載附加信息，您可以覆蓋<code translate="No">loadMediaInfo()</code>和<code translate="No">addMediaInfo()</code>方法，並自定義您添加到<code translate="No">MediaInfo</code>目的。</aside>

<h3 id="Overwrite_the_control_bar_setup">覆蓋控制欄設置</h3>

<p>當您的媒體控制器佈局通過發出<code translate="No">MediaControllerConfig</code>， 這<code translate="No">BrightcoveControlBar</code>將創建視圖並<code translate="No">BrightcoveCastMediaManager.setupBrightcoveControlBar()</code>方法將被調用。在這裡，您可以通過ID獲取UI組件並添加適當的偵聽器。</p>

<pre class="line-numbers">
<code class="language-swift" translate="No">@Override
protected void setupBrightcoveControlBar(BrightcoveControlBar controlBar) {
   Button playButton = controlBar.findViewById(R.id.cast_play);
   if (playButton != null) {
       playButton.setOnClickListener(new View.OnClickListener() {...});
   }
}</code></pre>
</section>

<section class="bcls-section">
<h2 id="Cast_plugin_dependencies">轉換插件依賴項</h2>

<p>Cast 插件依賴於 ExoPlayer Cast Extension：</p>

<pre>
<code class="language-swift" translate="No">compile 'com.google.android.exoplayer:extension-cast:2.7.0'</code></pre>

<p>該擴展有幾個依賴項，如下表所列：</p>

<table class="bcls-table">
	<thead class="bcls-table__head">
		<tr>
			<th>名稱</th>
			<th>完整的註釋和當前版本</th>
		</tr>
	</thead>
	<tbody class="bcls-table__body">
		<tr>
			<td><a href="https://developer.android.com/reference/android/support/v7/media/MediaRouter">Mediarouter v7</a></td>
			<td><code translate="No">com.android.support:mediarouter-v7:27.0.0</code></td>
		</tr>
		<tr>
			<td><a href="https://developer.android.com/topic/libraries/support-library/packages#v7">Appcompat v7</a></td>
			<td><code translate="No">com.android.support:appcompat-v7:27.0.0</code></td>
		</tr>
		<tr>
			<td><a href="https://developer.android.com/topic/libraries/support-library/packages#v4">支持 v4</a></td>
			<td><code translate="No">com.android.support:support-v4:27.0.0</code></td>
		</tr>
		<tr>
			<td><a href="https://developers.google.com/android/reference/com/google/android/gms/cast/package-summary">演員錶框架</a></td>
			<td><code translate="No">com.google.android.gms:play-services-cast-framework:11.4.2</code></td>
		</tr>
		<tr>
			<td><a href="https://github.com/google/ExoPlayer/tree/release-v2/library/core">ExoPlayer核心</a></td>
			<td><code translate="No">com.google.android.exoplayer:exoplayer-core:2.7.0</code></td>
		</tr>
		<tr>
			<td><a href="https://github.com/google/ExoPlayer/tree/release-v2/library/ui">ExoPlayer用戶界面</a></td>
			<td><code translate="No">com.google.android.exoplayer:exoplayer-ui:2.7.0</code></td>
		</tr>
	</tbody>
</table>
</section>

<section class="bcls-section">
<h2 id="Limitations">局限性</h2>

<p>對於當前適用於 Android 的 Brightcove Native SDK 版本，某些視頻雲功能的支持有限，或者在將 Cast 插件與 Google 示例接收器應用程序一起使用時不受支持：</p>

<ul>
	<li>字幕
	<ul>
		<li>與Google示例接收器應用程序一起使用Cast插件時，只有帶有動態交付DASH的清單內標題會按預期顯示。</li>
		<li>將Cast插件與Google示例接收器應用程序一起使用時，當前不支持任何視頻配置中的帶HLS的清單內字幕和Sidecar字幕。</li>
	</ul>
	</li>
	<li>將 Cast 插件與 Google 示例接收器應用程序一起使用時，不支持 Widevine 模塊化 DRM。</li>
	<li>將Cast插件與Google示例接收器應用程序一起使用時，不支持多個音軌。</li>
	<li>與Google示例接收器應用程序一起使用Cast插件時，不支持客戶端和服務器端廣告。</li>
	<li>將Cast插件與Google示例接收器應用程序一起使用時，不支持實時和實時DVR流。</li>
	<li>目前不支持投射脫機視頻。下載視頻時，源 url 會更改為指向本地文件。如果您隨後嘗試投射該視頻，則該插件將選擇本地來源，但Chromecast設備將無法請求該視頻。</li>
</ul>

<h3 id="Handling_currently_unsupported_features">處理當前不支持的功能</h3>

<p>Cast 插件負責收集 MediaInfo 數據，例如視頻網址、標題、描述和海報圖片，並將其投射到您連接的 Chromecast 設備。請注意，視頻的成功回放和元數據的顯示最終取決於應用程序接收器。</p>

<p>開發人員有責任評估Application Receiver所支持的功能及其局限性。因此，開發人員應該實現 UI 元素，告知用戶哪些內容可以轉換，哪些不能轉換。例如，如果應用程序接收器不支持帶有DRM或廣告的視頻，則您的Android應用程序必須處理這些情況。</p>
</section>

<section class="bcls-section">
<h2 id="Known_Issues">已知的問題</h2>

<h3>Android 9</h3>

<p>在 Android 9 上使用 Chromecast 時，您需要包含一個<code translate="No">FOREGROUND_SERVICE</code>允許。這允許應用程序在應用程序處於後台並返回前台時使用通知來控制投射會話。</p>

<p>這<code translate="No">uses-permission</code>標籤應該添加到應用程序的<strong>AndroidManifest.xml</strong>文件，如下：</p>

<pre>
<code class="language-java" translate="No">&lt;uses-permission android:name="android.permission.FOREGROUND_SERVICE"/&gt;</code></pre>

<h3>音量控制</h3>

<p>Cast 對話框中的音量控制在發送設備上可能不會一直降低到零。使用“投射”對話框中的音量控製或發送設備上的音量按鈕時，顯示的音量級別可能會略微回升以在發送器上顯示非零值。但是，接收器將顯示非零值。這是 Google Cast 對話框的行為，而不是 Brightcove Android SDK 中的行為。</p>

<h4>Google Play服務</h4>

<p>如果發件人的 Google Play 服務版本不是最新的，則可能無法創建 Casting 連接。當發送方的 Google Play 服務（尤其是 Cast 服務框架）過期時，您可能無法成功創建 Cast 連接。這可以通過通過 Google Play 商店更新發件人的 Google Play 服務來解決。</p>
</section>
</article>