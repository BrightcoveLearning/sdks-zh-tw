---
title: '使用適用於 Android 的本機 SDK 進行離線播放的多個音軌' 
description:在本主題中，您將了解如何在使用適用於 Android 的 Brightcove Native Player SDK 進行離線播放時返回多個音頻和文本軌道。
parent: Playback 
grandparent: Android Development
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Manage_multiple_tracks">管理多個曲目</h2>

<p>默認情況下，不下載字幕文件，僅下載一個音軌。要下載與視頻相關的其他資產，請按以下步驟操作：</p>

<ol class="bcls-tasklist">
	<li>
	<p>獲取視頻雲的參考<a href="/android/reference/javadoc/com/brightcove/player/edge/OfflineCatalog.html">離線目錄</a>客戶。</p>

	<pre>
<code class="language-java" translate="No">private OfflineCatalog catalog;
...
catalog = new OfflineCatalog(this, eventEmitter, ACCOUNT_ID, POLICY_KEY);
...</code></pre>
	</li>
	<li>
	<p>致電<a href="/android/reference/javadoc/com/brightcove/player/edge/AbstractOfflineCatalog.html#getMediaFormatTracksAvailable-com.brightcove.player.model.Video-com.brightcove.player.offline.MediaDownloadable.MediaFormatListener-">getMediaFormatTracksAvailable</a>方法，傳入<a href="/android/reference/javadoc/com/brightcove/player/model/Video.html">視頻</a>您要獲取其信息的對象，以及<a href="/android/reference/javadoc/com/brightcove/player/offline/MediaDownloadable.MediaFormatListener.html">MediaFormatListener</a>監聽返回的數據。</p>

	<pre>
<code class="language-java" translate="No">OfflineCatalog.getMediaFormatTracksAvailable(
  @NonNull final Video video,
  @NonNull final MediaDownloadable.MediaFormatListener mediaFormatListener)</code></pre>
	</li>
	<li>
	<p>這<code translate="No">MediaFormatListener</code>調用以下方法：</p>

	<pre>
<code class="language-java" translate="No">void onResult(MediaDownloadable mediaDownloadable, Bundle mediaFormatBundle);</code></pre>

	<p>這<a href="/android/reference/javadoc/com/brightcove/player/offline/MediaDownloadable.html">媒體可下載</a>對象包含信息，包括視頻播放、音頻語言和字幕。這<code translate="No">mediaDownloadable</code>對像被緩存，並在您調用時使用<a href="/android/reference/javadoc/com/brightcove/player/edge/AbstractOfflineCatalog.html#downloadVideo-com.brightcove.player.model.Video-">OfflineCatalog.downloadVideo(視頻)</a> .</p>

	<p>這<a href="/android/reference/javadoc/com/brightcove/player/offline/MediaDownloadable.MediaFormatListener.html">捆</a>對象包含有關可用媒體格式軌道的信息，並具有以下屬性：</p>

	<ul>
		<li><a href="/android/reference/javadoc/com/brightcove/player/offline/MediaDownloadable.html#VIDEO_RENDITIONS">MediaDownloadable.VIDEO_RENDITIONS</a> -包含的數組列表<code translate="No">MediaFormat</code>對象</li>
		<li><a href="/android/reference/javadoc/com/brightcove/player/offline/MediaDownloadable.html#AUDIO_LANGUAGES">MediaDownloadable.AUDIO_LANGUAGES</a> -包含的數組列表<code translate="No">MediaFormat</code>對象。</li>
		<li><a href="/android/reference/javadoc/com/brightcove/player/offline/MediaDownloadable.html#AUDIO_LANGUAGE_ROLES">MediaDownloadable.AUDIO_LANGUAGE_ROLES</a> -包含字符串數組列表。此列表提供了有關<code translate="No">MediaDownloadable.AUDIO_LANGUAGES</code> .索引與音頻語言列表相匹配。音頻角色的示例可以是主要角色，也可以是替代角色。</li>
		<li><a href="/android/reference/javadoc/com/brightcove/player/offline/MediaDownloadable.html#CAPTIONS">MediaDownloadable.CAPTIONS</a> -包含的數組列表<code translate="No">MediaFormat</code>對象</li>
	</ul>
	</li>
	<li>
	<p>從包中檢索數據列表。以下是檢索不同列表的示例：</p>

	<pre>
<code class="language-java" translate="No">ArrayList&lt;MediaFormat&gt; video = bundle.getParcelableArrayList(MediaDownloadable.VIDEO_RENDITIONS);

ArrayList&lt;MediaFormat&gt; audio = bundle.getParcelableArrayList(MediaDownloadable.AUDIO_LANGUAGES);

ArrayList&lt;String&gt; roles = bundle.getStringArrayList(MediaDownloadable.AUDIO_LANGUAGE_ROLES);

ArrayList&lt;MediaFormat&gt; captions = bundle.getParcelableArrayList(MediaDownloadable.CAPTIONS);</code></pre>
	</li>
	<li>
	<p>創建一個新的<code translate="No">Bundle</code>（<code translate="No">filteredBundle</code>）以選擇要包含在下載內容中的音軌和隱藏式字幕。</p>

	<pre>
<code class="language-java" translate="No">Bundle filteredBundle = new Bundle();</code></pre>

	<aside class="bcls-aside bcls-aside--information">如果您重複使用之前創建的捆綁包，您可以下載所有音軌和隱藏式字幕。</aside>
	</li>
	<li>
	<p>從先前創建的列表中過濾所需的曲目，然後將其添加到新曲目中<code translate="No">filteredBundle</code>。</p>

	<pre>
<code class="language-java" translate="No">ArrayList&lt;MediaFormat&gt; captions = bundle.getParcelableArrayList(MediaDownloadable.CAPTIONS);
if (captions != null &amp;&amp; captions.size() &gt; 0) {
   ArrayList&lt;MediaFormat&gt; newCaptions = new ArrayList&lt;&gt;();
   newCaptions.add(captions.get(0));

filteredBundle.putParcelableArrayList(MediaDownloadable.CAPTIONS, newCaptions);
}</code></pre>
	</li>
	<li>
	<p>設置<code translate="No">filteredBundle</code>到<code translate="No">MediaDownloadable</code>目的。</p>

	<pre>
<code class="language-java" translate="No">mediaDownloadable.setConfigurationBundle(filteredBundle);</code></pre>
	</li>
	<li>
	<p>下載視頻。</p>

	<pre>
<code class="language-java" translate="No">offlineCatalog.downloadVideo(video);</code></pre>

	<p>在內部，<code translate="No">OfflineCatalog</code>將使用緩存的<code translate="No">MediaDownloadable</code>由...提供<code translate="No">MediaDownloadable.MediaFormatListener</code>打回來。</p>
	</li>
</ol>
</section>

<section class="bcls-section">
<h2 id="Code_sample">程式碼範例</h2>

<p>有關下載其他音軌和字幕文件的完整示例，請參見<a href="https://github.com/BrightcoveOS/android-player-samples/tree/master/brightcove-exoplayer/OfflinePlaybackSampleApp/src/main/java/com/brightcove/player/samples/offlineplayback">離線播放示例應用</a>。</p>
</section>
</article>